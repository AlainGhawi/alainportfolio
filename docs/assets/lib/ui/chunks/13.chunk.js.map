{"version":3,"sources":["webpack:///./src/ui/src/components/Note/Context.js","webpack:///./src/ui/src/helpers/setAnnotationRichTextStyle.js","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/NoteTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.scss?3f0d","webpack:///./src/ui/src/components/NoteState/NoteStatePopup.js","webpack:///./src/ui/src/helpers/NoteStateUtils.js","webpack:///./src/ui/src/hooks/usePortal.js","webpack:///./src/ui/src/components/PopupPortal/PopupPortal.js","webpack:///./src/ui/src/components/PopupPortal/index.js","webpack:///./src/ui/src/helpers/getAnnotationStyles.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss?3394","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss","webpack:///./src/ui/src/constants/quill.scss?ae26","webpack:///./src/ui/src/constants/quill.scss","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss?3833","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss?98d3","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss","webpack:///./src/ui/src/components/NoteState/NoteState.scss","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss?a9a8","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss?5f3c","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss?a86d","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss?e09b","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss?e8ab","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss","webpack:///./src/ui/src/components/Note/Note.scss?d9ff","webpack:///./src/ui/src/components/Note/Note.scss","webpack:///./src/ui/src/components/NotesPanel/ReplyAttachmentPicker.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss?5a25","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.js","webpack:///./src/ui/src/components/NotePopup/NotePopupContainer.js","webpack:///./src/ui/src/components/NotePopup/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.js","webpack:///./src/ui/src/components/NoteState/NoteStateContainer.js","webpack:///./src/ui/src/components/NoteState/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicator.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicatorContainer.js","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.js","webpack:///./src/ui/src/components/NoteHeader/index.js","webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreviewContainer.js","webpack:///./src/ui/src/components/NoteTextPreview/index.js","webpack:///./src/ui/src/helpers/ReplyAttachmentManager.js","webpack:///./src/ui/src/helpers/sanitizeSVG.js","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.js","webpack:///./src/ui/src/components/ReplyAttachmentList/index.js","webpack:///./src/ui/src/helpers/setReactQuillContent.js","webpack:///./src/ui/src/components/NoteContent/NoteContent.js","webpack:///./src/ui/src/components/NoteContent/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.js","webpack:///./src/ui/src/components/Note/ReplyArea/index.js","webpack:///./src/ui/src/components/Note/NoteGroupSection.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/index.js","webpack:///./src/ui/src/components/Note/Note.js","webpack:///./src/ui/src/components/Note/index.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.js","webpack:///./src/ui/src/components/AnnotationStylePopup/index.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.js","webpack:///./src/ui/src/components/ListSeparator/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.scss?5d7b","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.scss","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.scss?db39","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.scss","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.scss?296a","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.scss","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.scss?21e2","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.scss","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.scss?6dd5","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.scss","webpack:///./src/ui/src/components/NotesPanel/VirtualizedList/VirtualizedList.js","webpack:///./src/ui/src/components/NotesPanel/VirtualizedList/index.js","webpack:///./src/ui/src/components/NotesPanel/NormalList/NormalList.js","webpack:///./src/ui/src/components/NotesPanel/NormalList/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.js","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.js","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.js","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.js","webpack:///./src/ui/src/components/NotesPanelHeader/index.js","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.js","webpack:///./src/ui/src/components/NotesPanel/NotesPanelContainer.js","webpack:///./src/ui/src/components/NotesPanel/index.js"],"names":["NoteContext","React","createContext","setAnnotationRichTextStyle","editor","annotation","richTextStyle","ops","getContents","breakpoint","forEach","item","attributes","isMention","insert","mention","value","denotationChar","cssStyle","undefined","bold","italic","color","underline","strike","length","setRichTextStyle","i","globalUserData","formats","Keyboard","Quill","CustomKeyboard","DEFAULTS","bindings","register","Clipboard","Delta","QuillPasteExtra","quill","options","keepSelection","range","this","getSelection","delta","retain","index","setSelection","sources","SILENT","mentionModule","allowedChars","mentionDenotationChars","mentionContainerClass","mentionListClass","listItemClass","renderItem","email","source","searchTerm","renderList","mentionsSearchFunction","mentionsManager","getMentionLookupCallback","foundUsers","CommentTextarea","forwardRef","ref","onChange","onKeyDown","onBlur","onFocus","userData","isReply","t","useTranslation","isAddReplyAttachmentDisabled","useSelector","state","selectors","isElementDisabled","DataElements","NotesPanel","ADD_REPLY_ATTACHMENT_BUTTON","contentArray","split","pop","map","join","className","onClick","e","preventDefault","stopPropagation","onScroll","style","overflowY","modules","theme","placeholder","aria-label","Button","dataElement","img","getRootNode","querySelector","click","displayName","propTypes","PropTypes","string","func","isRequired","onSubmit","NoteTextarea","props","forwardedRef","getUserData","isNoteSubmissionWithEnterEnabled","getAutoFocusNoteOnAnnotationSelection","getIsNoteEditing","shallowEqual","canSubmitByEnter","autoFocusNoteOnAnnotationSelection","isNoteEditing","useContext","resize","isContentEditable","isSelected","textareaRef","useRef","prevHeightRef","useLayoutEffect","boxDOMElement","current","container","firstElementChild","boundingBox","getBoundingClientRect","height","useEffect","focus","textareaProps","el","throttle","content","getText","trim","target","doesDeltaContainMention","formattedText","getFormattedTextFromDeltas","mentionData","extractMentionDataFromStr","totalTextLength","plainTextValue","textareaEditor","setTimeout","which","isSubmittingByEnter","isSubmittingByCtrlEnter","metaKey","ctrlKey","api","__esModule","default","module","styleTag","webComponents","document","getElementsByTagName","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","styleNode","innerHTML","cloneNode","push","head","exports","locals","object","triggerElementName","onClose","handleStateChange","NoteStatePopup","useState","left","right","top","position","setPosition","popupRef","useOnClickOutside","contains","createOnStateOptionButtonClickHandler","getOverlayPositionBasedOn","id","glyph","createStateAnnotation","documentViewerKey","stateAnnotation","window","Core","Annotations","StickyAnnotation","core","getCurrentUser","displayAuthor","getDisplayAuthor","stateMessage","i18next","toLowerCase","contents","setContents","usePortal","rootElemRef","rootElem","node","existingParent","parentElem","rootContainer","createElement","setAttribute","createRootElement","isApryseWebViewerWebComponent","body","insertBefore","lastElementChild","nextElementSibling","remove","childElementCount","Portal","children","pointerEvents","zIndex","createPortal","PopupPortal","property","elementName","isBlendModeSupported","Opacity","isFormFieldPlaceholder","ReplyAttachmentPicker","annotationId","addAttachments","replyAttachmentHandler","getReplyAttachmentHandler","file","files","attachment","url","name","size","type","display","handleEdit","handleDelete","closePopup","openPopup","isEditable","bool","isDeletable","isOpen","noop","NotePopup","notePopupButtonClass","classNames","active","optionsClass","DataElementWrapper","Icon","NotePopupContainer","activeDocumentViewerKey","getActiveDocumentViewerKey","setIsEditing","noteIndex","canModify","setCanModify","canModifyContents","setCanModifyContents","setIsOpen","onUpdateAnnotationPermission","addEventListener","removeEventListener","passProps","useCallback","FreeTextAnnotation","getAnnotationManager","isFreeTextEditingEnabled","trigger","deleteAnnotations","getGroupedChildren","NoDelete","Tooltip","openOnInitialLoad","NoteState","annotationState","getStatus","icon","noteStateButtonClassName","Id","data-id","NoteStateContainer","newValue","addReply","annotationManager","addAnnotation","getRootAnnotation","NoteUnpostedCommentIndicator","pendingEditTextMap","pendingReplyMap","pendingAttachmentMap","hasUnpostedComment","setHasUnpostedComment","hasUnpostedReply","setHasUnpostedReply","hasUnpostedAttachment","setHasUnpostedAttachment","data-element","isDisabled","iconColor","fillColor","language","noteDateFormat","notesShowLastUpdatedDate","isUnread","renderAuthorName","isNoteStateDisabled","isEditing","number","sortStrategy","activeTheme","isMultiSelected","isMultiSelectMode","handleMultiSelect","isGroupMember","showAnnotationNumbering","NoteHeader","date","timezone","dateCreated","NotesPanelSortStrategy","MODIFIED_DATE","CREATED_DATE","getLatestActivityDate","DateCreated","datetimeStr","toLocaleString","timeZone","Date","numberOfReplies","getReplies","toHexString","Theme","DARK","isDarkColorHex","getColor","FillColor","annotationAssociatedNumber","getAssociatedNumber","annotationDisplayedAssociatedNumber","authorAndDateClass","noteHeaderClass","parent","dayjs","locale","format","PageNumber","Choice","checked","deselectAllAnnotations","NoteTextPreviewContainer","NoteTextPreview","notePanelWidth","getNotesPanelWidth","panelWidth","icons","FileAttachmentUtils","decompressFileContent","decompressWithFlateDecode","setAnnotationAttachments","setAttachments","isImage","startsWith","getAttachmentIcon","readAsText","svg","Promise","resolve","toString","fileReader","FileReader","result","isSVG","sanitizeSVG","svgText","forbiddenTags","DOMPurify","addHook","_","hookEvent","tagName","allowedTags","clean","sanitize","Blob","isDirty","ImagePreview","src","setSrc","isDirtySVG","setIsDirtySvg","fileToSanitize","isImageFromPDF","File","URL","createObjectURL","processImagePreview","ReplyAttachmentList","fileDeleted","getTabManager","isReplyAttachmentPreviewEnabled","tabManager","previewEnabled","console","warn","fileData","addTab","filename","setActive","saveCurrentActiveTabState","onDownload","saveAs","key","onDelete","getAttributtes","element","attr","decoration","includes","setReactQuillContent","getRichTextStyle","indexes","Object","keys","text","isNaN","lastIndex","textSlice","slice","extend","LocalizedFormat","isNonReplyNoteRead","onReplyClicked","NoteContent","getNoteDateFormat","getIconColor","mapAnnotationToKey","getCurrentLanguage","isNotesPanelTextCollapsingEnabled","isNotesPanelRepliesCollapsingEnabled","getActiveTheme","getTimezone","canCollapseTextPreview","canCollapseReplyPreview","searchInput","onTopNoteContentClicked","setPendingEditText","dispatch","useDispatch","attachments","getAttachments","annotationChangedListener","annotations","action","annot","useDidUpdate","actions","finishNoteEditing","customData","highlightSearchInput","renderContents","fontColor","autolinkerContent","Autolinker","link","stripPrefix","stripTrailingSlash","replaceFn","match","href","getAnchorHref","anchorText","getAnchorText","offset","getOffset","getType","start","end","getMatchedText","highlightResult","linesToBreak","comment","renderRichText","contentToRender","strIdx","anchorData","forIdx","rel","getDataWithKey","JSON","parse","getCustomData","contentsToRender","textColor","Color","a","textAreaValue","thereIsNoUnpostedEdit","handleContentsClicked","noteContentClass","unread","clicked","useMemo","contentStyle","onTextAreaValueChange","pendingText","textPreview","highlightSearchResult","shouldCollapseAnnotationText","isString","paddingRight","header","ContentArea","getIsMentionEnabled","INLINE_COMMENT_POPUP","isElementOpen","NOTES_PANEL","isMentionEnabled","isInlineCommentDisabled","isInlineCommentOpen","isNotesPanelOpen","setCurAnnotId","deleteAttachment","clearAttachments","shouldNotFocusOnInput","isMobile","getEditor","setText","ids","textLength","getLength","pendingAttachments","extractMentionDataFromAnnot","mentions","setCustomData","stringify","drawAnnotationsFromList","contentClassName","disabled","getRichTextSpan","fontWeight","fontStyle","textDecoration","replace","styles","indices","Number","sort","b","Math","min","max","styleIndices","fullText","loweredText","loweredSearchInput","lastFoundInstance","indexOf","allFoundPositions","regexSafeSearchInput","RegExp","test","idx","substring","ReplyArea","onPendingReplyChange","isDocumentReadOnly","getIsReplyDisabled","isReadOnly","isReplyDisabled","isReplyDisabledForAnnotation","isNoteEditingTriggeredByAnnotationPopup","setPendingReply","isExpandedFromSearch","scrollToSelectedAnnot","isFocused","setIsFocused","postReply","replyText","replyAnnotation","createMentionReply","addAnnotations","createAnnotationReply","ifReplyNotAllowed","replyAreaClass","replyButtonClass","onMouseDown","handleNoteTextareaChange","isSubmitType","groupAnnotations","array","NoteGroupSection","isViewingGroupAnnots","setIsViewingGroupAnnots","ViewAllAnnotsButton","CloseAllAnnotsButton","groupAnnotation","selectAnnotation","jumpToAnnotation","openElement","LineConnectorPortal","mount","removeChild","AnnotationNoteConnectorLine","noteContainerRef","getDocumentContainerWidth","getDocumentContainerHeight","lineIsOpen","notePanelIsOpen","isLineDisabled","documentContainerWidth","documentContainerHeight","rightHorizontalLineWidth","setRightHorizontalLineWidth","rightHorizontalLineTop","setRightHorizontalLineTop","rightHorizontalLineRight","setRightHorizontalLineRight","leftHorizontalLineWidth","setLeftHorizontalLineWidth","leftHorizontalLineTop","setLeftHorizontalLineTop","leftHorizontalLineRight","setLeftHorizontalLineRight","getAnnotationPosition","annotationBottomRight","bottomRight","annotationTopLeft","topLeft","getAnnotationLineOffset","Subject","getScrollViewElement","scrollTop","scrollLeft","annotWidthInPixels","x","annotHeightInPixels","y","viewerWidth","host","clientWidth","innerWidth","viewerOffset","offsetLeft","lineWidth","noZoomRefPoint","getNoZoomReferencePoint","noZoomRefShiftX","NoZoom","noZoomRefShiftY","onPageNumberUpdated","closeElement","verticalHeight","abs","verticalTop","width","isInNotesPanel","currId","Note","containerRef","containerHeightRef","isEditingMap","setIsEditingMap","unreadReplyIdSet","Set","getNoteTransformFunction","getCustomNoteSelectionFunction","getUnreadAnnotationIdSet","isCommentThreadExpansionEnabled","isRightClickAnnotationPopupEnabled","noteTransformFunction","customNoteSelectionFunction","unreadAnnotationIdSet","shouldExpandCommentThread","replies","filter","r","has","add","setAnnotationReadState","isRead","prevHeight","currHeight","round","notesPanelElement","getElementsByClassName","child","parentNode","handleNoteClick","ANNOTATION_NOTE_CONNECTOR_LINE","ANNOTATION_POPUP","hasUnreadReplies","noteClass","expanded","repliesClass","hidden","reply","showReplyArea","values","some","val","handleReplyClicked","markAllRepliesRead","repliesSetToRead","selectAnnotations","getGroupAnnotations","isGroup","CaretAnnotation","lastReplyId","role","tabIndex","currentTarget","label","properties","isRedaction","isFreeText","isEllipse","hasBackToMenu","onBackToMenu","AnnotationStylePopup","isMeasure","colorMapKey","showLineStyleOptions","hideSnapModeCheckbox","onResize","ANNOTATION_STYLE_POPUP","isToolDefaultStyleUpdateFromAnnotationPopupEnabled","handleSliderChange","redrawAnnotation","handlePropertyChange","setAnnotationStyles","setToolStyles","ToolName","getAutoSizeType","AutoSizeTypes","NONE","doc","getDocument","pageNumber","pageInfo","getPageInfo","pageMatrix","getPageMatrix","pageRotation","getPageRotation","fitText","adjustFreeTextBoundingBox","handleStyleChange","handleRichTextStyleChange","updateAnnotationRichTextStyle","handleLineStyleChange","section","lineStyle","setStartStyle","setEndStyle","dashes","shift","handleClick","getClassName","measureRef","ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER","ActionButton","ANNOTATION_STYLE_POPUP_BACK_BUTTON","StylePopup","onStyleChange","onSliderChange","onPropertyChange","disableSeparator","onRichTextStyleChange","onLineStyleChange","renderContent","ListSeparator","memo","notes","initialScrollTop","selectedIndex","cache","CellMeasurerCache","defaultHeight","fixedWidth","VirtualizedList","listRef","setOffset","dimension","setDimension","prevWindowHeight","innerHeight","useImperativeHandle","scrollToPosition","scrollToRow","clearAll","measureAllRows","forceUpdateGrid","windowResizeHandler","diff","handleScroll","rowRenderer","currNote","columnIndex","rowIndex","measure","clear","recomputeRowHeights","_resize","bounds","deferredMeasurementCache","outline","overscanRowCount","rowCount","rowHeight","NormalList","parentRect","childRect","clientHeight","Fragment","pendingReply","count","MultiStylePopup","styleTabs","setStyleTabs","clickedTrigger","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","datePicker","getDatePicker","getAnnotationStyles","freeTextAnnotation","find","getIntent","Intent","FreeText","FreeTextCallout","richTextStyles","Font","FontSize","TextAlign","TextVerticalAlign","strikeout","availablePalettes","AnnotationStylePopupTabs","TEXT_COLOR","STROKE_COLOR","FILL_COLOR","updateAnnotationStylePopupTabs","newColorMap","copyMapWithDataProperties","setColorMap","_styleTabs","showMultiReply","setShowMultiReply","showMultiState","setShowMultiState","showMultiStyle","setShowMultiStyle","setMultiSelectMode","isMultiSelectedMap","setIsMultiSelectedMap","multiSelectedAnnotations","getParentAnnotations","annotSet","isGrouped","parentAnnotation","getAnnotationById","Array","from","MultiSelectControls","modifiableMultiSelectAnnotations","setModfiableMultiSelectAnnotations","onAnnotationChanged","_isMultiSelectedMap","groupedAnnots","groupedAnnot","groupAnnot","originalKeys","updatedKeys","_modifiableMultiSelectAnnotations","multiSelectedAnnot","canGroup","getNumberOfGroups","canUngroup","Provider","NOTE_MULTI_REPLY_BUTTON","title","NOTE_MULTI_STATE_BUTTON","bottom","NOTE_MULTI_STYLE_BUTTON","NOTE_MULTI_GROUP_BUTTON","NOTE_MULTI_UNGROUP_BUTTON","ungroupAnnotations","NOTE_MULTI_DELETE_BUTTON","warning","message","confirmBtnText","onConfirm","showWarningMessage","NotesPanelHeader","disableFilterAnnotation","setSearchInputHandler","toggleMultiSelectMode","isMultiSelectEnabled","getSortStrategy","getNotesPanelCustomHeaderOptions","isSortContainerDisabled","customHeaderOptions","filterEnabled","setFilterEnabled","toggleFilterStyle","detail","types","authors","colors","statuses","Events","ANNOTATION_FILTER_CHANGED","_handleInputChange","debounce","sortContainer","Dropdown","items","getSortStrategies","translationPrefix","currentSelectionKey","onClickItem","strategy","setNotesPanelSortStrategy","originalHeaderElement","DefaultHeader","INPUT_CONTAINER","COMMENTS_COUNTER","SORT_ROW","NOTE_MULTI_SELECT_MODE_BUTTON","filterAnnotationButton","CustomElement","render","renderArguments","overwriteDefaultHeader","currentLeftPanelWidth","selectedNoteIds","setSelectedNoteIds","setSearchInput","setScrollToSelectedAnnot","getPageLabels","getCustomNoteFilter","getNotesInLeftPanel","isAnnotationNumberingEnabled","getEnableNotesPanelVirtualizedList","isInDesktopOnlyMode","getNotesPanelCustomEmptyPanel","getIsNotesPanelMultiSelectEnabled","pageLabels","customNoteFilter","currentNotesPanelWidth","notesInLeftPanel","enableNotesPanelVirtualizedList","customEmptyPanel","isNotesPanelMultiSelectEnabled","currentWidth","isMobileSize","setMultiSelectedAnnotations","curAnnotId","scrollTopRef","VIRTUALIZATION_THRESHOLD","isIE","Infinity","onAnnotationNumberingUpdated","isEnabled","setAnnotationNumbering","singleSelectedNoteIndex","filterNotesWithSearch","note","authorName","annotationPreview","notesToRender","getSortedNotes","shouldRender","noteAndReplies","onlyReplyContainsSearchInput","setPendingEditTextMap","annotationID","setPendingReplyMap","setPendingAttachmentMap","attachmentList","splice","renderChild","listSeparator","shouldRenderSeparator","getSeparatorContent","prevNote","handleNoteClicked","currIds","clone","deselectAnnotation","contextValue","isNotePanelOpen","NoResults","NoAnnotationsGlyph","NoAnnotationsMessage","NoAnnotationsReadOnlyMessage","readOnlyMessage","shouldRenderNoAnnotationsIcon","hideIcon","shouldRenderCustomEmptyPanel","NoAnnotations","MultiSelectPlaceHolder","MultiReplyPlaceHolder","findIndex","existingSelectedNotes","minWidth","Panel","onMouseUp","closeElements","isMultiViewerMode","1","2","noteMap","setNoteMap","setNotes","selectedNoteIdsMap","setSelectedNoteIdsMap","isMultiSelectedViewerMap","setIsMultiSelectedViewerMap","getGroupedAnnots","selectedAnnotations","mainAnnot","onDocumentUnloaded","_setNotes","getSelectedAnnotations","getAnnotationsList","Listable","Hidden","Tools","ToolNames","CROP","isContentEditPlaceholder","setDocumentUnloaded1","setDocumentUnloaded2","setNotes2","setNotes1","onAnnotationSelected2","onAnnotationSelected","selectedAnnot","onAnnotationSelected1"],"mappings":"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","file":"chunks/13.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst NoteContext = React.createContext();\r\n\r\nexport default NoteContext;","const setAnnotationRichTextStyle = (editor, annotation) => {\r\n  const richTextStyle = {};\r\n  const ops = editor.getContents().ops;\r\n  let breakpoint = 0;\r\n  ops.forEach((item) => {\r\n    const attributes = item.attributes;\r\n    const isMention = item.insert?.mention;\r\n    let value = item.insert;\r\n    if (isMention) {\r\n      const mention = item.insert.mention;\r\n      value = mention.denotationChar + mention.value;\r\n    }\r\n    const cssStyle = {};\r\n    if (attributes === null || attributes === undefined ? undefined : attributes.bold) {\r\n      cssStyle['font-weight'] = 'bold';\r\n    }\r\n    if (attributes === null || attributes === undefined ? undefined : attributes.italic) {\r\n      cssStyle['font-style'] = 'italic';\r\n    }\r\n    if (attributes === null || attributes === undefined ? undefined : attributes.color) {\r\n      cssStyle['color'] = attributes.color;\r\n    }\r\n    if (attributes === null || attributes === undefined ? undefined : attributes.underline) {\r\n      cssStyle['text-decoration'] = 'word';\r\n    }\r\n    if (attributes === null || attributes === undefined ? undefined : attributes.strike) {\r\n      if (cssStyle['text-decoration']) {\r\n        cssStyle['text-decoration'] = `${cssStyle['text-decoration']} line-through`;\r\n      } else {\r\n        cssStyle['text-decoration'] = 'line-through';\r\n      }\r\n    }\r\n    richTextStyle[breakpoint] = cssStyle;\r\n    breakpoint += value.length;\r\n  });\r\n  annotation.setRichTextStyle(richTextStyle);\r\n};\r\n\r\nexport default setAnnotationRichTextStyle;\r\n","import React from 'react';\r\nimport ReactQuill, { Quill } from 'react-quill';\r\nimport 'quill-mention';\r\nimport mentionsManager from 'helpers/MentionsManager';\r\nimport Button from 'components/Button';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport DataElements from 'constants/dataElement';\r\nimport selectors from 'selectors';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nimport '../../../constants/quill.scss';\r\nimport './CommentTextarea.scss';\r\n\r\nlet globalUserData = [];\r\n\r\n// These are the formats that will be accepted by quill\r\n// removed images and videos\r\nconst formats = [\r\n  'background',\r\n  'bold',\r\n  'color',\r\n  'font',\r\n  'code',\r\n  'italic',\r\n  'link',\r\n  'size',\r\n  'strike',\r\n  'script',\r\n  'underline',\r\n  'blockquote',\r\n  'header',\r\n  'indent',\r\n  'list',\r\n  'align',\r\n  'direction',\r\n  'code-block',\r\n  'formula',\r\n  'mention',\r\n];\r\n\r\n// We override the default keyboard module to disable the list autofill feature\r\nconst Keyboard = Quill.import('modules/keyboard');\r\n\r\nclass CustomKeyboard extends Keyboard {\r\n  static DEFAULTS = {\r\n    ...Keyboard.DEFAULTS,\r\n    bindings: {\r\n      ...Keyboard.DEFAULTS.bindings,\r\n      'list autofill': undefined,\r\n    }\r\n  }\r\n}\r\n\r\nQuill.register('modules/keyboard', CustomKeyboard, true);\r\n\r\n// Overriding clipboard module to fix cursor issue after pasting text\r\nconst Clipboard = Quill.import('modules/clipboard');\r\nconst Delta = Quill.import('delta');\r\n\r\nclass QuillPasteExtra extends Clipboard {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.keepSelection = options.keepSelection;\r\n  }\r\n  onPaste() {\r\n    const range = this.quill.getSelection();\r\n    const delta = new Delta().retain(range.index).delete(range.length);\r\n    if (this.keepSelection) {\r\n      this.quill.setSelection(range.index, delta.length(), Quill.sources.SILENT);\r\n    } else {\r\n      this.quill.setSelection(range.index + delta.length(), Quill.sources.SILENT);\r\n    }\r\n  }\r\n}\r\nQuill.register('modules/clipboard', QuillPasteExtra, true);\r\n\r\n// mentionsModule has to be outside the funtion to be able to access it without it being destroyed and recreated\r\nconst mentionModule = {\r\n  mention: {\r\n    allowedChars: /^[A-Za-z\\s0-9\\-_]*$/,\r\n    mentionDenotationChars: ['@', '#'],\r\n    mentionContainerClass: 'mention__element',\r\n    mentionListClass: 'mention__suggestions__list',\r\n    listItemClass: 'mention__suggestions__item',\r\n    renderItem(item) {\r\n      // quill-mentions does not support jsx being returned\r\n      if (item.email) {\r\n        return (`<div> ${item.value} <p class=\"email\"> ${item.email} </p> </div>`);\r\n      }\r\n      return (`<div> ${item.value} </div>`);\r\n    },\r\n    async source(searchTerm, renderList) {\r\n      const mentionsSearchFunction = mentionsManager.getMentionLookupCallback();\r\n      const foundUsers = await mentionsSearchFunction(globalUserData, searchTerm);\r\n      renderList(foundUsers, searchTerm);\r\n    }\r\n  }\r\n};\r\n\r\nconst CommentTextarea = React.forwardRef(\r\n  (\r\n    {\r\n      value = '',\r\n      onChange,\r\n      onKeyDown,\r\n      onBlur,\r\n      onFocus,\r\n      userData,\r\n      isReply,\r\n    },\r\n    ref\r\n  ) => {\r\n    const [t] = useTranslation();\r\n\r\n    const isAddReplyAttachmentDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON));\r\n\r\n    globalUserData = userData;\r\n\r\n    const addAttachment = () => {\r\n      getRootNode().querySelector('#reply-attachment-picker')?.click();\r\n    };\r\n\r\n    const onClick = (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    };\r\n\r\n    const onScroll = (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    };\r\n\r\n    // Convert text with newline (\"\\n\") to <p>...</p> format so\r\n    // that editor handles multiline text correctly\r\n    if (value) {\r\n      const contentArray = value.split('\\n');\r\n      if (contentArray.length && contentArray[contentArray.length - 1] === '') {\r\n        contentArray.pop();\r\n        value = contentArray.map((item) => `<p>${item || '<br>'}</p>`).join('');\r\n      }\r\n    }\r\n\r\n    // onBlur and onFocus have to be outside in the div because of quill bug\r\n    return (\r\n      <div className='comment-textarea' onBlur={onBlur} onFocus={onFocus} onClick={onClick} onScroll={onScroll}>\r\n        <ReactQuill\r\n          className='comment-textarea ql-container ql-editor'\r\n          style={{ overflowY: 'visible' }}\r\n          ref={ref}\r\n          modules={userData && userData.length > 0 ? mentionModule : {}}\r\n          theme=\"snow\"\r\n          value={value}\r\n          placeholder={`${isReply ? t('action.reply') : t('action.comment')}...`}\r\n          aria-label={`${isReply ? t('action.reply') : t('action.comment')}...`}\r\n          onChange={onChange}\r\n          onKeyDown={onKeyDown}\r\n          formats={formats}\r\n        />\r\n        {isReply && !isAddReplyAttachmentDisabled &&\r\n          <Button\r\n            className='add-attachment'\r\n            dataElement={DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON}\r\n            img='ic_fileattachment_24px'\r\n            onClick={addAttachment}\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  });\r\n\r\nCommentTextarea.displayName = 'CommentTextarea';\r\n\r\nexport default CommentTextarea;\r\n","import React, { useLayoutEffect, useRef, useContext, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, shallowEqual } from 'react-redux';\r\nimport throttle from 'lodash/throttle';\r\nimport NoteContext from 'components/Note/Context';\r\nimport selectors from 'selectors';\r\nimport CommentTextarea from './CommentTextarea/CommentTextarea';\r\nimport mentionsManager from 'helpers/MentionsManager';\r\n\r\nconst propTypes = {\r\n  // same the value attribute of a HTML textarea element\r\n  value: PropTypes.string,\r\n  // same the placeholder attribute of a HTML textarea element\r\n  placeholder: PropTypes.string,\r\n  // same the onChange attribute of a HTML textarea element\r\n  onChange: PropTypes.func.isRequired,\r\n  // same the onBlur attribute of a HTML textarea element\r\n  onBlur: PropTypes.func,\r\n  // same the onBlur attribute of a HTML textarea element\r\n  onFocus: PropTypes.func,\r\n  // a function that will be invoked when Ctrl + Enter or Cmd + Enter or only Enter are pressed\r\n  onSubmit: PropTypes.func,\r\n};\r\n\r\nconst NoteTextarea = React.forwardRef((props, forwardedRef) => {\r\n  const [\r\n    userData,\r\n    canSubmitByEnter,\r\n    autoFocusNoteOnAnnotationSelection,\r\n    isNoteEditing,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getUserData(state),\r\n      selectors.isNoteSubmissionWithEnterEnabled(state),\r\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\r\n      selectors.getIsNoteEditing(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n\r\n  const { resize, isContentEditable, isSelected, } = useContext(NoteContext);\r\n  const textareaRef = useRef();\r\n  const prevHeightRef = useRef();\r\n\r\n  useLayoutEffect(() => {\r\n    // when the height of the textarea changes, we also want to call resize\r\n    // to clear the cell measurer cache and update the note height in the virtualized list\r\n    const boxDOMElement = textareaRef.current?.editor?.container.firstElementChild;\r\n    const boundingBox = boxDOMElement?.getBoundingClientRect() || {};\r\n    if (prevHeightRef.current && prevHeightRef.current !== boundingBox.height) {\r\n      resize();\r\n    }\r\n    prevHeightRef.current = boundingBox.height;\r\n    // we need value to be in the dependency array because the height will only change when value changes\r\n    // eslint-disable-next-line\r\n  }, [props.value, resize]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isNoteEditing &&\r\n      isSelected &&\r\n      isContentEditable &&\r\n      autoFocusNoteOnAnnotationSelection &&\r\n      textareaRef &&\r\n      textareaRef.current\r\n    ) {\r\n      textareaRef.current.focus();\r\n    }\r\n  });\r\n\r\n  const handleKeyDown = (e) => {\r\n    const enterKey = 13;\r\n    const enterKeyPressed = e.which === enterKey;\r\n    if (enterKeyPressed) {\r\n      const isSubmittingByEnter = canSubmitByEnter;\r\n      const isSubmittingByCtrlEnter = (e.metaKey || e.ctrlKey);\r\n\r\n      if (isSubmittingByEnter || isSubmittingByCtrlEnter) {\r\n        props.onSubmit(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChange = (content, delta, source, editor) => {\r\n    if (textareaRef.current) {\r\n      /* For the React Quill editor, the text won't ever be empty, at least a '\\n'\r\n       * will be there, so it is necessary to trim the value to check if it is empty\r\n       */\r\n      const isEmpty = editor && editor.getText().trim() === '' && content === '<p><br></p>';\r\n      let value = '';\r\n\r\n      if (!isEmpty) {\r\n        value = content.target ? content.target.value : content;\r\n      }\r\n      props.onChange(value);\r\n\r\n      // If the delta contains a mention, then move the cursor to the end of the editor.\r\n      // This is necessary instead of using debounce when mentioning a user because\r\n      // the debounce was generating the following bug\r\n      // https://apryse.atlassian.net/browse/WVR-2380\r\n      const deltaContainsMention = mentionsManager.doesDeltaContainMention(delta.ops);\r\n\r\n      if (deltaContainsMention) {\r\n        const formattedText = mentionsManager.getFormattedTextFromDeltas(delta.ops);\r\n        const mentionData = mentionsManager.extractMentionDataFromStr(formattedText);\r\n        const editortextValue = editor.getText();\r\n        const totalTextLength = editortextValue.length + mentionData.plainTextValue.length;\r\n        const textareaEditor = textareaRef.current?.editor;\r\n        setTimeout(() => textareaEditor?.setSelection(totalTextLength, totalTextLength), 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const textareaProps = {\r\n    ...props,\r\n    ref: (el) => {\r\n      textareaRef.current = el;\r\n      forwardedRef(el);\r\n    },\r\n    onChange: throttle(handleChange, 100),\r\n    onKeyDown: handleKeyDown,\r\n    userData,\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CommentTextarea {...textareaProps}/>\r\n    </>\r\n  );\r\n});\r\n\r\nNoteTextarea.displayName = 'NoteTextarea';\r\nNoteTextarea.propTypes = propTypes;\r\n\r\nexport default NoteTextarea;\r\n","import NoteTextarea from './NoteTextarea';\r\n\r\nexport default NoteTextarea;","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteState.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport useOnClickOutside from 'hooks/useOnClickOutside';\r\nimport DataElementWrapper from 'components/DataElementWrapper';\r\nimport PopupPortal from 'components/PopupPortal';\r\nimport Icon from 'components/Icon';\r\nimport getOverlayPositionBasedOn from 'helpers/getOverlayPositionBasedOn';\r\nimport PropTypes from 'prop-types';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nimport './NoteState.scss';\r\n\r\nconst propTypes = {\r\n  style: PropTypes.object,\r\n  triggerElementName: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func,\r\n  handleStateChange: PropTypes.func,\r\n};\r\n\r\nconst NoteStatePopup = ({\r\n  style,\r\n  triggerElementName,\r\n  onClose = () => {},\r\n  handleStateChange = () => {},\r\n}) => {\r\n  const [t] = useTranslation();\r\n  const [position, setPosition] = useState({ left: 'auto', right: 'auto', top: 'auto' });\r\n  const popupRef = useRef();\r\n\r\n  useOnClickOutside(popupRef, (e) => {\r\n    const triggerElement = getRootNode().querySelector(`[data-id=\"${triggerElementName}\"]`);\r\n    const clickedTrigger = triggerElement.contains(e.target);\r\n    if (!clickedTrigger) {\r\n      // we only want to close the popup if we clicked outside and not on the trigger\r\n      onClose();\r\n    }\r\n  });\r\n\r\n  const createOnStateOptionButtonClickHandler = (state) => {\r\n    return () => {\r\n      handleStateChange(state);\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const position = getOverlayPositionBasedOn(triggerElementName, popupRef, false, 'data-id');\r\n    setPosition(position);\r\n  }, []);\r\n\r\n  return (\r\n    <PopupPortal\r\n      id=\"note-state-popup-portal\"\r\n      position={position}\r\n    >\r\n      <div\r\n        style={style}\r\n        className=\"note-state-options\"\r\n        ref={popupRef}\r\n      >\r\n        <DataElementWrapper dataElement=\"notePopupState\">\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateAccepted\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('Accepted')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-accepted\" />\r\n            {t('option.state.accepted')}\r\n          </DataElementWrapper>\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateRejected\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('Rejected')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-rejected\" />\r\n            {t('option.state.rejected')}\r\n          </DataElementWrapper>\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateCancelled\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('Cancelled')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-cancelled\" />\r\n            {t('option.state.cancelled')}\r\n          </DataElementWrapper>\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateCompleted\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('Completed')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-completed\" />\r\n            {t('option.state.completed')}\r\n          </DataElementWrapper>\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateNone\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('None')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-none\" />\r\n            {t('option.state.none')}\r\n          </DataElementWrapper>\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateMarked\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('Marked')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-marked\" />\r\n            {t('option.state.marked')}\r\n          </DataElementWrapper>\r\n          <DataElementWrapper\r\n            dataElement=\"notePopupStateUnmarked\"\r\n            className=\"note-state-option\"\r\n            onClick={createOnStateOptionButtonClickHandler('Unmarked')}\r\n          >\r\n            <Icon glyph=\"icon-annotation-status-unmarked\" />\r\n            {t('option.state.unmarked')}\r\n          </DataElementWrapper>\r\n        </DataElementWrapper>\r\n      </div>\r\n    </PopupPortal>\r\n  );\r\n};\r\n\r\nNoteStatePopup.propTypes = propTypes;\r\n\r\nexport default NoteStatePopup;","import i18next from 'i18next';\r\nimport core from 'core';\r\n\r\nfunction createStateAnnotation(annotation, state, documentViewerKey = 1) {\r\n  // TODO: the code below is copied from annotManager.updateAnnotationState in WebViewer to work around the issue\r\n  // in https://github.com/PDFTron/webviewer-ui/issues/620\r\n  // the implement before wasn't causing any actual issues, but it was confusing and unnecessary to trigger two annotationChanged events when a status is set\r\n  // A proper fix should be done once https://trello.com/c/zWlkygNb/1023-consider-adding-a-setlocalizationhandler-to-corecontrols is implemented\r\n  // at that time, we could use the translation handler(t) internally in updateAnnotationState before setting the contents, and use that function instead in this component\r\n\r\n  const stateAnnotation = new window.Core.Annotations.StickyAnnotation();\r\n\r\n  stateAnnotation['InReplyTo'] = annotation['Id'];\r\n  stateAnnotation['X'] = annotation['X'];\r\n  stateAnnotation['Y'] = annotation['Y'];\r\n  stateAnnotation['PageNumber'] = annotation['PageNumber'];\r\n  stateAnnotation['Subject'] = 'Sticky Note';\r\n  stateAnnotation['Author'] = core.getCurrentUser();\r\n  stateAnnotation['State'] = state;\r\n  stateAnnotation['StateModel'] = state === 'Marked' || state === 'Unmarked' ? 'Marked' : 'Review';\r\n  stateAnnotation['Hidden'] = true;\r\n\r\n  const displayAuthor = core.getDisplayAuthor(stateAnnotation['Author'], documentViewerKey);\r\n  const stateMessage = i18next.t(`option.state.${state.toLowerCase()}`);\r\n  const contents = `${stateMessage} ${i18next.t('option.state.setBy')} ${displayAuthor}`;\r\n  stateAnnotation.setContents(contents);\r\n\r\n  return stateAnnotation;\r\n}\r\n\r\nexport {\r\n  createStateAnnotation,\r\n};\r\n","import { useRef, useEffect } from 'react';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\n/**\r\n * Creates DOM element to be used as React root.\r\n * @ignore\r\n * @returns {HTMLElement}\r\n */\r\nfunction createRootElement(id) {\r\n  const rootContainer = document.createElement('div');\r\n  rootContainer.setAttribute('id', id);\r\n  return rootContainer;\r\n}\r\n\r\n/**\r\n * Appends element as last child of body.\r\n * @ignore\r\n * @param {HTMLElement} rootElem\r\n */\r\nfunction addRootElement(rootElem) {\r\n  const node = (window.isApryseWebViewerWebComponent) ? getRootNode() : document.body;\r\n  node.insertBefore(\r\n    rootElem,\r\n    node.lastElementChild.nextElementSibling,\r\n  );\r\n}\r\n\r\n/**\r\n * Hook to create a React Portal.\r\n * Automatically handles creating and tearing-down the root elements (no SRR\r\n * makes this trivial), so there is no need to ensure the parent target already\r\n * exists.\r\n * @ignore\r\n * @example\r\n * const target = usePortal(id, [id]);\r\n * return createPortal(children, target);\r\n * @param {String} id The id of the target container, e.g 'modal' or 'spotlight'\r\n * @returns {HTMLElement} The DOM node to use as the Portal target.\r\n */\r\nfunction usePortal(id) {\r\n  const rootElemRef = useRef(null);\r\n  useEffect(function setupElement() {\r\n    // Look for existing target dom element to append to\r\n\r\n    const existingParent = document.querySelector(`#${id}`);\r\n    // Parent is either a new root or the existing dom element\r\n    const parentElem = existingParent || createRootElement(id);\r\n\r\n    // If there is no existing DOM element, add a new one.\r\n    if (!existingParent) {\r\n      addRootElement(parentElem);\r\n    }\r\n\r\n    // Add the detached element to the parent\r\n    parentElem.appendChild(rootElemRef.current);\r\n\r\n    return function removeElement() {\r\n      rootElemRef.current.remove();\r\n      if (!parentElem.childElementCount) {\r\n        parentElem.remove();\r\n      }\r\n    };\r\n  }, [id]);\r\n\r\n  /**\r\n   * It's important we evaluate this lazily:\r\n   * - We need first render to contain the DOM element, so it shouldn't happen\r\n   *   in useEffect. We would normally put this in the constructor().\r\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\r\n   *   since this will run every single render (that's a lot).\r\n   * - We want the ref to consistently point to the same DOM element and only\r\n   *   ever run once.\r\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\r\n   */\r\n  function getRootElem() {\r\n    if (!rootElemRef.current) {\r\n      rootElemRef.current = document.createElement('div');\r\n    }\r\n    return rootElemRef.current;\r\n  }\r\n\r\n  return getRootElem();\r\n}\r\n\r\nexport default usePortal;","import { createPortal } from 'react-dom';\r\nimport usePortal from 'hooks/usePortal';\r\n\r\nconst Portal = ({ id, position, children }) => {\r\n  const target = usePortal(id);\r\n  target.style.position = 'absolute';\r\n  target.style.top = position.top === 'auto' ? position.top : `${position.top}px`;\r\n  target.style.left = position.left === 'auto' ? position.left : `${position.left}px`;\r\n  target.style.right = position.right === 'auto' ? position.right : `${position.right}px`;\r\n  target.style.pointerEvents = 'none';\r\n  target.style.zIndex = 999;\r\n\r\n  return createPortal(\r\n    children,\r\n    target,\r\n  );\r\n};\r\n\r\nexport default Portal;","import PopupPortal from './PopupPortal';\r\n\r\nexport default PopupPortal;","import core from 'core';\r\n\r\n/**\r\n * We can just pass object down as a prop, but many properties of that object won't be used by the child component,\r\n * so here we select properties that will be used.\r\n * @ignore\r\n * @param annotation is an annotation created by a tool\r\n * @return current style of that object.\r\n */\r\nexport default (annotation) => {\r\n  const styleProperty = [\r\n    'FillColor',\r\n    'StrokeColor',\r\n    'TextColor',\r\n    'Opacity',\r\n    'StrokeThickness',\r\n    'FontSize',\r\n    'Precision',\r\n    'Scale',\r\n    'Style',\r\n  ];\r\n  const style = {};\r\n\r\n  styleProperty.forEach((property) => {\r\n    const value = annotation[property];\r\n\r\n    if (value !== null && value !== undefined) {\r\n      style[property] = annotation[property];\r\n    }\r\n  });\r\n\r\n  // Special case for the highlight annotation. It only have opacity when blend mode is working\r\n  if (annotation.elementName === 'highlight' && !core.isBlendModeSupported(annotation['BlendMode'])) {\r\n    style.Opacity = null;\r\n  }\r\n\r\n  // widget don't support opacity\r\n  if (annotation.isFormFieldPlaceholder()) {\r\n    style.Opacity = null;\r\n  }\r\n\r\n  return style;\r\n};\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}.AnnotationStylePopup .back-to-menu-container{margin-top:var(--padding-medium);margin-right:var(--padding-medium);margin-left:var(--padding-medium);padding-bottom:var(--padding-small);border-bottom:1px solid var(--border)}.AnnotationStylePopup .Button.back-to-menu-button{margin:0;width:100%;height:32px;border-radius:0;justify-content:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js!./quill.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ql-container{box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-container.ql-disabled .ql-editor ul[data-checked]>li:before{pointer-events:none}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-clipboard p{margin:0;padding:0}.ql-container .ql-editor{box-sizing:border-box;line-height:1.42;height:100%;outline:none;overflow-y:auto;padding:12px 15px;-o-tab-size:4;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.ql-editor>*{cursor:text}.ql-editor blockquote,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6,.ql-editor ol,.ql-editor p,.ql-editor pre,.ql-editor ul{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor p{margin:0;padding:0}.ql-editor ol,.ql-editor ul{padding-left:1.5em}.ql-editor ol>li,.ql-editor ul>li{list-style-type:none}.ql-editor ul>li:before{content:\\\"\\\\2022\\\"}.ql-editor ul[data-checked=false],.ql-editor ul[data-checked=true]{pointer-events:none}.ql-editor ul[data-checked=false]>li *,.ql-editor ul[data-checked=true]>li *{pointer-events:all}.ql-editor ul[data-checked=false]>li:before,.ql-editor ul[data-checked=true]>li:before{color:#777;cursor:pointer;pointer-events:all}.ql-editor ul[data-checked=true]>li:before{content:\\\"\\\\2611\\\"}.ql-editor ul[data-checked=false]>li:before{content:\\\"\\\\2610\\\"}.ql-editor li:before{display:inline-block;white-space:nowrap;width:1.2em}.ql-editor li:not(.ql-direction-rtl):before{margin-left:-1.5em;margin-right:.3em;text-align:right}.ql-editor li.ql-direction-rtl:before{margin-left:.3em;margin-right:-1.5em}.ql-editor ol li:not(.ql-direction-rtl),.ql-editor ul li:not(.ql-direction-rtl){padding-left:1.5em}.ql-editor ol li.ql-direction-rtl,.ql-editor ul li.ql-direction-rtl{padding-right:1.5em}.ql-editor ol li{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;counter-increment:list-0}.ql-editor ol li:before{content:counter(list-0,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-increment:list-1}.ql-editor ol li.ql-indent-1:before{content:counter(list-1,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-2{counter-increment:list-2}.ql-editor ol li.ql-indent-2:before{content:counter(list-2,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-3{counter-increment:list-3}.ql-editor ol li.ql-indent-3:before{content:counter(list-3,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-4{counter-increment:list-4}.ql-editor ol li.ql-indent-4:before{content:counter(list-4,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-5{counter-increment:list-5}.ql-editor ol li.ql-indent-5:before{content:counter(list-5,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-6{counter-increment:list-6}.ql-editor ol li.ql-indent-6:before{content:counter(list-6,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-6{counter-reset:list-7 list-8 list-9}.ql-editor ol li.ql-indent-7{counter-increment:list-7}.ql-editor ol li.ql-indent-7:before{content:counter(list-7,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-7{counter-reset:list-8 list-9}.ql-editor ol li.ql-indent-8{counter-increment:list-8}.ql-editor ol li.ql-indent-8:before{content:counter(list-8,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-8{counter-reset:list-9}.ql-editor ol li.ql-indent-9{counter-increment:list-9}.ql-editor ol li.ql-indent-9:before{content:counter(list-9,decimal) \\\". \\\"}.ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}.ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}.ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}.ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}.ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}.ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}.ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}.ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}.ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}.ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}.ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}.ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}.ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}.ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}.ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}.ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}.ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}.ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}.ql-editor .ql-video{display:block;max-width:100%}.ql-editor .ql-video.ql-align-center{margin:0 auto}.ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}.ql-editor .ql-bg-black{background-color:#000}.ql-editor .ql-bg-red{background-color:#e60000}.ql-editor .ql-bg-orange{background-color:#f90}.ql-editor .ql-bg-yellow{background-color:#ff0}.ql-editor .ql-bg-green{background-color:#008a00}.ql-editor .ql-bg-blue{background-color:#06c}.ql-editor .ql-bg-purple{background-color:#93f}.ql-editor .ql-color-white{color:#fff}.ql-editor .ql-color-red{color:#e60000}.ql-editor .ql-color-orange{color:#f90}.ql-editor .ql-color-yellow{color:#ff0}.ql-editor .ql-color-green{color:#008a00}.ql-editor .ql-color-blue{color:#06c}.ql-editor .ql-color-purple{color:#93f}.ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}.ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}.ql-editor .ql-size-small{font-size:.75em}.ql-editor .ql-size-large{font-size:1.5em}.ql-editor .ql-size-huge{font-size:2.5em}.ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}.ql-editor .ql-align-center{text-align:center}.ql-editor .ql-align-justify{text-align:justify}.ql-editor .ql-align-right{text-align:right}.ql-editor.ql-blank:before{color:rgba(0,0,0,.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}.ql-snow.ql-toolbar:after,.ql-snow .ql-toolbar:after{clear:both;content:\\\"\\\";display:table}.ql-snow.ql-toolbar button,.ql-snow .ql-toolbar button{background:none;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}.ql-snow.ql-toolbar button svg,.ql-snow .ql-toolbar button svg{float:left;height:100%}.ql-snow.ql-toolbar button:active:hover,.ql-snow .ql-toolbar button:active:hover{outline:none}.ql-snow.ql-toolbar input.ql-image[type=file],.ql-snow .ql-toolbar input.ql-image[type=file]{display:none}.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item.ql-selected,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar button.ql-active,.ql-snow .ql-toolbar button.ql-active,.ql-snow.ql-toolbar button:focus,.ql-snow .ql-toolbar button:focus,.ql-snow.ql-toolbar button:hover,.ql-snow .ql-toolbar button:hover{color:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:focus .ql-fill,.ql-snow .ql-toolbar button:focus .ql-fill,.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill{fill:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar button:focus .ql-stroke,.ql-snow .ql-toolbar button:focus .ql-stroke,.ql-snow.ql-toolbar button:focus .ql-stroke-miter,.ql-snow .ql-toolbar button:focus .ql-stroke-miter,.ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke-miter{stroke:#06c}@media(pointer:coarse){.ql-snow.ql-toolbar button:hover:not(.ql-active),.ql-snow .ql-toolbar button:hover:not(.ql-active){color:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#444}}.ql-snow,.ql-snow *{box-sizing:border-box}.ql-snow .ql-hidden{display:none}.ql-snow .ql-out-bottom,.ql-snow .ql-out-top{visibility:hidden}.ql-snow .ql-tooltip{position:absolute;transform:translateY(10px)}.ql-snow .ql-tooltip a{cursor:pointer;text-decoration:none}.ql-snow .ql-tooltip.ql-flip{transform:translateY(-10px)}.ql-snow .ql-formats{display:inline-block;vertical-align:middle}.ql-snow .ql-formats:after{clear:both;content:\\\"\\\";display:table}.ql-snow .ql-stroke{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ql-snow .ql-stroke-miter{fill:none;stroke:#444;stroke-miterlimit:10;stroke-width:2}.ql-snow .ql-fill,.ql-snow .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-empty{fill:none}.ql-snow .ql-even{fill-rule:evenodd}.ql-snow .ql-stroke.ql-thin,.ql-snow .ql-thin{stroke-width:1}.ql-snow .ql-transparent{opacity:.4}.ql-snow .ql-direction svg:last-child{display:none}.ql-snow .ql-direction.ql-active svg:last-child{display:inline}.ql-snow .ql-direction.ql-active svg:first-child{display:none}.ql-snow .ql-editor h1{font-size:2em}.ql-snow .ql-editor h2{font-size:1.5em}.ql-snow .ql-editor h3{font-size:1.17em}.ql-snow .ql-editor h4{font-size:1em}.ql-snow .ql-editor h5{font-size:.83em}.ql-snow .ql-editor h6{font-size:.67em}.ql-snow .ql-editor a{text-decoration:underline}.ql-snow .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}.ql-snow .ql-editor code,.ql-snow .ql-editor pre{background-color:#f0f0f0;border-radius:3px}.ql-snow .ql-editor pre{white-space:pre-wrap;margin-bottom:5px;margin-top:5px;padding:5px 10px}.ql-snow .ql-editor code{font-size:85%;padding:2px 4px}.ql-snow .ql-editor pre.ql-syntax{background-color:#23241f;color:#f8f8f2;overflow:visible}.ql-snow .ql-editor img{max-width:100%}.ql-snow .ql-picker{color:#444;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}.ql-snow .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}.ql-snow .ql-picker-label:before{display:inline-block;line-height:22px}.ql-snow .ql-picker-options{background-color:#fff;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}.ql-snow .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}.ql-snow .ql-picker.ql-expanded .ql-picker-label{color:#ccc;z-index:2}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}.ql-snow .ql-color-picker,.ql-snow .ql-icon-picker{width:28px}.ql-snow .ql-color-picker .ql-picker-label,.ql-snow .ql-icon-picker .ql-picker-label{padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-label svg,.ql-snow .ql-icon-picker .ql-picker-label svg{right:4px}.ql-snow .ql-icon-picker .ql-picker-options{padding:4px 0}.ql-snow .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}.ql-snow .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before{content:attr(data-label)}.ql-snow .ql-picker.ql-header{width:98px}.ql-snow .ql-picker.ql-header .ql-picker-item:before,.ql-snow .ql-picker.ql-header .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"1\\\"]:before{content:\\\"Heading 1\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"2\\\"]:before{content:\\\"Heading 2\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"3\\\"]:before{content:\\\"Heading 3\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"4\\\"]:before{content:\\\"Heading 4\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"5\\\"]:before{content:\\\"Heading 5\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"6\\\"]:before{content:\\\"Heading 6\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before{font-size:2em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before{font-size:1.5em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before{font-size:1.17em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before{font-size:1em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before{font-size:.83em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before{font-size:.67em}.ql-snow .ql-picker.ql-font{width:108px}.ql-snow .ql-picker.ql-font .ql-picker-item:before,.ql-snow .ql-picker.ql-font .ql-picker-label:before{content:\\\"Sans Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]:before{content:\\\"Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before{content:\\\"Monospace\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before{font-family:Georgia,Times New Roman,serif}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{font-family:Monaco,Courier New,monospace}.ql-snow .ql-picker.ql-size{width:98px}.ql-snow .ql-picker.ql-size .ql-picker-item:before,.ql-snow .ql-picker.ql-size .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]:before{content:\\\"Small\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]:before{content:\\\"Large\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]:before{content:\\\"Huge\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before{font-size:10px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before{font-size:18px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before{font-size:32px}.ql-snow .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}.ql-snow .ql-color-picker.ql-color .ql-picker-item{background-color:#000}.ql-toolbar.ql-snow{border:1px solid #ccc;box-sizing:border-box;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:8px}.ql-toolbar.ql-snow .ql-formats{margin-right:15px}.ql-toolbar.ql-snow .ql-picker-label{border:1px solid transparent}.ql-toolbar.ql-snow .ql-picker-options{border:1px solid transparent;box-shadow:0 2px 8px rgba(0,0,0,.2)}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label,.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options{border-color:#ccc}.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover{border-color:#000}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:0}.ql-snow .ql-tooltip{background-color:#fff;border:1px solid #ccc;box-shadow:0 0 5px #ddd;color:#444;padding:5px 12px;white-space:nowrap}.ql-snow .ql-tooltip:before{content:\\\"Visit URL:\\\";line-height:26px;margin-right:8px}.ql-snow .ql-tooltip input[type=text]{display:none;border:1px solid #ccc;font-size:13px;height:26px;margin:0;padding:3px 5px;width:170px}.ql-snow .ql-tooltip a.ql-preview{display:inline-block;max-width:200px;overflow-x:hidden;text-overflow:ellipsis;vertical-align:top}.ql-snow .ql-tooltip a.ql-action:after{border-right:1px solid #ccc;content:\\\"Edit\\\";margin-left:16px;padding-right:8px}.ql-snow .ql-tooltip a.ql-remove:before{content:\\\"Remove\\\";margin-left:8px}.ql-snow .ql-tooltip a{line-height:26px}.ql-snow .ql-tooltip.ql-editing a.ql-preview,.ql-snow .ql-tooltip.ql-editing a.ql-remove{display:none}.ql-snow .ql-tooltip.ql-editing input[type=text]{display:inline-block}.ql-snow .ql-tooltip.ql-editing a.ql-action:after{border-right:0;content:\\\"Save\\\";padding-right:0}.ql-snow .ql-tooltip[data-mode=link]:before{content:\\\"Enter link:\\\"}.ql-snow .ql-tooltip[data-mode=formula]:before{content:\\\"Enter formula:\\\"}.ql-snow .ql-tooltip[data-mode=video]:before{content:\\\"Enter video:\\\"}.ql-snow a{color:#06c}.ql-container.ql-snow{border:1px solid #ccc}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./CommentTextarea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.comment-textarea{position:relative}.comment-textarea .ql-toolbar{display:none}.comment-textarea .ql-container{border:none}.comment-textarea .ql-container .ql-editor{width:100%;padding:4px 6px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);resize:none;overflow:hidden;box-sizing:border-box}.comment-textarea .ql-container .ql-editor:focus{outline:none;border:1px solid var(--focus-border)}.comment-textarea .ql-container .ql-editor.ql-blank:before{left:8px;list-style-type:none;font-style:normal;color:var(--placeholder-text)}.comment-textarea .ql-container .ql-editor p{margin:0;word-break:break-word}.comment-textarea .ql-container .ql-editor ul>li:before{content:none!important}.comment-textarea .ql-container.ql-snow{border:none}.comment-textarea .add-attachment{position:absolute;bottom:2px;right:2px;width:24px;height:24px}.comment-textarea .add-attachment:hover{background-color:var(--blue-1)}.comment-textarea .add-attachment .Icon{padding:3px}.ql-editor ul>li:before{content:none!important}.mention__element{width:170px;z-index:9001!important;max-height:200px;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;background-color:var(--component-background);border:1px solid var(--border);border-radius:4px}.mention__suggestions__list{width:100%;font-size:14px;margin-top:0;padding-left:0!important;list-style:none;word-wrap:break-word;border-radius:4px}.mention__suggestions__item{background-color:var(--component-background);white-space:nowrap;padding-left:0;text-overflow:clip;padding:7px 5px 1px!important;margin:0;width:100%;cursor:pointer}.mention__suggestions__item .email{margin-top:2px;font-size:12px;white-space:normal;color:var(--faded-text)}.mention__suggestions__item.selected{background-color:var(--view-header-button-active)!important}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NotePopup{flex-grow:0;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}.NotePopup,.NotePopup .overflow{display:flex;width:28px;height:28px}.NotePopup .overflow{border-radius:4px;justify-content:center;align-items:center}.NotePopup .overflow .Icon{width:24px;height:24px}.NotePopup .overflow:hover{background:var(--blue-1)}.NotePopup .overflow.active{background:var(--popup-button-active)}.NotePopup .options{display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;position:absolute;border-radius:4px;background:var(--component-background);top:40px;width:-webkit-max-content;width:-moz-max-content;width:max-content}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NotePopup .options{right:0}}.NotePopup .options .note-popup-option{padding:0;border:none;background-color:transparent;align-items:flex-start}:host(:not([data-tabbing=true])) .NotePopup .options .note-popup-option,html:not([data-tabbing=true]) .NotePopup .options .note-popup-option{outline:none}.NotePopup .options.options-reply{top:30px}.NotePopup .options .option{display:flex;flex-direction:column;justify-content:center;height:28px;padding-left:8px;padding-right:17px;border-radius:0}.NotePopup .options .option:hover{background-color:var(--popup-button-hover)}.NotePopup .options .option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.NotePopup .options .option:last-child{border-bottom-right-radius:4px}.NotePopup .Button.active{background:var(--popup-button-active)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.multi-state-container{position:relative;bottom:52px;pointer-events:auto}.NoteState{border:none;background-color:transparent;flex-grow:0;display:flex;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 10px 0 15px}:host(:not([data-tabbing=true])) .NoteState,html:not([data-tabbing=true]) .NoteState{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteState{padding-left:0;padding-right:5px}}.NoteState .overflow{width:28px;height:28px;border-radius:4px}.NoteState .overflow .Icon{margin:4px;width:20px;height:20px}.NoteState .overflow:hover{background:var(--blue-1)}.NoteState .Button.active,.NoteState .overflow.active{background:var(--popup-button-active)}.note-state-options{padding:0;border:none;background-color:transparent;font-size:inherit;display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;border-radius:4px;background:var(--component-background);pointer-events:auto}:host(:not([data-tabbing=true])) .note-state-options,html:not([data-tabbing=true]) .note-state-options{outline:none}.note-state-options *{box-sizing:border-box}.note-state-options .note-state-option{display:flex;flex-direction:row;justify-content:flex-start;height:35px;padding:8px;border-radius:0}.note-state-options .note-state-option .Icon{margin-right:5px;width:18px;height:18px}.note-state-options .note-state-option:hover{background-color:var(--popup-button-hover)}.note-state-options .note-state-option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.note-state-options .note-state-option:last-child{border-bottom-right-radius:4px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteHeader{padding-right:12px;position:relative;flex:1;color:var(--text-color);display:flex}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteHeader{flex:none}}.NoteHeader .author-and-overflow{display:flex;justify-content:space-between}.NoteHeader .state-and-overflow{display:flex;flex:1;justify-content:flex-end}.NoteHeader .author-and-time{display:flex;flex-direction:column;word-break:break-word}.NoteHeader .author{font-weight:700}.NoteHeader .date-and-num-replies{display:flex}.NoteHeader .date-and-num-replies .num-replies-container{display:flex;flex-grow:1;padding-left:10px}.NoteHeader .date-and-num-replies .num-replies-container .num-reply-icon{height:12px;width:12px}.NoteHeader .date-and-num-replies .num-replies-container .num-replies{opacity:.8;font-size:10px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}.NoteHeader .author-and-date{flex:1;min-width:0;position:relative}.NoteHeader .unread-notification{position:absolute;width:13px;height:13px;right:-2px;top:-2px;border-radius:10000px;border:2px solid var(--component-background);background:#00a5e4}.NoteHeader .type-icon-container{padding-right:13px}.NoteHeader .type-icon{margin:2px;width:24px;height:24px}.NoteHeader .date-and-time{opacity:.8;font-size:10px;color:var(--faded-text)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .date-and-time{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .date-and-time{font-size:12px}}.NoteHeader .author-name{font-weight:700}.NoteHeader .isReply{padding-left:0;padding-top:0;font-size:10px}.parent{padding-left:12px;padding-top:12px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAttachmentList.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".reply-attachment-list{display:flex;flex-direction:column;cursor:default}.reply-attachment-list .reply-attachment{display:flex;flex-direction:column;background-color:var(--gray-1);border-radius:4px;cursor:pointer;overflow:hidden}.reply-attachment-list .reply-attachment:not(:last-child){margin-bottom:8px}.reply-attachment-list .reply-attachment .reply-attachment-preview{width:100%;max-height:80px;display:flex;justify-content:center}.reply-attachment-list .reply-attachment .reply-attachment-preview.dirty{position:relative;margin-bottom:15px}.reply-attachment-list .reply-attachment .reply-attachment-preview img{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.reply-attachment-list .reply-attachment .reply-attachment-preview .reply-attachment-preview-message{font-size:11px;color:var(--error-text-color);position:absolute;bottom:-15px;left:10px}.reply-attachment-list .reply-attachment .reply-attachment-info{display:flex;align-items:center;height:40px;padding:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-attachment-icon{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-file-name{height:16px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:8px;margin-right:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button:hover{background-color:var(--blue-1)}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button .Icon{height:16px;width:16px}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteContent.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteContent{position:relative;display:flex;flex-direction:column;align-items:left;flex:1;color:var(--text-color);padding-bottom:12px}.NoteContent.isReply{padding-bottom:0}.NoteContent.unread.isReply{background:rgba(0,165,228,.08)}.NoteContent.unread.clicked .author-and-time span{font-weight:400}.NoteContent.unread .author-and-time span{font-weight:700}.NoteContent .container{padding-left:52px;padding-right:12px}.NoteContent .container,.NoteContent .container-reply{margin-top:8px;overflow:hidden;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:text}.NoteContent .edit-content{margin-top:7px;display:flex;flex-direction:column;position:relative;flex:1;padding-left:52px;padding-right:12px;padding-bottom:12px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteContent .edit-content{flex:none}}.NoteContent .edit-content textarea{width:100%;padding-left:8px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding-top:4px;padding-bottom:4px;resize:none;overflow:hidden;box-sizing:border-box}.NoteContent .edit-content textarea:focus{outline:none;border:1px solid var(--focus-border)}.NoteContent .edit-content textarea::-moz-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea:-ms-input-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea::placeholder{color:var(--placeholder-text)}.NoteContent .edit-content .edit-buttons{display:flex;flex-direction:row;justify-content:flex-end;margin-top:4px}.NoteContent .edit-content .edit-buttons>div{margin-right:4px}.NoteContent .edit-content .edit-buttons .save-button{border:none;background-color:transparent;cursor:pointer;flex-shrink:0;background:var(--primary-button);border-radius:4px;height:24px;display:flex;align-items:center;justify-content:center;position:relative;color:var(--primary-button-text);padding:0 13px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .save-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .save-button{outline:none}.NoteContent .edit-content .edit-buttons .save-button:hover{background:var(--primary-button-hover);color:var(--primary-button-text)}.NoteContent .edit-content .edit-buttons .save-button.disabled{background:var(--gray-6);border-color:var(--gray-6);cursor:not-allowed}.NoteContent .edit-content .edit-buttons .cancel-button{border:none;background-color:transparent;color:var(--secondary-button-text);padding:0 10px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:2px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .cancel-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .cancel-button{outline:none}.NoteContent .edit-content .edit-buttons .cancel-button:hover{color:var(--secondary-button-hover)}.NoteContent .reply-content{padding-left:0}.NoteContent .contents{white-space:pre-wrap;color:var(--text-color);margin-right:5px;padding:0;word-break:normal;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.NoteContent .contents .highlight{background:#fffc95;color:#333}.NoteContent .highlight{background:#fffc95}.NoteContent .selected-text-preview{padding-left:52px;padding-top:8px}.NoteContent .reply-attachment-list{margin-bottom:8px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyArea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.reply-area-container{border-top:1px solid var(--divider);display:flex;flex-direction:column}.reply-area-container .reply-attachment-list{margin:12px 12px 0}.reply-area-container .reply-area-with-button{display:flex}.reply-area-container .reply-area-with-button .reply-area{position:relative;flex:1;margin:12px 17px 12px 12px;border-radius:4px;align-items:center}.reply-area-container .reply-area-with-button .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-container .reply-area-with-button .reply-button-container{display:flex;flex-direction:column;justify-content:flex-end}.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-container .reply-area-with-button .reply-button-container .reply-button,html:not([data-tabbing=true]) .reply-area-container .reply-area-with-button .reply-button-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:80px}}.reply-area-container .reply-area-with-button .reply-button-container .reply-button:hover{background:var(--blue-1)}.reply-area-container .reply-area-with-button .reply-button-container .reply-button.disabled{cursor:not-allowed}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationNoteConnectorLine.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media print{#line-connector-root{opacity:0}}#line-connector-root{position:relative;z-index:69}.horizontalLine{height:2px}.horizontalLine,.verticalLine{background-color:rgba(30,120,235,.5);position:fixed}.verticalLine{width:2px}.arrowHead{position:absolute;top:0;left:0;margin:auto;width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:7px solid rgba(30,120,235,.5);transform:translateX(-100%) translateY(-50%) translateY(1px)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./Note.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Note{padding:0;border:none;background-color:transparent;display:block;text-align:left;border-radius:4px;box-shadow:0 0 3px 0 var(--note-box-shadow);margin-bottom:8px;margin-left:2px;background:var(--component-background);cursor:pointer}:host(:not([data-tabbing=true])) .Note,html:not([data-tabbing=true]) .Note{outline:none}.Note.unread{border:1.2px solid #00a5e4}.Note.expanded{box-shadow:0 4px 16px var(--note-box-shadow-expanded),0 0 4px 0 var(--note-box-shadow)}.Note.is-multi-selected{box-shadow:0 4px 16px rgba(134,142,150,.24),0 0 4px 0 var(--note-box-shadow)}.Note .mark-all-read-button{background:#00a5e4;text-align:center;color:#fff;height:16px;font-size:12px;width:100%;border-radius:0}.Note .divider{height:1px;width:100%;background:var(--divider)}.Note .reply-divider{background:var(--reply-divider);height:1px;width:100%}.Note .replies{margin-left:52px;padding-bottom:12px}.Note .reply{padding-left:12px;padding-bottom:24px;border-left:1px solid var(--reply-divider)}.Note .reply:last-of-type{padding-bottom:0}.Note .group-section{margin-left:52px;padding-bottom:12px;display:flex;flex-direction:column;grid-row-gap:4px;row-gap:4px;padding-right:12px}.Note .text-button{color:var(--secondary-button-text);display:flex}.Note .text-button .Icon{color:var(--secondary-button-text);height:18px;width:18px}.Note .group-child{padding-top:4px;padding-bottom:4px}.Note .group-child:hover{background:var(--view-header-button-hover)}.Note .group-child .NoteContent{padding-bottom:0}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport selectors from 'selectors';\r\n\r\nconst ReplyAttachmentPicker = ({ annotationId, addAttachments }) => {\r\n  const replyAttachmentHandler = useSelector((state) => selectors.getReplyAttachmentHandler(state));\r\n\r\n  const onChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      let attachment = file;\r\n      if (replyAttachmentHandler) {\r\n        const url = await replyAttachmentHandler(file);\r\n        attachment = {\r\n          url,\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type\r\n        };\r\n      }\r\n      addAttachments(annotationId, [attachment]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <input\r\n      id=\"reply-attachment-picker\"\r\n      type=\"file\"\r\n      style={{ display: 'none' }}\r\n      onChange={onChange}\r\n      onClick={(e) => {\r\n        e.target.value = '';\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ReplyAttachmentPicker;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ListSeparator.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.ListSeparator{margin-top:16px;margin-bottom:8px;font-family:Lato;font-weight:500;color:var(--list-separator-color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport useOnClickOutside from 'hooks/useOnClickOutside';\r\nimport DataElementWrapper from 'components/DataElementWrapper';\r\nimport { useTranslation } from 'react-i18next';\r\nimport classNames from 'classnames';\r\nimport Icon from 'components/Icon';\r\n\r\nimport './NotePopup.scss';\r\n\r\nconst propTypes = {\r\n  handleEdit: PropTypes.func,\r\n  handleDelete: PropTypes.func,\r\n  closePopup: PropTypes.func,\r\n  openPopup: PropTypes.func,\r\n  isEditable: PropTypes.bool,\r\n  isDeletable: PropTypes.bool,\r\n  isOpen: PropTypes.bool,\r\n};\r\n\r\nfunction noop() { }\r\n\r\nfunction NotePopup(props) {\r\n  const {\r\n    handleEdit = noop,\r\n    handleDelete = noop,\r\n    closePopup = noop,\r\n    openPopup = noop,\r\n    isEditable,\r\n    isDeletable,\r\n    isOpen,\r\n    isReply,\r\n  } = props;\r\n\r\n  const [t] = useTranslation();\r\n  const popupRef = React.useRef();\r\n\r\n  useOnClickOutside(popupRef, () => {\r\n    closePopup();\r\n  });\r\n\r\n  const togglePopup = (e) => {\r\n    e.stopPropagation();\r\n    if (isOpen) {\r\n      closePopup();\r\n    } else {\r\n      openPopup();\r\n    }\r\n  };\r\n\r\n  function onEditButtonClick(e) {\r\n    e.stopPropagation();\r\n    closePopup();\r\n    handleEdit();\r\n  }\r\n\r\n  function onDeleteButtonClick() {\r\n    closePopup();\r\n    handleDelete();\r\n  }\r\n\r\n  if (!isEditable && !isDeletable) {\r\n    return null;\r\n  }\r\n\r\n  const notePopupButtonClass = classNames('overflow note-popup-toggle-trigger', { active: isOpen });\r\n  const optionsClass = classNames('options note-popup-options', { 'options-reply': isReply });\r\n  return (\r\n    <DataElementWrapper\r\n      className=\"NotePopup\"\r\n      dataElement=\"notePopup\"\r\n      ref={popupRef}\r\n    >\r\n      <div className={notePopupButtonClass} onClick={togglePopup}>\r\n        <Icon glyph=\"icon-tools-more\" />\r\n      </div>\r\n      {isOpen && (\r\n        <div className={optionsClass}>\r\n          {isEditable && (\r\n            <DataElementWrapper\r\n              type=\"button\"\r\n              className=\"option note-popup-option\"\r\n              dataElement=\"notePopupEdit\"\r\n              onClick={onEditButtonClick}\r\n            >\r\n              {t('action.edit')}\r\n            </DataElementWrapper>\r\n          )}\r\n          {isDeletable && (\r\n            <DataElementWrapper\r\n              type=\"button\"\r\n              className=\"option note-popup-option\"\r\n              dataElement=\"notePopupDelete\"\r\n              onClick={onDeleteButtonClick}\r\n            >\r\n              {t('action.delete')}\r\n            </DataElementWrapper>\r\n          )}\r\n        </div>\r\n      )}\r\n    </DataElementWrapper>\r\n  );\r\n}\r\n\r\nNotePopup.propTypes = propTypes;\r\n\r\nexport default NotePopup;\r\n","import React from 'react';\r\nimport core from 'core';\r\nimport NotePopup from './NotePopup';\r\nimport Tooltip from 'components/Tooltip';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport selectors from 'selectors';\r\n\r\nfunction NotePopupContainer(props) {\r\n  const [\r\n    activeDocumentViewerKey,\r\n  ] = useSelector((state) => [\r\n    selectors.getActiveDocumentViewerKey(state),\r\n  ]);\r\n  const { annotation, setIsEditing, noteIndex } = props;\r\n\r\n  const [canModify, setCanModify] = React.useState(core.canModify(annotation));\r\n  const [canModifyContents, setCanModifyContents] = React.useState(core.canModifyContents(annotation));\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const [t] = useTranslation();\r\n\r\n  React.useEffect(() => {\r\n    function onUpdateAnnotationPermission() {\r\n      setCanModify(core.canModify(annotation, activeDocumentViewerKey));\r\n      setCanModifyContents(core.canModifyContents(annotation, activeDocumentViewerKey));\r\n    }\r\n\r\n    onUpdateAnnotationPermission();\r\n    core.addEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, undefined, activeDocumentViewerKey);\r\n    return () => core.removeEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, activeDocumentViewerKey);\r\n  }, [annotation, activeDocumentViewerKey]);\r\n\r\n  const handleEdit = React.useCallback(() => {\r\n    const isFreeText = annotation instanceof window.Core.Annotations.FreeTextAnnotation;\r\n    if (isFreeText && core.getAnnotationManager(activeDocumentViewerKey).isFreeTextEditingEnabled()) {\r\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationDoubleClicked', annotation);\r\n    } else {\r\n      setIsEditing(true, noteIndex);\r\n    }\r\n  }, [annotation, setIsEditing, noteIndex]);\r\n\r\n  const handleDelete = React.useCallback(() => {\r\n    core.deleteAnnotations([annotation, ...annotation.getGroupedChildren()], undefined, activeDocumentViewerKey);\r\n  }, [annotation]);\r\n\r\n  const openPopup = () => setIsOpen(true);\r\n  const closePopup = () => setIsOpen(false);\r\n\r\n  const isEditable = canModifyContents;\r\n  const isDeletable = canModify && !annotation?.NoDelete;\r\n\r\n  const passProps = {\r\n    handleEdit,\r\n    handleDelete,\r\n    isEditable,\r\n    isDeletable,\r\n    isOpen,\r\n    closePopup,\r\n    openPopup,\r\n  };\r\n\r\n  // We wrap the element in a div so the tooltip works properly\r\n  return (\r\n    <Tooltip content={t('formField.formFieldPopup.options')}>\r\n      <div>\r\n        <NotePopup {...props} {...passProps} />\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default NotePopupContainer;\r\n","import NotePopupContainer from './NotePopupContainer';\r\n\r\nexport default NotePopupContainer;\r\n","import React, { useState, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport classNames from 'classnames';\r\nimport Tooltip from '../Tooltip';\r\nimport NoteStatePopup from './NoteStatePopup';\r\n\r\nimport DataElementWrapper from 'components/DataElementWrapper';\r\nimport Icon from 'components/Icon';\r\n\r\nimport './NoteState.scss';\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object.isRequired,\r\n  openOnInitialLoad: PropTypes.bool,\r\n  handleStateChange: PropTypes.func\r\n};\r\n\r\nfunction NoteState(props) {\r\n  const {\r\n    annotation,\r\n    openOnInitialLoad = false,\r\n    handleStateChange = () => {},\r\n  } = props;\r\n\r\n  const [t] = useTranslation();\r\n  const [isOpen, setIsOpen] = useState(openOnInitialLoad);\r\n  const popupRef = useRef();\r\n\r\n  const togglePopup = (e) => {\r\n    e.stopPropagation();\r\n    if (isOpen) {\r\n      setIsOpen(false);\r\n    } else {\r\n      setIsOpen(true);\r\n    }\r\n  };\r\n\r\n  const annotationState = annotation.getStatus();\r\n  const icon = `icon-annotation-status-${annotationState === '' ? 'none' : annotationState.toLowerCase()}`;\r\n  const noteStateButtonClassName = classNames('overflow', { active: isOpen });\r\n  const dataElement = 'noteState';\r\n  const id = annotation.Id;\r\n\r\n  return (\r\n    <DataElementWrapper\r\n      className=\"NoteState\"\r\n      dataElement={dataElement}\r\n      onClick={togglePopup}\r\n      ref={popupRef}\r\n      data-id={id}\r\n    >\r\n      <Tooltip content={t('option.notesOrder.status')}>\r\n        <div className={noteStateButtonClassName}>\r\n          <Icon glyph={icon} />\r\n        </div>\r\n      </Tooltip>\r\n      {isOpen && (\r\n        <NoteStatePopup\r\n          triggerElementName={id}\r\n          handleStateChange={handleStateChange}\r\n          onClose={() => {\r\n            setIsOpen(false);\r\n          }}\r\n        />\r\n      )}\r\n    </DataElementWrapper>\r\n  );\r\n}\r\n\r\nNoteState.propTypes = propTypes;\r\n\r\nexport default NoteState;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport core from 'core';\r\n\r\nimport NoteState from './NoteState';\r\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\r\nimport { useSelector } from 'react-redux';\r\nimport selectors from 'selectors';\r\n\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object,\r\n};\r\n\r\nfunction NoteStateContainer(props) {\r\n  const [\r\n    activeDocumentViewerKey,\r\n  ] = useSelector((state) => [\r\n    selectors.getActiveDocumentViewerKey(state),\r\n  ]);\r\n  const { annotation } = props;\r\n\r\n  const handleStateChange = React.useCallback(function handleStateChangeCallback(newValue) {\r\n    const stateAnnotation = createStateAnnotation(annotation, newValue, activeDocumentViewerKey);\r\n    annotation.addReply(stateAnnotation);\r\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\r\n    annotationManager.addAnnotation(stateAnnotation);\r\n    annotationManager.trigger('addReply', [stateAnnotation, annotation, annotationManager.getRootAnnotation(annotation)]);\r\n  }, [annotation, activeDocumentViewerKey]);\r\n\r\n  return (\r\n    <div>\r\n      <NoteState handleStateChange={handleStateChange} {...props} />\r\n    </div>\r\n  );\r\n}\r\n\r\nNoteStateContainer.propTypes = propTypes;\r\nexport default NoteStateContainer;\r\n","import NoteStateContainer from './NoteStateContainer';\r\n\r\nexport default NoteStateContainer;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Tooltip from 'components/Tooltip';\r\nimport Icon from 'components/Icon';\r\n\r\nconst NoteUnpostedCommentIndicator = ({ annotationId, pendingEditTextMap, pendingReplyMap, pendingAttachmentMap }) => {\r\n  const { t } = useTranslation();\r\n  const [hasUnpostedComment, setHasUnpostedComment] = useState(false);\r\n  const [hasUnpostedReply, setHasUnpostedReply] = useState(false);\r\n  const [hasUnpostedAttachment, setHasUnpostedAttachment] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setHasUnpostedComment(pendingEditTextMap[annotationId]?.length > 0);\r\n    setHasUnpostedReply(pendingReplyMap[annotationId]?.length > 0);\r\n    setHasUnpostedAttachment(pendingAttachmentMap[annotationId]?.length > 0);\r\n  }, [pendingEditTextMap, pendingReplyMap, pendingAttachmentMap]);\r\n\r\n  return (\r\n    (hasUnpostedComment || hasUnpostedReply || hasUnpostedAttachment) ?\r\n      <div data-element=\"unpostedCommentIndicator\">\r\n        <Tooltip content={t('message.unpostedComment')}>\r\n          <div>\r\n            <Icon className=\"type-icon\" glyph={'icon-unposted-comment'} />\r\n          </div>\r\n        </Tooltip>\r\n      </div> :\r\n      null\r\n  );\r\n};\r\n\r\nexport default NoteUnpostedCommentIndicator;\r\n","import NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicatorContainer';\r\n\r\nexport default NoteUnpostedCommentIndicator;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport selectors from 'selectors';\r\nimport NoteContext from 'components/Note/Context';\r\nimport NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicator';\r\n\r\nconst NoteUnpostedCommentIndicatorContainer = ({ annotationId }) => {\r\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'unpostedCommentIndicator'));\r\n  const { pendingEditTextMap, pendingReplyMap, pendingAttachmentMap } = React.useContext(NoteContext);\r\n\r\n  if (isDisabled) {\r\n    return null;\r\n  }\r\n  return (\r\n    <NoteUnpostedCommentIndicator\r\n      annotationId={annotationId}\r\n      pendingEditTextMap={pendingEditTextMap}\r\n      pendingReplyMap={pendingReplyMap}\r\n      pendingAttachmentMap={pendingAttachmentMap}\r\n    />);\r\n};\r\n\r\nexport default NoteUnpostedCommentIndicatorContainer;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport NotePopup from 'components/NotePopup';\r\nimport NoteState from 'components/NoteState';\r\nimport Icon from 'components/Icon';\r\nimport NoteUnpostedCommentIndicator from 'components/NoteUnpostedCommentIndicator';\r\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\r\nimport getColor from 'helpers/getColor';\r\nimport { isDarkColorHex } from 'helpers/color';\r\nimport dayjs from 'dayjs';\r\nimport classNames from 'classnames';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { NotesPanelSortStrategy } from 'constants/sortStrategies';\r\nimport Theme from 'constants/theme';\r\nimport Choice from 'components/Choice';\r\nimport core from 'core';\r\n\r\nimport './NoteHeader.scss';\r\n\r\nconst propTypes = {\r\n  icon: PropTypes.string,\r\n  iconColor: PropTypes.string,\r\n  color: PropTypes.string,\r\n  fillColor: PropTypes.string,\r\n  annotation: PropTypes.object,\r\n  language: PropTypes.string,\r\n  noteDateFormat: PropTypes.string,\r\n  isSelected: PropTypes.bool,\r\n  setIsEditing: PropTypes.func,\r\n  notesShowLastUpdatedDate: PropTypes.bool,\r\n  isUnread: PropTypes.bool,\r\n  renderAuthorName: PropTypes.func,\r\n  isNoteStateDisabled: PropTypes.bool,\r\n  isEditing: PropTypes.bool,\r\n  noteIndex: PropTypes.number,\r\n  sortStrategy: PropTypes.string,\r\n  activeTheme: PropTypes.string,\r\n  isMultiSelected: PropTypes.bool,\r\n  isMultiSelectMode: PropTypes.bool,\r\n  handleMultiSelect: PropTypes.func,\r\n  isGroupMember: PropTypes.bool,\r\n  showAnnotationNumbering: PropTypes.bool,\r\n};\r\n\r\nfunction NoteHeader(props) {\r\n  const {\r\n    icon,\r\n    iconColor,\r\n    annotation,\r\n    language,\r\n    noteDateFormat,\r\n    isSelected,\r\n    setIsEditing,\r\n    notesShowLastUpdatedDate,\r\n    isReply,\r\n    isUnread,\r\n    renderAuthorName,\r\n    isNoteStateDisabled,\r\n    isEditing,\r\n    noteIndex,\r\n    sortStrategy,\r\n    activeTheme,\r\n    isMultiSelected,\r\n    isMultiSelectMode,\r\n    handleMultiSelect,\r\n    isGroupMember,\r\n    showAnnotationNumbering,\r\n    timezone,\r\n  } = props;\r\n\r\n  const [t] = useTranslation();\r\n\r\n  let date;\r\n  const dateCreated = (sortStrategy === NotesPanelSortStrategy.MODIFIED_DATE || (notesShowLastUpdatedDate && sortStrategy !== NotesPanelSortStrategy.CREATED_DATE)) ? getLatestActivityDate(annotation) : annotation.DateCreated;\r\n  if (timezone && dateCreated) {\r\n    const datetimeStr = dateCreated.toLocaleString('en-US', { timeZone: timezone });\r\n    date = new Date(datetimeStr);\r\n  } else {\r\n    date = dateCreated;\r\n  }\r\n\r\n  const numberOfReplies = annotation.getReplies().length;\r\n  let color = annotation[iconColor]?.toHexString?.();\r\n\r\n  if (activeTheme === Theme.DARK && color && isDarkColorHex(color)) {\r\n    color = '#FFFFFF';\r\n  }\r\n\r\n  const fillColor = getColor(annotation.FillColor);\r\n  const annotationAssociatedNumber = annotation.getAssociatedNumber();\r\n  const annotationDisplayedAssociatedNumber = `#${annotationAssociatedNumber} - `;\r\n\r\n  const authorAndDateClass = classNames('author-and-date', { isReply });\r\n  const noteHeaderClass = classNames('NoteHeader', { parent: !isReply && !isGroupMember });\r\n\r\n  return (\r\n    <div className={noteHeaderClass}>\r\n      {!isReply &&\r\n        <div className=\"type-icon-container\">\r\n          {isUnread &&\r\n            <div className=\"unread-notification\"></div>\r\n          }\r\n          <Icon className=\"type-icon\" glyph={icon} color={color} fillColor={fillColor} />\r\n        </div>\r\n      }\r\n      <div className={authorAndDateClass}>\r\n        <div className=\"author-and-overflow\">\r\n          <div className=\"author-and-time\">\r\n            <div className=\"author\">\r\n              {showAnnotationNumbering && annotationAssociatedNumber !== undefined &&\r\n                <span className=\"annotation-number\">{annotationDisplayedAssociatedNumber}</span>\r\n              }\r\n              {renderAuthorName(annotation)}\r\n            </div>\r\n            <div className=\"date-and-num-replies\">\r\n              <div className=\"date-and-time\">\r\n                {date ? dayjs(date).locale(language).format(noteDateFormat) : t('option.notesPanel.noteContent.noDate')}\r\n                {isGroupMember && ` (Page ${annotation.PageNumber})`}\r\n              </div>\r\n              {numberOfReplies > 0 && !isSelected &&\r\n                <div className=\"num-replies-container\">\r\n                  <Icon className=\"num-reply-icon\" glyph={'icon-chat-bubble'} />\r\n                  <div className=\"num-replies\">{numberOfReplies}</div>\r\n                </div>}\r\n            </div>\r\n          </div>\r\n          <div className=\"state-and-overflow\">\r\n            {isMultiSelectMode && !isGroupMember && !isReply &&\r\n              <Choice\r\n                id={`note-multi-select-toggle_${annotation.Id}`}\r\n                checked={isMultiSelected}\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  core.deselectAllAnnotations();\r\n                  handleMultiSelect(!isMultiSelected);\r\n                }}\r\n              />}\r\n            <NoteUnpostedCommentIndicator annotationId={annotation.Id} />\r\n            {!isNoteStateDisabled && !isReply && !isMultiSelectMode && !isGroupMember &&\r\n              <NoteState\r\n                annotation={annotation}\r\n                isSelected={isSelected}\r\n              />\r\n            }\r\n            {!isEditing && isSelected && !isMultiSelectMode && !isGroupMember &&\r\n              <NotePopup\r\n                noteIndex={noteIndex}\r\n                annotation={annotation}\r\n                setIsEditing={setIsEditing}\r\n                isReply={isReply}\r\n              />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nNoteHeader.propTypes = propTypes;\r\n\r\nexport default NoteHeader;\r\n","import NoteHeader from './NoteHeader';\r\n\r\nexport default NoteHeader;","import React from 'react';\r\nimport { useSelector, shallowEqual } from 'react-redux';\r\nimport selectors from 'selectors';\r\nimport NoteTextPreview from './NoteTextPreview';\r\n\r\n\r\nfunction NoteTextPreviewContainer(props) {\r\n  const [notePanelWidth] = useSelector(\r\n    (state) => [\r\n      selectors.getNotesPanelWidth(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n\r\n  return (\r\n    <NoteTextPreview {...props} panelWidth={notePanelWidth} />\r\n  );\r\n}\r\n\r\nexport default NoteTextPreviewContainer;","import NoteTextPreview from './NoteTextPreviewContainer';\r\n\r\nexport default NoteTextPreview;","const icons = {\r\n  pdf: 'ic-file-pdf',\r\n  image: 'ic-file-img',\r\n  cad: 'ic-file-cad',\r\n  doc: 'ic-file-doc',\r\n  ppt: 'ic-file-ppt',\r\n  xls: 'ic-file-xls',\r\n  unknown: 'ic-file-etc'\r\n};\r\n\r\nconst FileAttachmentUtils = window.Core.Annotations.FileAttachmentUtils;\r\n\r\nexport async function decompressFileContent(file) {\r\n  return FileAttachmentUtils.decompressWithFlateDecode(file.content, file.type);\r\n}\r\n\r\nexport async function setAnnotationAttachments(annotation, files = []) {\r\n  await annotation.setAttachments(files);\r\n}\r\n\r\nexport function isImage(file) {\r\n  if (file.type && file.type.startsWith('image/')) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function getAttachmentIcon(file) {\r\n  if (isImage(file)) {\r\n    return icons.image;\r\n  }\r\n  const extension = file.name?.split('.').pop().toLowerCase();\r\n  switch (extension) {\r\n    case 'pdf':\r\n      return icons.pdf;\r\n    case 'cad':\r\n      return icons.cad;\r\n    case 'doc':\r\n    case 'docx':\r\n      return icons.doc;\r\n    case 'ppt':\r\n    case 'pptx':\r\n      return icons.ppt;\r\n    case 'xls':\r\n    case 'xlsx':\r\n      return icons.xls;\r\n    default:\r\n      return icons.unknown;\r\n  }\r\n}\r\n","import DOMPurify from 'dompurify';\r\n\r\nconst SVG_MIME_TYPE = 'image/svg+xml';\r\n\r\nconst hasFileSize = (file) => {\r\n  return file.size !== undefined;\r\n};\r\n\r\n// Taken from https://github.com/mattkrick/sanitize-svg/blob/master/src/sanitizeSVG.ts#L31\r\nconst readAsText = (svg) => {\r\n  return new Promise((resolve) => {\r\n    if (!hasFileSize(svg)) {\r\n      resolve(svg.toString('utf-8'));\r\n    } else {\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = () => resolve(fileReader.result);\r\n      fileReader.readAsText(svg);\r\n    }\r\n  });\r\n};\r\n\r\nexport const isSVG = (file) => {\r\n  return file.type === SVG_MIME_TYPE;\r\n};\r\n\r\nexport const sanitizeSVG = async (file) => {\r\n  const svgText = await readAsText(file);\r\n  if (!svgText) {\r\n    return { svg: file };\r\n  }\r\n\r\n  const forbiddenTags = [];\r\n  DOMPurify.addHook('uponSanitizeElement', (_, hookEvent) => {\r\n    const { tagName, allowedTags } = hookEvent;\r\n    if (!allowedTags[tagName]) {\r\n      forbiddenTags.push(tagName);\r\n    }\r\n  });\r\n\r\n  const clean = DOMPurify.sanitize(svgText);\r\n  const svg = new Blob([clean], { type: SVG_MIME_TYPE });\r\n  return { svg, isDirty: forbiddenTags.length > 0 };\r\n};","import React, { useState, useEffect } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport selectors from 'selectors';\r\nimport { saveAs } from 'file-saver';\r\nimport Button from 'components/Button';\r\nimport Icon from 'components/Icon';\r\nimport Tooltip from 'components/Tooltip';\r\nimport { getAttachmentIcon, isImage, decompressFileContent } from 'helpers/ReplyAttachmentManager';\r\nimport { isSVG, sanitizeSVG } from 'helpers/sanitizeSVG';\r\n\r\nimport './ReplyAttachmentList.scss';\r\n\r\nconst ImagePreview = ({ file }) => {\r\n  const [t] = useTranslation();\r\n\r\n  const [src, setSrc] = useState();\r\n  const [isDirtySVG, setIsDirtySvg] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const processImagePreview = async () => {\r\n      setIsDirtySvg(false);\r\n      let fileToSanitize = file;\r\n\r\n      const isImageFromPDF = !(file instanceof File) && !file.url;\r\n      if (isImageFromPDF) {\r\n        fileToSanitize = await decompressFileContent(file);\r\n      }\r\n\r\n      if (file instanceof File || isImageFromPDF) {\r\n        if (isSVG(file)) {\r\n          const { svg, isDirty } = await sanitizeSVG(fileToSanitize);\r\n          setSrc(URL.createObjectURL(svg));\r\n          setIsDirtySvg(isDirty);\r\n        } else {\r\n          setSrc(URL.createObjectURL(fileToSanitize));\r\n        }\r\n      }\r\n    };\r\n    processImagePreview();\r\n  }, [file]);\r\n\r\n  return (\r\n    <div className={classNames({\r\n      'reply-attachment-preview': true,\r\n      'dirty': isDirtySVG,\r\n    })}>\r\n      <img src={src} />\r\n      {isDirtySVG && <span className=\"reply-attachment-preview-message\">{t('message.svgMalicious')}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ReplyAttachmentList = ({ files, isEditing, fileDeleted }) => {\r\n  const [tabManager, previewEnabled] = useSelector((state) => [\r\n    selectors.getTabManager(state),\r\n    selectors.isReplyAttachmentPreviewEnabled(state)\r\n  ]);\r\n\r\n  const onClick = async (e, file) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if (!tabManager) {\r\n      return console.warn('Can\\'t open attachment in non-multi-tab mode');\r\n    }\r\n\r\n    let fileData;\r\n    if (file instanceof File) {\r\n      fileData = file;\r\n    } else if (file.url) {\r\n      fileData = file.url;\r\n    } else {\r\n      fileData = await decompressFileContent(file);\r\n    }\r\n\r\n    fileData && tabManager.addTab(fileData, {\r\n      filename: file.name,\r\n      setActive: true,\r\n      saveCurrentActiveTabState: true\r\n    });\r\n  };\r\n\r\n  const onDelete = (e, file) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    fileDeleted(file);\r\n  };\r\n\r\n  const onDownload = async (e, file) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const fileData = file.url ? file.url : await decompressFileContent(file);\r\n    saveAs(fileData, file.name);\r\n  };\r\n\r\n  return (\r\n    <div className=\"reply-attachment-list\">\r\n      {files.map((file, i) => (\r\n        <div\r\n          className=\"reply-attachment\"\r\n          key={i}\r\n          onClick={(e) => onClick(e, file)}\r\n        >\r\n          {previewEnabled && isImage(file) && (\r\n            <ImagePreview file={file} />\r\n          )}\r\n          <div className=\"reply-attachment-info\">\r\n            <Icon\r\n              className=\"reply-attachment-icon\"\r\n              glyph={getAttachmentIcon(file)}\r\n            />\r\n            <Tooltip content={file.name}>\r\n              <div className=\"reply-file-name\">{file.name}</div>\r\n            </Tooltip>\r\n            {isEditing ? (\r\n              <Button\r\n                className=\"attachment-button\"\r\n                img=\"icon-close\"\r\n                onClick={(e) => onDelete(e, file)}\r\n              />\r\n            ) : (\r\n              <Button\r\n                className=\"attachment-button\"\r\n                img=\"icon-download\"\r\n                onClick={(e) => onDownload(e, file)}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReplyAttachmentList;\r\n","import ReplyAttachmentList from './ReplyAttachmentList';\r\n\r\nexport default ReplyAttachmentList;","import mentionsManager from './MentionsManager';\r\n/*\r\n * Transforming RichText Style object into the Object acceptable by React Quill component.\r\n */\r\n\r\nconst setReactQuillContent = (annotation, editor) => {\r\n  const richTextStyle = annotation.getRichTextStyle();\r\n  const indexes = Object.keys(richTextStyle);\r\n  const formattedText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\r\n  const text = mentionsManager.extractMentionDataFromStr(formattedText).plainTextValue;\r\n  const ops = [];\r\n\r\n  for (let i = 0; i < indexes.length; i++) {\r\n    const element = richTextStyle[indexes[i]];\r\n    const attr = getAttributtes(element);\r\n\r\n    if (isNaN(indexes[i])) {\r\n      continue;\r\n    }\r\n\r\n    const lastIndex = isNaN(indexes[i + 1]) ? text.length : indexes[i + 1];\r\n    const textSlice = text.slice(indexes[i], lastIndex);\r\n\r\n    ops.push({ insert: textSlice, attributes: attr });\r\n  }\r\n\r\n  editor.setContents(ops);\r\n  editor.setSelection(text.length, 0);\r\n};\r\n\r\nconst getAttributtes = (element) => {\r\n  const attr = {};\r\n  if (element['font-weight']) {\r\n    attr['bold'] = true;\r\n  }\r\n  if (element['font-style']) {\r\n    attr['italic'] = true;\r\n  }\r\n  if (element['color']) {\r\n    attr['color'] = element['color'];\r\n  }\r\n  if (element['text-decoration']) {\r\n    const decoration = element['text-decoration'].split(' ');\r\n\r\n    if (decoration.includes('line-through')) {\r\n      attr['strike'] = true;\r\n    }\r\n    if (decoration.includes('word')) {\r\n      attr['underline'] = true;\r\n    }\r\n  }\r\n\r\n  return attr;\r\n};\r\n\r\nexport default setReactQuillContent;\r\n","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Autolinker from 'autolinker';\r\nimport dayjs from 'dayjs';\r\nimport classNames from 'classnames';\r\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\r\nimport isString from 'lodash/isString';\r\n\r\nimport NoteTextarea from 'components/NoteTextarea';\r\nimport NoteContext from 'components/Note/Context';\r\nimport NoteHeader from 'components/NoteHeader';\r\nimport NoteTextPreview from 'components/NoteTextPreview';\r\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\r\n\r\nimport mentionsManager from 'helpers/MentionsManager';\r\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\r\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\r\nimport setReactQuillContent from 'helpers/setReactQuillContent';\r\nimport { isDarkColorHex } from 'helpers/color';\r\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\r\n\r\nimport core from 'core';\r\nimport { getDataWithKey, mapAnnotationToKey } from 'constants/map';\r\nimport Theme from 'constants/theme';\r\nimport useDidUpdate from 'hooks/useDidUpdate';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\nimport { isMobile } from 'src/helpers/device';\r\nimport DataElements from 'src/constants/dataElement';\r\nimport DataElementWrapper from '../DataElementWrapper';\r\n\r\nimport './NoteContent.scss';\r\n\r\ndayjs.extend(LocalizedFormat);\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object.isRequired,\r\n  isEditing: PropTypes.bool,\r\n  setIsEditing: PropTypes.func,\r\n  noteIndex: PropTypes.number,\r\n  isUnread: PropTypes.bool,\r\n  isNonReplyNoteRead: PropTypes.bool,\r\n  onReplyClicked: PropTypes.func,\r\n  isMultiSelected: PropTypes.bool,\r\n  isMultiSelectMode: PropTypes.bool,\r\n  handleMultiSelect: PropTypes.func,\r\n  isGroupMember: PropTypes.bool,\r\n};\r\n\r\nconst NoteContent = ({\r\n  annotation,\r\n  isEditing,\r\n  setIsEditing,\r\n  noteIndex,\r\n  isUnread,\r\n  isNonReplyNoteRead,\r\n  onReplyClicked,\r\n  isMultiSelected,\r\n  isMultiSelectMode,\r\n  handleMultiSelect,\r\n  isGroupMember,\r\n}) => {\r\n  const [\r\n    noteDateFormat,\r\n    iconColor,\r\n    isNoteStateDisabled,\r\n    language,\r\n    notesShowLastUpdatedDate,\r\n    canCollapseTextPreview,\r\n    canCollapseReplyPreview,\r\n    activeTheme,\r\n    timezone,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getNoteDateFormat(state),\r\n      selectors.getIconColor(state, mapAnnotationToKey(annotation)),\r\n      selectors.isElementDisabled(state, 'notePopupState'),\r\n      selectors.getCurrentLanguage(state),\r\n      selectors.notesShowLastUpdatedDate(state),\r\n      selectors.isNotesPanelTextCollapsingEnabled(state),\r\n      selectors.isNotesPanelRepliesCollapsingEnabled(state),\r\n      selectors.getActiveTheme(state),\r\n      selectors.getTimezone(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n\r\n  const {\r\n    isSelected,\r\n    searchInput,\r\n    resize,\r\n    pendingEditTextMap,\r\n    onTopNoteContentClicked,\r\n    sortStrategy,\r\n    showAnnotationNumbering,\r\n    setPendingEditText\r\n  } = useContext(NoteContext);\r\n\r\n  const dispatch = useDispatch();\r\n  const [t] = useTranslation();\r\n\r\n  const isReply = annotation.isReply();\r\n\r\n  const [attachments, setAttachments] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setAttachments(annotation.getAttachments());\r\n  }, [annotation]);\r\n\r\n  useEffect(() => {\r\n    const annotationChangedListener = (annotations, action) => {\r\n      if (action === 'modify') {\r\n        annotations.forEach((annot) => {\r\n          if (annot.Id === annotation.Id) {\r\n            setAttachments(annot.getAttachments());\r\n          }\r\n        });\r\n      }\r\n    };\r\n    core.addEventListener('annotationChanged', annotationChangedListener);\r\n\r\n    return () => {\r\n      core.removeEventListener('annotationChanged', annotationChangedListener);\r\n    };\r\n  }, [annotation]);\r\n\r\n  useDidUpdate(() => {\r\n    if (!isEditing) {\r\n      dispatch(actions.finishNoteEditing());\r\n    }\r\n\r\n    resize();\r\n  }, [isEditing]);\r\n\r\n  const renderAuthorName = useCallback(\r\n    (annotation) => {\r\n      const name = core.getDisplayAuthor(annotation['Author']);\r\n\r\n      return name ? (\r\n        highlightSearchInput(name, searchInput)\r\n      ) : (\r\n        t('option.notesPanel.noteContent.noName')\r\n      );\r\n    },\r\n    [searchInput],\r\n  );\r\n\r\n  const renderContents = useCallback(\r\n    (contents, richTextStyle, fontColor) => {\r\n      const autolinkerContent = [];\r\n      Autolinker.link(contents, {\r\n        stripPrefix: false,\r\n        stripTrailingSlash: false,\r\n        replaceFn(match) {\r\n          const href = match.getAnchorHref();\r\n          const anchorText = match.getAnchorText();\r\n          const offset = match.getOffset();\r\n\r\n          switch (match.getType()) {\r\n            case 'url':\r\n            case 'email':\r\n            case 'phone':\r\n              autolinkerContent.push({\r\n                href,\r\n                text: anchorText,\r\n                start: offset,\r\n                end: offset + match.getMatchedText().length\r\n              });\r\n          }\r\n        }\r\n      });\r\n      if (!autolinkerContent.length) {\r\n        const highlightResult = highlightSearchInput(contents, searchInput, richTextStyle);\r\n        const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\r\n        const shouldCollapseReply = isReply && canCollapseReplyPreview;\r\n\r\n        /*\r\n         * Case there is no value on Search input, and the collapse of the text is allowed,\r\n         * just render the value with Text preview component\r\n         */\r\n        if (!searchInput && (shouldCollapseAnnotationText || shouldCollapseReply)) {\r\n          return (\r\n            <NoteTextPreview linesToBreak={3} comment renderRichText={renderRichText} richTextStyle={richTextStyle} resize={resize} style={fontColor}>\r\n              {contents}\r\n            </NoteTextPreview>\r\n          );\r\n        }\r\n        return highlightResult;\r\n      }\r\n      const contentToRender = [];\r\n      let strIdx = 0;\r\n      // Iterate through each case detected by Autolinker, wrap all content\r\n      // before the current link in a span tag, and wrap the current link\r\n      // in our own anchor tag\r\n      autolinkerContent.forEach((anchorData, forIdx) => {\r\n        const { start, end, href } = anchorData;\r\n        if (strIdx < start) {\r\n          contentToRender.push(\r\n            <span key={`span_${forIdx}`}>\r\n              {\r\n                highlightSearchInput(\r\n                  contents,\r\n                  searchInput,\r\n                  richTextStyle,\r\n                  strIdx,\r\n                  start\r\n                )\r\n              }\r\n            </span>\r\n          );\r\n        }\r\n        contentToRender.push(\r\n          <a\r\n            href={href}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            key={`a_${forIdx}`}\r\n          >\r\n            {\r\n              highlightSearchInput(\r\n                contents,\r\n                searchInput,\r\n                richTextStyle,\r\n                start,\r\n                end\r\n              )\r\n            }\r\n          </a>\r\n        );\r\n        strIdx = end;\r\n      });\r\n      // Ensure any content after the last link is accounted for\r\n      if (strIdx < contents.length - 1) {\r\n        contentToRender.push(highlightSearchInput(\r\n          contents,\r\n          searchInput,\r\n          richTextStyle,\r\n          strIdx\r\n        ));\r\n      }\r\n      return contentToRender;\r\n    },\r\n    [searchInput]\r\n  );\r\n\r\n  const icon = getDataWithKey(mapAnnotationToKey(annotation)).icon;\r\n  let customData;\r\n  try {\r\n    customData = JSON.parse(annotation.getCustomData('trn-mention'));\r\n  } catch (e) {\r\n    customData = annotation.getCustomData('trn-mention');\r\n  }\r\n  const contents = customData?.contents || annotation.getContents();\r\n  const contentsToRender = annotation.getContents();\r\n  const richTextStyle = annotation.getRichTextStyle();\r\n  let textColor = annotation['TextColor'];\r\n\r\n  if (activeTheme === Theme.DARK) {\r\n    if (textColor && isDarkColorHex(textColor.toHexString())) {\r\n      textColor = new window.Core.Annotations.Color(255, 255, 255, 1);\r\n    }\r\n\r\n    if (richTextStyle) {\r\n      const sections = Object.keys(richTextStyle);\r\n      sections.forEach((a) => {\r\n        if (richTextStyle[a]['color'] && isDarkColorHex(richTextStyle[a]['color'])) {\r\n          richTextStyle[a]['color'] = '#FFFFFF';\r\n        }\r\n      });\r\n    }\r\n  }\r\n  // This is the text placeholder passed to the ContentArea\r\n  // It ensures that if we try and edit, we get the right placeholder\r\n  // depending on whether the comment has been saved to the annotation or not\r\n  const thereIsNoUnpostedEdit = typeof pendingEditTextMap[annotation.Id] === 'undefined';\r\n  let textAreaValue;\r\n  if (contents && thereIsNoUnpostedEdit) {\r\n    textAreaValue = contents;\r\n  } else {\r\n    textAreaValue = pendingEditTextMap[annotation.Id];\r\n  }\r\n\r\n  const handleNoteContentClicked = () => {\r\n    if (!isGroupMember) {\r\n      if (isReply) {\r\n        onReplyClicked(annotation);\r\n      } else if (!isEditing) {\r\n        // collapse expanded note when top noteContent is clicked if it's not being edited\r\n        onTopNoteContentClicked();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleContentsClicked = (e) => {\r\n    if (window.getSelection()?.toString()) {\r\n      e?.stopPropagation();\r\n    }\r\n  };\r\n\r\n  const noteContentClass = classNames({\r\n    NoteContent: true,\r\n    isReply,\r\n    unread: isUnread, // The note content itself is unread or it has unread replies\r\n    clicked: isNonReplyNoteRead, // The top note content is read\r\n  });\r\n\r\n  const content = useMemo(\r\n    () => {\r\n      const contentStyle = {};\r\n      if (textColor) {\r\n        contentStyle.color = textColor.toHexString();\r\n      }\r\n\r\n      return (\r\n        <>\r\n          {(isEditing && isSelected) ? (\r\n            <ContentArea\r\n              annotation={annotation}\r\n              noteIndex={noteIndex}\r\n              setIsEditing={setIsEditing}\r\n              textAreaValue={textAreaValue}\r\n              onTextAreaValueChange={setPendingEditText}\r\n              pendingText={pendingEditTextMap[annotation.Id]}\r\n            />\r\n          ) : (\r\n            contentsToRender && (\r\n              <div className={classNames('container', { 'reply-content': isReply })} onClick={handleContentsClicked}>\r\n                {isReply && (attachments.length > 0) && (\r\n                  <ReplyAttachmentList\r\n                    files={attachments}\r\n                    isEditing={false}\r\n                  />\r\n                )}\r\n                {renderContents(contentsToRender, richTextStyle, contentStyle)}\r\n              </div>\r\n            )\r\n          )}\r\n        </>\r\n      );\r\n    },\r\n    [annotation, isSelected, isEditing, setIsEditing, contents, renderContents, textAreaValue, setPendingEditText, attachments]\r\n  );\r\n\r\n  const text = annotation.getCustomData('trn-annot-preview');\r\n  const textPreview = useMemo(\r\n    () => {\r\n      if (text === '') {\r\n        return null;\r\n      }\r\n\r\n      const highlightSearchResult = highlightSearchInput(text, searchInput);\r\n      const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\r\n      // If we have a search result do not use text\r\n      // preview but instead show the entire text\r\n      if (isString(highlightSearchResult) && shouldCollapseAnnotationText) {\r\n        return (\r\n          <DataElementWrapper\r\n            className=\"selected-text-preview\"\r\n            dataElement=\"notesSelectedTextPreview\">\r\n            <NoteTextPreview linesToBreak={3}>\r\n              {`\"${highlightSearchResult}\"`}\r\n            </NoteTextPreview>\r\n          </DataElementWrapper>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"selected-text-preview\" style={{ paddingRight: '12px' }}>\r\n          {highlightSearchResult}\r\n        </div>\r\n      );\r\n    }, [text, searchInput]);\r\n\r\n  const header = useMemo(\r\n    () => {\r\n      return (\r\n        <NoteHeader\r\n          icon={icon}\r\n          iconColor={iconColor}\r\n          annotation={annotation}\r\n          language={language}\r\n          noteDateFormat={noteDateFormat}\r\n          isSelected={isSelected}\r\n          setIsEditing={setIsEditing}\r\n          notesShowLastUpdatedDate={notesShowLastUpdatedDate}\r\n          isReply={isReply}\r\n          isUnread={isUnread}\r\n          renderAuthorName={renderAuthorName}\r\n          isNoteStateDisabled={isNoteStateDisabled}\r\n          isEditing={isEditing}\r\n          noteIndex={noteIndex}\r\n          sortStrategy={sortStrategy}\r\n          activeTheme={activeTheme}\r\n          handleMultiSelect={handleMultiSelect}\r\n          isMultiSelected={isMultiSelected}\r\n          isMultiSelectMode={isMultiSelectMode}\r\n          isGroupMember={isGroupMember}\r\n          showAnnotationNumbering={showAnnotationNumbering}\r\n          timezone={timezone}\r\n        />\r\n      );\r\n    }, [icon, iconColor, annotation, language, noteDateFormat, isSelected, setIsEditing, notesShowLastUpdatedDate, isReply, isUnread, renderAuthorName, core.getDisplayAuthor(annotation['Author']), isNoteStateDisabled, isEditing, noteIndex, getLatestActivityDate(annotation), sortStrategy, handleMultiSelect, isMultiSelected, isMultiSelectMode, isGroupMember, timezone]\r\n  );\r\n\r\n  return (\r\n    <div className={noteContentClass} onClick={handleNoteContentClicked}>\r\n      {header}\r\n      {textPreview}\r\n      {content}\r\n    </div>\r\n  );\r\n};\r\n\r\nNoteContent.propTypes = propTypes;\r\n\r\nexport default NoteContent;\r\n\r\n// a component that contains the content textarea, the save button and the cancel button\r\nconst ContentArea = ({\r\n  annotation,\r\n  noteIndex,\r\n  setIsEditing,\r\n  textAreaValue,\r\n  onTextAreaValueChange,\r\n  pendingText\r\n}) => {\r\n  const [\r\n    autoFocusNoteOnAnnotationSelection,\r\n    isMentionEnabled,\r\n    isInlineCommentDisabled,\r\n    isInlineCommentOpen,\r\n    isNotesPanelOpen,\r\n    activeDocumentViewerKey\r\n  ] = useSelector((state) => [\r\n    selectors.getAutoFocusNoteOnAnnotationSelection(state),\r\n    selectors.getIsMentionEnabled(state),\r\n    selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\r\n    selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\r\n    selectors.isElementOpen(state, DataElements.NOTES_PANEL),\r\n    selectors.getActiveDocumentViewerKey(state),\r\n  ]);\r\n  const [t] = useTranslation();\r\n  const textareaRef = useRef();\r\n  const isReply = annotation.isReply();\r\n  const {\r\n    setCurAnnotId,\r\n    pendingAttachmentMap,\r\n    deleteAttachment,\r\n    clearAttachments,\r\n    addAttachments\r\n  } = useContext(NoteContext);\r\n\r\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\r\n\r\n  useEffect(() => {\r\n    // on initial mount, focus the last character of the textarea\r\n    if ((isNotesPanelOpen || isInlineCommentOpen) && textareaRef.current) {\r\n      const editor = textareaRef.current.getEditor();\r\n      const isFreeTextAnnnotation = annotation && annotation instanceof window.Core.Annotations.FreeTextAnnotation;\r\n      isFreeTextAnnnotation && editor.setText('');\r\n\r\n      /**\r\n       * If there is a pending text we should update the annotation rich text style\r\n       * with this pending text style.\r\n       */\r\n      if (pendingText) {\r\n        setAnnotationRichTextStyle(editor, annotation);\r\n      } else if (editor.getContents()) {\r\n        setTimeout(() => {\r\n          // need setTimeout because textarea seem to rerender and unfocus\r\n          if (isMentionEnabled) {\r\n            textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\r\n            const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\r\n\r\n            if (ids.length) {\r\n              editor.setText(plainTextValue);\r\n            }\r\n          }\r\n\r\n          if (shouldNotFocusOnInput) {\r\n            return;\r\n          }\r\n\r\n          if (autoFocusNoteOnAnnotationSelection) {\r\n            textareaRef.current.focus();\r\n            const annotRichTextStyle = annotation.getRichTextStyle();\r\n            if (annotRichTextStyle) {\r\n              setReactQuillContent(annotation, editor);\r\n            }\r\n          }\r\n        }, 100);\r\n      }\r\n\r\n      const lastNewLineCharacterLength = 1;\r\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\r\n\r\n      if (shouldNotFocusOnInput) {\r\n        return;\r\n      }\r\n\r\n      setTimeout(() => {\r\n        editor.setSelection(textLength, textLength);\r\n      }, 100);\r\n    }\r\n  }, [isNotesPanelOpen, isInlineCommentOpen, shouldNotFocusOnInput]);\r\n\r\n  useEffect(() => {\r\n    if (isReply && pendingAttachments.length === 0) {\r\n      // Load attachments\r\n      const attachments = annotation.getAttachments();\r\n      addAttachments(annotation.Id, attachments);\r\n    }\r\n  }, []);\r\n\r\n  const setContents = async (e) => {\r\n    // prevent the textarea from blurring out which will unmount these two buttons\r\n    e.preventDefault();\r\n\r\n    const editor = textareaRef.current.getEditor();\r\n    textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\r\n    setAnnotationRichTextStyle(editor, annotation);\r\n\r\n    if (isMentionEnabled) {\r\n      const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\r\n\r\n      // If modified, double check for ids\r\n      const annotMentionData = mentionsManager.extractMentionDataFromAnnot(annotation);\r\n      annotMentionData.mentions.forEach((mention) => {\r\n        if (plainTextValue.includes(mention.value)) {\r\n          ids.push(mention.id);\r\n        }\r\n      });\r\n\r\n      annotation.setCustomData('trn-mention', JSON.stringify({\r\n        contents: textAreaValue,\r\n        ids,\r\n      }));\r\n      annotation.setContents(plainTextValue);\r\n    } else {\r\n      annotation.setContents(textAreaValue);\r\n    }\r\n\r\n    await setAnnotationAttachments(annotation, pendingAttachmentMap[annotation.Id]);\r\n\r\n    const source = (annotation instanceof window.Core.Annotations.FreeTextAnnotation)\r\n      ? 'textChanged' : 'noteChanged';\r\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[annotation], 'modify', { 'source': source }]);\r\n\r\n    if (annotation instanceof window.Core.Annotations.FreeTextAnnotation) {\r\n      core.drawAnnotationsFromList([annotation]);\r\n    }\r\n\r\n    setIsEditing(false, noteIndex);\r\n    // Only set comment to unposted state if it is not empty\r\n    if (textAreaValue !== '') {\r\n      onTextAreaValueChange(undefined, annotation.Id);\r\n    }\r\n    clearAttachments(annotation.Id);\r\n  };\r\n\r\n  const onBlur = () => {\r\n    setCurAnnotId(undefined);\r\n  };\r\n\r\n  const onFocus = () => {\r\n    setCurAnnotId(annotation.Id);\r\n  };\r\n\r\n  const contentClassName = classNames('edit-content', { 'reply-content': isReply });\r\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\r\n\r\n  return (\r\n    <div className={contentClassName}>\r\n      {isReply && pendingAttachments.length > 0 && (\r\n        <ReplyAttachmentList\r\n          files={pendingAttachments}\r\n          isEditing={true}\r\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\r\n        />\r\n      )}\r\n      <NoteTextarea\r\n        ref={(el) => {\r\n          textareaRef.current = el;\r\n        }}\r\n        value={textAreaValue}\r\n        onChange={(value) => onTextAreaValueChange(value, annotation.Id)}\r\n        onSubmit={setContents}\r\n        isReply={isReply}\r\n        onBlur={onBlur}\r\n        onFocus={onFocus}\r\n      />\r\n      <div className=\"edit-buttons\">\r\n        <button\r\n          className=\"cancel-button\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            setIsEditing(false, noteIndex);\r\n            // Clear pending text\r\n            onTextAreaValueChange(undefined, annotation.Id);\r\n            clearAttachments(annotation.Id);\r\n          }}\r\n        >\r\n          {t('action.cancel')}\r\n        </button>\r\n        <button\r\n          className={`save-button${!textAreaValue ? ' disabled' : ''}`}\r\n          disabled={!textAreaValue}\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            setContents(e);\r\n          }}\r\n        >\r\n          {t('action.save')}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nContentArea.propTypes = {\r\n  noteIndex: PropTypes.number.isRequired,\r\n  annotation: PropTypes.object.isRequired,\r\n  setIsEditing: PropTypes.func.isRequired,\r\n  textAreaValue: PropTypes.string,\r\n  onTextAreaValueChange: PropTypes.func.isRequired,\r\n  pendingText: PropTypes.string\r\n};\r\n\r\nconst getRichTextSpan = (text, richTextStyle, key) => {\r\n  const style = {\r\n    fontWeight: richTextStyle['font-weight'],\r\n    fontStyle: richTextStyle['font-style'],\r\n    textDecoration: richTextStyle['text-decoration'],\r\n    color: richTextStyle['color']\r\n  };\r\n  if (style.textDecoration) {\r\n    style.textDecoration = style.textDecoration.replace('word', 'underline');\r\n  }\r\n  return (\r\n    <span style={style} key={key}>{text}</span>\r\n  );\r\n};\r\n\r\nconst renderRichText = (text, richTextStyle, start) => {\r\n  if (!richTextStyle || !text) {\r\n    return text;\r\n  }\r\n\r\n  const styles = {};\r\n  const indices = Object.keys(richTextStyle).map(Number).sort((a, b) => a - b);\r\n  for (let i = 0; i < indices.length; i++) {\r\n    let index = indices[i] - start;\r\n    index = Math.min(Math.max(index, 0), text.length);\r\n    styles[index] = richTextStyle[indices[i]];\r\n    if (index === text.length) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  const contentToRender = [];\r\n  const styleIndices = Object.keys(styles).map(Number).sort((a, b) => a - b);\r\n  for (let i = 1; i < styleIndices.length; i++) {\r\n    contentToRender.push(getRichTextSpan(\r\n      text.slice(styleIndices[i - 1], styleIndices[i]),\r\n      styles[styleIndices[i - 1]],\r\n      `richtext_span_${i}`\r\n    ));\r\n  }\r\n\r\n  return contentToRender;\r\n};\r\n\r\nconst highlightSearchInput = (fullText, searchInput, richTextStyle, start = 0, end = fullText.length) => {\r\n  const text = fullText.slice(start, end);\r\n  const loweredText = text.toLowerCase();\r\n  const loweredSearchInput = searchInput.toLowerCase();\r\n  if (richTextStyle) {\r\n    richTextStyle['0'] = richTextStyle['0'] || {};\r\n    richTextStyle[fullText.length] = richTextStyle[fullText.length] || {};\r\n  }\r\n  let lastFoundInstance = loweredText.indexOf(loweredSearchInput);\r\n  if (!loweredSearchInput.trim() || lastFoundInstance === -1) {\r\n    return renderRichText(text, richTextStyle, start);\r\n  }\r\n  const contentToRender = [];\r\n  const allFoundPositions = [lastFoundInstance];\r\n  // Escape all RegExp special characters\r\n  const regexSafeSearchInput = loweredSearchInput.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n  if (new RegExp(`(${regexSafeSearchInput})`, 'gi').test(loweredText)) {\r\n    while (lastFoundInstance !== -1) {\r\n      lastFoundInstance = loweredText.indexOf(loweredSearchInput, lastFoundInstance + loweredSearchInput.length);\r\n      if (lastFoundInstance !== -1) {\r\n        allFoundPositions.push(lastFoundInstance);\r\n      }\r\n    }\r\n  }\r\n  allFoundPositions.forEach((position, idx) => {\r\n    // Account for any content at the beginning of the string before the first\r\n    // instance of the searchInput\r\n    if (idx === 0 && position !== 0) {\r\n      contentToRender.push(renderRichText(text.substring(0, position), richTextStyle, start));\r\n    }\r\n    contentToRender.push(\r\n      <span className=\"highlight\" key={`highlight_span_${idx}`}>\r\n        {\r\n          renderRichText(\r\n            text.substring(position, position + loweredSearchInput.length),\r\n            richTextStyle,\r\n            start + position)\r\n        }\r\n      </span>\r\n    );\r\n    if (\r\n      // Ensure that we do not try to make an out-of-bounds access\r\n      position + loweredSearchInput.length < loweredText.length\r\n      // Ensure that this is the end of the allFoundPositions array\r\n      && position + loweredSearchInput.length !== allFoundPositions[idx + 1]\r\n    ) {\r\n      contentToRender.push(renderRichText(\r\n        text.substring(position + loweredSearchInput.length, allFoundPositions[idx + 1]),\r\n        richTextStyle,\r\n        start + position + loweredSearchInput.length\r\n      ));\r\n    }\r\n  });\r\n  return contentToRender;\r\n};\r\n","import NoteContent from './NoteContent';\r\n\r\nexport default NoteContent;","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport NoteContext from 'components/Note/Context';\r\nimport NoteTextarea from 'components/NoteTextarea';\r\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\r\nimport Button from 'components/Button';\r\nimport classNames from 'classnames';\r\nimport core from 'core';\r\nimport mentionsManager from 'helpers/MentionsManager';\r\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\r\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\r\nimport useDidUpdate from 'hooks/useDidUpdate';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\nimport { isMobile } from 'src/helpers/device';\r\nimport DataElements from 'src/constants/dataElement';\r\n\r\nimport './ReplyArea.scss';\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object.isRequired,\r\n};\r\n\r\n// a component that contains the reply textarea, the reply button and the cancel button\r\nconst ReplyArea = ({ annotation, isUnread, onPendingReplyChange }) => {\r\n  const [\r\n    autoFocusNoteOnAnnotationSelection,\r\n    isReadOnly,\r\n    isReplyDisabled,\r\n    isReplyDisabledForAnnotation,\r\n    isMentionEnabled,\r\n    isNoteEditingTriggeredByAnnotationPopup,\r\n    isInlineCommentDisabled,\r\n    isInlineCommentOpen,\r\n    activeDocumentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\r\n      selectors.isDocumentReadOnly(state),\r\n      selectors.isElementDisabled(state, 'noteReply'),\r\n      selectors.getIsReplyDisabled(state)?.(annotation),\r\n      selectors.getIsMentionEnabled(state),\r\n      selectors.getIsNoteEditing(state),\r\n      selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\r\n      selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual\r\n  );\r\n  const {\r\n    isContentEditable,\r\n    isSelected,\r\n    pendingReplyMap,\r\n    setPendingReply,\r\n    isExpandedFromSearch,\r\n    scrollToSelectedAnnot,\r\n    setCurAnnotId,\r\n    pendingAttachmentMap,\r\n    clearAttachments,\r\n    deleteAttachment\r\n  } = useContext(NoteContext);\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const textareaRef = useRef();\r\n\r\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\r\n\r\n  useDidUpdate(() => {\r\n    if (!isFocused) {\r\n      dispatch(actions.finishNoteEditing());\r\n    }\r\n  }, [isFocused]);\r\n\r\n  useEffect(() => {\r\n    if (shouldNotFocusOnInput) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      isNoteEditingTriggeredByAnnotationPopup &&\r\n      isSelected &&\r\n      !isContentEditable &&\r\n      autoFocusNoteOnAnnotationSelection &&\r\n      textareaRef &&\r\n      textareaRef.current\r\n    ) {\r\n      textareaRef.current.focus();\r\n    }\r\n  }, [isContentEditable, isNoteEditingTriggeredByAnnotationPopup, isSelected, shouldNotFocusOnInput]);\r\n\r\n  useEffect(() => {\r\n    // on initial mount, focus the last character of the textarea\r\n    // when search item, should disable auto focus\r\n    if (!isExpandedFromSearch && scrollToSelectedAnnot) {\r\n      // use \"setTimeout\" to wait for element to be added before focusing to have the blinking text cursor appear\r\n      setTimeout(() => {\r\n        // calling focus() cause the \"NotePanel\" to scroll to note that being focused.\r\n        // we don't want to jump to the selected annotation when scrolling up and down, so only focus once\r\n        if (textareaRef && textareaRef.current && autoFocusNoteOnAnnotationSelection) {\r\n          textareaRef.current.focus();\r\n        }\r\n      }, 100);\r\n    }\r\n    if (textareaRef && textareaRef.current) {\r\n      if (shouldNotFocusOnInput) {\r\n        return;\r\n      }\r\n\r\n      const editor = textareaRef.current.getEditor();\r\n      const lastNewLineCharacterLength = 1;\r\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\r\n      setTimeout(() => {\r\n        if (textareaRef.current) {\r\n          textareaRef.current.editor.setSelection(textLength, textLength);\r\n        }\r\n      }, 100);\r\n    }\r\n  }, []);\r\n\r\n  const postReply = async (e) => {\r\n    // prevent the textarea from blurring out\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const editor = textareaRef.current.getEditor();\r\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\r\n\r\n    if (!replyText.trim()) {\r\n      return;\r\n    }\r\n\r\n    if (isMentionEnabled) {\r\n      const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\r\n      setAnnotationRichTextStyle(editor, replyAnnotation);\r\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\r\n      core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\r\n    } else {\r\n      const replyAnnotation = core.createAnnotationReply(annotation, replyText);\r\n      setAnnotationRichTextStyle(editor, replyAnnotation);\r\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\r\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[replyAnnotation], 'modify', {}]);\r\n    }\r\n\r\n    setPendingReply('', annotation.Id);\r\n    clearAttachments(annotation.Id);\r\n  };\r\n\r\n  const ifReplyNotAllowed =\r\n    isReadOnly ||\r\n    isReplyDisabled ||\r\n    isReplyDisabledForAnnotation;\r\n\r\n  const replyAreaClass = classNames({\r\n    'reply-area': true,\r\n    unread: isUnread,\r\n  });\r\n\r\n  const replyButtonClass = classNames({\r\n    'reply-button': true,\r\n    disabled: !pendingReplyMap[annotation.Id]\r\n  });\r\n\r\n  const handleNoteTextareaChange = (value) => {\r\n    setPendingReply(value, annotation.Id);\r\n    onPendingReplyChange && onPendingReplyChange();\r\n  };\r\n\r\n  const onBlur = () => {\r\n    setIsFocused(false);\r\n    setCurAnnotId(undefined);\r\n  };\r\n\r\n  const onFocus = () => {\r\n    setIsFocused(true);\r\n    setCurAnnotId(annotation.Id);\r\n  };\r\n\r\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\r\n\r\n  return (ifReplyNotAllowed || !isSelected) ? null : (\r\n    <form onSubmit={postReply} className=\"reply-area-container\">\r\n      {pendingAttachments.length > 0 && (\r\n        <ReplyAttachmentList\r\n          files={pendingAttachments}\r\n          isEditing={true}\r\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\r\n        />\r\n      )}\r\n      <div className=\"reply-area-with-button\">\r\n        <div\r\n          className={replyAreaClass}\r\n          // stop bubbling up otherwise the note will be closed\r\n          // due to annotation deselection\r\n          onMouseDown={(e) => e.stopPropagation()}\r\n        >\r\n          <NoteTextarea\r\n            ref={(el) => {\r\n              textareaRef.current = el;\r\n            }}\r\n            value={pendingReplyMap[annotation.Id]}\r\n            onChange={(value) => handleNoteTextareaChange(value)}\r\n            onSubmit={postReply}\r\n            onBlur={onBlur}\r\n            onFocus={onFocus}\r\n            isReply\r\n          />\r\n        </div>\r\n        <div className=\"reply-button-container\">\r\n          <Button\r\n            img=\"icon-post-reply\"\r\n            className={replyButtonClass}\r\n            onClick={postReply}\r\n            isSubmitType\r\n          />\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nReplyArea.propTypes = propTypes;\r\n\r\nexport default ReplyArea;\r\n","import ReplyArea from './ReplyArea';\r\n\r\nexport default ReplyArea;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Icon from 'components/Icon';\r\nimport NoteContent from 'components/NoteContent';\r\nimport PropTypes from 'prop-types';\r\nimport core from 'core';\r\nimport actions from 'actions';\r\n\r\nconst propTypes = {\r\n  groupAnnotations: PropTypes.array.isRequired,\r\n  isMultiSelectMode: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst NoteGroupSection = ({\r\n  groupAnnotations,\r\n  isMultiSelectMode,\r\n}) => {\r\n  const [t] = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const [isViewingGroupAnnots, setIsViewingGroupAnnots] = useState(false);\r\n\r\n  const upArrow = 'ic_chevron_up_black_24px';\r\n  const downArrow = 'ic_chevron_down_black_24px';\r\n\r\n  const ViewAllAnnotsButton = (\r\n    <div\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsViewingGroupAnnots(true);\r\n      }}\r\n      className=\"text-button\"\r\n    >\r\n      {t('component.noteGroupSection.open')}\r\n      <Icon glyph={downArrow} />\r\n    </div>\r\n  );\r\n  const CloseAllAnnotsButton = (\r\n    <div\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsViewingGroupAnnots(false);\r\n      }}\r\n      className=\"text-button\"\r\n    >\r\n      {t('component.noteGroupSection.close')}\r\n      <Icon glyph={upArrow} />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className=\"group-section\"\r\n    >\r\n      {isViewingGroupAnnots ? CloseAllAnnotsButton : ViewAllAnnotsButton}\r\n      {isViewingGroupAnnots &&\r\n        groupAnnotations.map((groupAnnotation, i) => {\r\n          // Ignore the group primary annotation\r\n          if (i === 0) {\r\n            return null;\r\n          }\r\n          return (\r\n            <div\r\n              key={groupAnnotation.Id}\r\n              className=\"group-child\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                core.selectAnnotation(groupAnnotation);\r\n                core.jumpToAnnotation(groupAnnotation);\r\n                dispatch(actions.openElement('annotationPopup'));\r\n              }}\r\n            >\r\n              <NoteContent\r\n                key={groupAnnotation.Id}\r\n                annotation={groupAnnotation}\r\n                isUnread={false}\r\n                isGroupMember={true}\r\n                isMultiSelectMode={isMultiSelectMode}\r\n              />\r\n            </div>\r\n          );\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nNoteGroupSection.propTypes = propTypes;\r\n\r\nexport default NoteGroupSection;","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\r\nimport core from 'core';\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport { createPortal } from 'react-dom';\r\nimport { getAnnotationPosition } from '../../helpers/getPopupPosition';\r\n\r\nimport './AnnotationNoteConnectorLine.scss';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nconst LineConnectorPortal = ({ children }) => {\r\n  const mount = getRootNode().querySelector('#line-connector-root');\r\n  const el = document.createElement('div');\r\n  el.setAttribute('data-element', 'annotationNoteConnectorLine');\r\n\r\n  useEffect(() => {\r\n    mount.appendChild(el);\r\n    return () => mount.removeChild(el);\r\n  }, [el, mount]);\r\n\r\n  return createPortal(children, el);\r\n};\r\n\r\nconst AnnotationNoteConnectorLine = ({ annotation, noteContainerRef }) => {\r\n  const [\r\n    notePanelWidth,\r\n    lineIsOpen,\r\n    notePanelIsOpen,\r\n    isLineDisabled,\r\n    documentContainerWidth,\r\n    documentContainerHeight,\r\n    activeDocumentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getNotesPanelWidth(state),\r\n      selectors.isElementOpen(state, 'annotationNoteConnectorLine'),\r\n      selectors.isElementOpen(state, 'notesPanel'),\r\n      selectors.isElementDisabled(state, 'annotationNoteConnectorLine'),\r\n      selectors.getDocumentContainerWidth(state),\r\n      selectors.getDocumentContainerHeight(state),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // Right Horizontal Line\r\n  const [rightHorizontalLineWidth, setRightHorizontalLineWidth] = useState(0);\r\n  const [rightHorizontalLineTop, setRightHorizontalLineTop] = useState(0);\r\n  const [rightHorizontalLineRight, setRightHorizontalLineRight] = useState(0);\r\n\r\n  // Left Horizontal Line\r\n  const [leftHorizontalLineWidth, setLeftHorizontalLineWidth] = useState(0);\r\n  const [leftHorizontalLineTop, setLeftHorizontalLineTop] = useState(0);\r\n  const [leftHorizontalLineRight, setLeftHorizontalLineRight] = useState(0);\r\n\r\n  const {\r\n    bottomRight: annotationBottomRight,\r\n    topLeft: annotationTopLeft\r\n  } = getAnnotationPosition(annotation, activeDocumentViewerKey);\r\n\r\n  const getAnnotationLineOffset = useCallback(() => {\r\n    if (annotation.Subject === 'Note') {\r\n      return 4;\r\n    }\r\n    return 15;\r\n  }, [annotation]);\r\n\r\n  useEffect(() => {\r\n    const { scrollTop, scrollLeft } = core.getScrollViewElement(activeDocumentViewerKey);\r\n    const notePanelLeftPadding = 16;\r\n\r\n    const annotWidthInPixels = annotationBottomRight.x - annotationTopLeft.x;\r\n    const annotHeightInPixels = annotationBottomRight.y - annotationTopLeft.y;\r\n\r\n    const viewerWidth = window.isApryseWebViewerWebComponent ? getRootNode().host.clientWidth : window.innerWidth;\r\n    const viewerOffset = window.isApryseWebViewerWebComponent ? getRootNode().host.offsetLeft : 0;\r\n\r\n    setRightHorizontalLineRight(notePanelWidth - notePanelLeftPadding);\r\n    setRightHorizontalLineTop(noteContainerRef.current.getBoundingClientRect().top);\r\n    const lineWidth = viewerWidth + viewerOffset - notePanelWidth - annotationTopLeft.x + notePanelLeftPadding + scrollLeft - annotWidthInPixels;\r\n    const rightHorizontalLineWidthRatio = 0.75;\r\n    setRightHorizontalLineWidth(lineWidth * rightHorizontalLineWidthRatio);\r\n    const noZoomRefPoint = annotation.getNoZoomReferencePoint();\r\n    const noZoomRefShiftX = (annotation.NoZoom && noZoomRefPoint.x) ? noZoomRefPoint.x * annotHeightInPixels : 0;\r\n    setLeftHorizontalLineWidth(lineWidth - rightHorizontalLineWidth - getAnnotationLineOffset() + noZoomRefShiftX);\r\n\r\n    setLeftHorizontalLineRight(notePanelWidth - notePanelLeftPadding + rightHorizontalLineWidth);\r\n\r\n    const noZoomRefShiftY = (annotation.NoZoom && noZoomRefPoint.y) ? noZoomRefPoint.y * annotHeightInPixels : 0;\r\n    setLeftHorizontalLineTop(annotationTopLeft.y + (annotHeightInPixels / 2) - scrollTop - noZoomRefShiftY);\r\n\r\n    const onPageNumberUpdated = () => {\r\n      dispatch(actions.closeElement('annotationNoteConnectorLine'));\r\n    };\r\n\r\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated, undefined, activeDocumentViewerKey);\r\n\r\n    return () => {\r\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated, activeDocumentViewerKey);\r\n    };\r\n  }, [noteContainerRef, notePanelWidth, annotationBottomRight, annotationTopLeft, documentContainerWidth, documentContainerHeight, dispatch, activeDocumentViewerKey]);\r\n\r\n  if (lineIsOpen && notePanelIsOpen && !isLineDisabled) {\r\n    const verticalHeight = Math.abs(rightHorizontalLineTop - leftHorizontalLineTop);\r\n    const horizontalLineHeight = 2;\r\n    // Add HorizontalLineHeight of 2px when annot is above note to prevent little gap between lines\r\n    const verticalTop = rightHorizontalLineTop > leftHorizontalLineTop ? leftHorizontalLineTop + horizontalLineHeight : rightHorizontalLineTop;\r\n\r\n    return (\r\n      <LineConnectorPortal>\r\n        <div className=\"horizontalLine\" style={{ width: rightHorizontalLineWidth, right: rightHorizontalLineRight, top: rightHorizontalLineTop }} />\r\n        <div className=\"verticalLine\" style={{ height: verticalHeight, top: verticalTop, right: rightHorizontalLineRight + rightHorizontalLineWidth }} />\r\n        <div className=\"horizontalLine\" style={{ width: leftHorizontalLineWidth, right: leftHorizontalLineRight, top: leftHorizontalLineTop }}>\r\n          <div className=\"arrowHead\" />\r\n        </div>\r\n      </LineConnectorPortal>);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default AnnotationNoteConnectorLine;\r\n","import AnnotationNoteConnectorLine from './AnnotationNoteConnectorLine';\r\n\r\nexport default AnnotationNoteConnectorLine;","import React, { useEffect, useRef, useContext, useState, useCallback } from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport NoteContext from 'components/Note/Context';\r\nimport NoteContent from 'components/NoteContent';\r\nimport ReplyArea from 'components/Note/ReplyArea';\r\nimport NoteGroupSection from 'components/Note/NoteGroupSection';\r\nimport Button from 'components/Button';\r\n\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport core from 'core';\r\nimport AnnotationNoteConnectorLine from 'components/AnnotationNoteConnectorLine';\r\nimport useDidUpdate from 'hooks/useDidUpdate';\r\nimport DataElements from 'src/constants/dataElement';\r\n\r\nimport './Note.scss';\r\nimport getRootNode from 'helpers/getRootNode';\r\n\r\nconst propTypes = {\r\n  annotation: PropTypes.object.isRequired,\r\n  isMultiSelected: PropTypes.bool,\r\n  isMultiSelectMode: PropTypes.bool,\r\n  isInNotesPanel: PropTypes.bool,\r\n  handleMultiSelect: PropTypes.func,\r\n};\r\n\r\nlet currId = 0;\r\n\r\nconst Note = ({\r\n  annotation,\r\n  isMultiSelected,\r\n  isMultiSelectMode,\r\n  isInNotesPanel,\r\n  handleMultiSelect,\r\n}) => {\r\n  const {\r\n    isSelected,\r\n    resize,\r\n    pendingEditTextMap,\r\n    isContentEditable,\r\n    isDocumentReadOnly,\r\n    isExpandedFromSearch,\r\n    // documentViewerKey,\r\n  } = useContext(NoteContext);\r\n  const containerRef = useRef();\r\n  const containerHeightRef = useRef();\r\n  const [isEditingMap, setIsEditingMap] = useState({});\r\n  const ids = useRef([]);\r\n  const dispatch = useDispatch();\r\n  const [t] = useTranslation();\r\n  const unreadReplyIdSet = new Set();\r\n\r\n  const [\r\n    noteTransformFunction,\r\n    customNoteSelectionFunction,\r\n    unreadAnnotationIdSet,\r\n    shouldExpandCommentThread,\r\n    isRightClickAnnotationPopupEnabled,\r\n    documentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getNoteTransformFunction(state),\r\n      selectors.getCustomNoteSelectionFunction(state),\r\n      selectors.getUnreadAnnotationIdSet(state),\r\n      selectors.isCommentThreadExpansionEnabled(state),\r\n      selectors.isRightClickAnnotationPopupEnabled(state),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n\r\n  const replies = annotation\r\n    .getReplies()\r\n    .sort((a, b) => a['DateCreated'] - b['DateCreated']);\r\n\r\n  replies.filter((r) => unreadAnnotationIdSet.has(r.Id)).forEach((r) => unreadReplyIdSet.add(r.Id));\r\n\r\n  useEffect(() => {\r\n    const annotationChangedListener = (annotations, action) => {\r\n      if (action === 'delete') {\r\n        annotations.forEach((annot) => {\r\n          if (unreadAnnotationIdSet.has(annot.Id)) {\r\n            dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annot.Id }));\r\n          }\r\n        });\r\n      }\r\n    };\r\n    core.addEventListener('annotationChanged', annotationChangedListener, undefined, documentViewerKey);\r\n\r\n    return () => {\r\n      core.removeEventListener('annotationChanged', annotationChangedListener, documentViewerKey);\r\n    };\r\n  }, [unreadAnnotationIdSet]);\r\n\r\n  useEffect(() => {\r\n    const prevHeight = containerHeightRef.current;\r\n    const currHeight = containerRef.current.getBoundingClientRect().height;\r\n    containerHeightRef.current = currHeight;\r\n\r\n    // have a prevHeight check here because we don't want to call resize on mount\r\n    // use Math.round because in some cases in IE11 these two numbers will differ in just 0.00001\r\n    // and we don't want call resize in this case\r\n    if (prevHeight && Math.round(prevHeight) !== Math.round(currHeight)) {\r\n      resize();\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (noteTransformFunction) {\r\n      const notesPanelElement = getRootNode().getElementsByClassName('NotesPanel')[0];\r\n      ids.current.forEach((id) => {\r\n        const child = notesPanelElement.querySelector(`[data-webviewer-custom-element=${id}]`);\r\n        if (child) {\r\n          child.parentNode.removeChild(child);\r\n        }\r\n      });\r\n\r\n      ids.current = [];\r\n\r\n      const state = {\r\n        annotation,\r\n        isSelected,\r\n      };\r\n\r\n      noteTransformFunction(containerRef.current, state, (...params) => {\r\n        const element = document.createElement(...params);\r\n        const id = `custom-element-${currId}`;\r\n        currId++;\r\n        ids.current.push(id);\r\n        element.setAttribute('data-webviewer-custom-element', id);\r\n        element.addEventListener('mousedown', (e) => {\r\n          e.stopPropagation();\r\n        });\r\n\r\n        return element;\r\n      });\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    // If this is not a new one, rebuild the isEditing map\r\n    const pendingText = pendingEditTextMap[annotation.Id];\r\n    if (pendingText !== '' && isContentEditable && !isDocumentReadOnly) {\r\n      setIsEditing(true, 0);\r\n    }\r\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing, annotation, isMultiSelectMode]);\r\n\r\n  useDidUpdate(() => {\r\n    if (isDocumentReadOnly || !isContentEditable) {\r\n      setIsEditing(false, 0);\r\n    }\r\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing]);\r\n\r\n  const handleNoteClick = (e) => {\r\n    // stop bubbling up otherwise the note will be closed\r\n    // due to annotation deselection\r\n    e && e.stopPropagation();\r\n\r\n    if (unreadAnnotationIdSet.has(annotation.Id)) {\r\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annotation.Id }));\r\n    }\r\n\r\n    customNoteSelectionFunction && customNoteSelectionFunction(annotation);\r\n    if (!isSelected) {\r\n      core.deselectAllAnnotations(documentViewerKey);\r\n\r\n      // Need this delay to ensure all other event listeners fire before we open the line\r\n      setTimeout(() => dispatch(actions.openElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE)), 300);\r\n    }\r\n    if (isInNotesPanel) {\r\n      core.selectAnnotation(annotation, documentViewerKey);\r\n      core.jumpToAnnotation(annotation, documentViewerKey);\r\n      if (!isRightClickAnnotationPopupEnabled) {\r\n        dispatch(actions.openElement(DataElements.ANNOTATION_POPUP));\r\n      }\r\n    }\r\n  };\r\n\r\n  const hasUnreadReplies = unreadReplyIdSet.size > 0;\r\n\r\n  const noteClass = classNames({\r\n    Note: true,\r\n    expanded: isSelected,\r\n    'is-multi-selected': isMultiSelected,\r\n    unread: unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies,\r\n  });\r\n\r\n  const repliesClass = classNames({\r\n    replies: true,\r\n    hidden: !isSelected,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Must also restore the isEdit for  any replies, in case someone was editing a\r\n    // reply when a comment was placed above\r\n    if (!isMultiSelectMode) {\r\n      replies.forEach((reply, index) => {\r\n        const pendingText = pendingEditTextMap[reply.Id];\r\n        if ((pendingText !== '' && typeof pendingText !== 'undefined') && isSelected) {\r\n          setIsEditing(true, 1 + index);\r\n        }\r\n      });\r\n    }\r\n  }, [isSelected, isMultiSelectMode]);\r\n\r\n  useEffect(() => {\r\n    if (isMultiSelectMode) {\r\n      setIsEditing(false, 0);\r\n    }\r\n  }, [isMultiSelectMode]);\r\n\r\n  const showReplyArea = !Object.values(isEditingMap).some((val) => val);\r\n\r\n  const handleNoteKeydown = (e) => {\r\n    // Click if enter or space is pressed and is current target.\r\n    const isNote = e.target === e.currentTarget;\r\n    if (isNote && (e.key === 'Enter' || e.key === ' ')) {\r\n      e.preventDefault(); // Stop from being entered in field\r\n      handleNoteClick();\r\n    }\r\n  };\r\n\r\n  const handleReplyClicked = (reply) => {\r\n    // set clicked reply as read\r\n    if (unreadReplyIdSet.has(reply.Id)) {\r\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: reply.Id }));\r\n      core.getAnnotationManager(documentViewerKey).selectAnnotation(reply);\r\n    }\r\n  };\r\n\r\n  const markAllRepliesRead = () => {\r\n    // set all replies to read state if user starts to type in reply textarea\r\n    if (unreadReplyIdSet.size > 0) {\r\n      const repliesSetToRead = replies.filter((r) => unreadReplyIdSet.has(r.Id));\r\n      core.getAnnotationManager(documentViewerKey).selectAnnotations(repliesSetToRead);\r\n      repliesSetToRead.forEach((r) => dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: r.Id })));\r\n    }\r\n  };\r\n\r\n  const setIsEditing = useCallback(\r\n    (isEditing, index) => {\r\n      setIsEditingMap((map) => ({\r\n        ...map,\r\n        [index]: isEditing,\r\n      }));\r\n    },\r\n    [setIsEditingMap],\r\n  );\r\n\r\n  const groupAnnotations = core.getGroupAnnotations(annotation, documentViewerKey);\r\n  const isGroup = groupAnnotations.length > 1;\r\n  let isCaretAnnotation = false;\r\n  isCaretAnnotation = groupAnnotations.some((annotation) => annotation instanceof window.Core.Annotations.CaretAnnotation);\r\n  if (isCaretAnnotation) {\r\n    isMultiSelectMode = false;\r\n    isMultiSelected = false;\r\n  }\r\n  // apply unread reply style to replyArea if the last reply is unread\r\n  const lastReplyId = replies.length > 0 ? replies[replies.length - 1].Id : null;\r\n\r\n  return (\r\n    <div\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      ref={containerRef}\r\n      className={noteClass}\r\n      onClick={handleNoteClick}\r\n      onKeyDown={handleNoteKeydown}\r\n      id={`note_${annotation.Id}`}\r\n    >\r\n      <NoteContent\r\n        noteIndex={0}\r\n        annotation={annotation}\r\n        setIsEditing={setIsEditing}\r\n        isEditing={isEditingMap[0]}\r\n        isNonReplyNoteRead={!unreadAnnotationIdSet.has(annotation.Id)}\r\n        isUnread={unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies}\r\n        handleMultiSelect={handleMultiSelect}\r\n        isMultiSelected={isMultiSelected}\r\n        isMultiSelectMode={isMultiSelectMode}\r\n      />\r\n      {(isSelected || isExpandedFromSearch || shouldExpandCommentThread) && (\r\n        <>\r\n          {replies.length > 0 && (\r\n            <div className={repliesClass}>\r\n              {hasUnreadReplies && (\r\n                <Button\r\n                  dataElement=\"markAllReadButton\"\r\n                  className=\"mark-all-read-button\"\r\n                  label={t('action.markAllRead')}\r\n                  onClick={markAllRepliesRead}\r\n                />\r\n              )}\r\n              {replies.map((reply, i) => (\r\n                <div className=\"reply\" id={`note_reply_${reply.Id}`} key={`note_reply_${reply.Id}`}>\r\n                  <NoteContent\r\n                    noteIndex={i + 1}\r\n                    key={reply.Id}\r\n                    annotation={reply}\r\n                    setIsEditing={setIsEditing}\r\n                    isEditing={isEditingMap[i + 1]}\r\n                    onReplyClicked={handleReplyClicked}\r\n                    isUnread={unreadAnnotationIdSet.has(reply.Id)}\r\n                    handleMultiSelect={handleMultiSelect}\r\n                    isMultiSelected={isMultiSelected}\r\n                    isMultiSelectMode={isMultiSelectMode}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          {isGroup &&\r\n            <NoteGroupSection\r\n              groupAnnotations={groupAnnotations}\r\n              isMultiSelectMode={isMultiSelectMode}\r\n            />}\r\n          {showReplyArea && !isMultiSelectMode && (\r\n            <ReplyArea\r\n              isUnread={lastReplyId && unreadAnnotationIdSet.has(lastReplyId)}\r\n              onPendingReplyChange={markAllRepliesRead}\r\n              annotation={annotation}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n      {isSelected && isInNotesPanel && <AnnotationNoteConnectorLine annotation={annotation} noteContainerRef={containerRef} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nNote.propTypes = propTypes;\r\n\r\nexport default Note;\r\n","import Note from './Note';\r\n\r\nexport default Note;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Measure from 'react-measure';\r\nimport { useTranslation } from 'react-i18next';\r\nimport StylePopup from 'components/StylePopup';\r\nimport ActionButton from 'components/ActionButton';\r\nimport core from 'core';\r\nimport getClassName from 'helpers/getClassName';\r\nimport setToolStyles from 'helpers/setToolStyles';\r\nimport { isMobile } from 'helpers/device';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\nimport DataElements from 'constants/dataElement';\r\n\r\nimport './AnnotationStylePopup.scss';\r\n\r\nconst propTypes = {\r\n  annotations: PropTypes.array.isRequired,\r\n  style: PropTypes.object.isRequired,\r\n  properties: PropTypes.object.isRequired,\r\n  isRedaction: PropTypes.bool,\r\n  isFreeText: PropTypes.bool,\r\n  isEllipse: PropTypes.bool,\r\n  hasBackToMenu: PropTypes.bool,\r\n  onBackToMenu: PropTypes.func,\r\n};\r\n\r\nconst AnnotationStylePopup = (props) => {\r\n  const {\r\n    annotations,\r\n    style,\r\n    isRedaction,\r\n    isFreeText,\r\n    isEllipse,\r\n    isMeasure,\r\n    colorMapKey,\r\n    showLineStyleOptions,\r\n    properties,\r\n    hideSnapModeCheckbox,\r\n    onResize,\r\n    hasBackToMenu,\r\n    onBackToMenu\r\n  } = props;\r\n\r\n  const [\r\n    isDisabled,\r\n    isToolDefaultStyleUpdateFromAnnotationPopupEnabled\r\n  ] = useSelector((state) => [\r\n    selectors.isElementDisabled(state, DataElements.ANNOTATION_STYLE_POPUP),\r\n    selectors.isToolDefaultStyleUpdateFromAnnotationPopupEnabled(state)\r\n  ]);\r\n\r\n  const dispatch = useDispatch();\r\n  const [t] = useTranslation();\r\n\r\n  const adjustFreeTextBoundingBox = (annotation) => {\r\n    const { FreeTextAnnotation } = window.Core.Annotations;\r\n    if (annotation instanceof FreeTextAnnotation && annotation.getAutoSizeType() !== FreeTextAnnotation.AutoSizeTypes.NONE) {\r\n      const doc = core.getDocument();\r\n      const pageNumber = annotation['PageNumber'];\r\n      const pageInfo = doc.getPageInfo(pageNumber);\r\n      const pageMatrix = doc.getPageMatrix(pageNumber);\r\n      const pageRotation = doc.getPageRotation(pageNumber);\r\n      annotation.fitText(pageInfo, pageMatrix, pageRotation);\r\n    }\r\n  };\r\n\r\n  const handleSliderChange = (property, value) => {\r\n    const annotationManager = core.getAnnotationManager();\r\n    annotations.forEach((annotation) => {\r\n      annotation[property] = value;\r\n      annotationManager.redrawAnnotation(annotation);\r\n    });\r\n  };\r\n\r\n  const handlePropertyChange = (property, value) => {\r\n    annotations.forEach((annotation) => {\r\n      core.setAnnotationStyles(annotation, {\r\n        [property]: value,\r\n      });\r\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\r\n        setToolStyles(annotation.ToolName, property, value);\r\n      }\r\n      if (property === 'FontSize' || property === 'Font') {\r\n        adjustFreeTextBoundingBox(annotation);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleStyleChange = (property, value) => {\r\n    annotations.forEach((annotation) => {\r\n      core.setAnnotationStyles(annotation, {\r\n        [property]: value,\r\n      });\r\n\r\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\r\n        setToolStyles(annotation.ToolName, property, value);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleRichTextStyleChange = (property, value) => {\r\n    annotations.forEach((annotation) => {\r\n      core.updateAnnotationRichTextStyle(annotation, { [property]: value });\r\n    });\r\n  };\r\n\r\n  const handleLineStyleChange = (section, value) => {\r\n    annotations.forEach((annotation) => {\r\n      let lineStyle = '';\r\n      if (section === 'start') {\r\n        annotation.setStartStyle(value);\r\n        lineStyle = 'StartLineStyle';\r\n      } else if (section === 'end') {\r\n        annotation.setEndStyle(value);\r\n        lineStyle = 'EndLineStyle';\r\n      } else if (section === 'middle') {\r\n        const dashes = value.split(',');\r\n        const style = dashes.shift();\r\n        annotation['Style'] = style;\r\n        annotation['Dashes'] = dashes;\r\n        lineStyle = 'StrokeStyle';\r\n      }\r\n\r\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\r\n        setToolStyles(annotation.ToolName, lineStyle, value);\r\n      }\r\n\r\n      core.getAnnotationManager().redrawAnnotation(annotation);\r\n    });\r\n\r\n    core.getAnnotationManager().trigger('annotationChanged', [annotations, 'modify', {}]);\r\n  };\r\n\r\n  const handleClick = (e) => {\r\n    if (isMobile() && e.target === e.currentTarget) {\r\n      dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\r\n    }\r\n  };\r\n\r\n  const handleResize = () => {\r\n    onResize && onResize();\r\n  };\r\n\r\n  const className = getClassName('Popup AnnotationStylePopup', props);\r\n\r\n  return isDisabled ? null : (\r\n    <Measure\r\n      onResize={handleResize}\r\n    >\r\n      {({ measureRef }) => (\r\n        <div\r\n          className={className}\r\n          data-element={DataElements.ANNOTATION_STYLE_POPUP}\r\n          onClick={handleClick}\r\n          ref={measureRef}\r\n        >\r\n          {hasBackToMenu &&\r\n            <div\r\n              className=\"back-to-menu-container\"\r\n              data-element={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER}\r\n            >\r\n              <ActionButton\r\n                className=\"back-to-menu-button\"\r\n                dataElement={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON}\r\n                label={t('action.backToMenu')}\r\n                img=\"icon-chevron-left\"\r\n                onClick={onBackToMenu}\r\n              />\r\n            </div>\r\n          }\r\n          {/* Do not show checkbox for ellipse as snap mode does not exist for it */}\r\n          <StylePopup\r\n            hideSnapModeCheckbox={hideSnapModeCheckbox}\r\n            colorMapKey={colorMapKey}\r\n            style={style}\r\n            isFreeText={isFreeText}\r\n            isEllipse={isEllipse}\r\n            isMeasure={isMeasure}\r\n            onStyleChange={handleStyleChange}\r\n            onSliderChange={handleSliderChange}\r\n            onPropertyChange={handlePropertyChange}\r\n            disableSeparator\r\n            properties={properties}\r\n            onRichTextStyleChange={handleRichTextStyleChange}\r\n            isRedaction={isRedaction}\r\n            showLineStyleOptions={showLineStyleOptions}\r\n            onLineStyleChange={handleLineStyleChange}\r\n          />\r\n        </div>\r\n      )}\r\n    </Measure>\r\n  );\r\n};\r\n\r\nAnnotationStylePopup.propTypes = propTypes;\r\n\r\nexport default AnnotationStylePopup;\r\n","import AnnotationStylePopup from './AnnotationStylePopup';\r\n\r\nexport default AnnotationStylePopup;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './ListSeparator.scss';\r\n\r\nconst propTypes = {\r\n  renderContent: PropTypes.func,\r\n  children: PropTypes.node,\r\n};\r\n\r\nconst ListSeparator = (function(props) {\r\n  const content = props.renderContent ? props.renderContent() : props.children;\r\n  return <div className=\"ListSeparator\">{content}</div>;\r\n});\r\n\r\nListSeparator.propTypes = propTypes;\r\n\r\nexport default React.memo(ListSeparator);\r\n","import ListSeparator from './ListSeparator';\r\n\r\nexport default ListSeparator;","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAreaMultiSelect.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.multi-reply-place-holder{height:100px}.reply-area-multi-container{border-top:1px solid var(--divider);display:flex;flex-direction:column;width:100%;position:absolute;bottom:0;z-index:100;background:var(--panel-background)}.reply-area-multi-container form{width:100%;display:flex}.reply-area-multi-container .reply-area-multi-header{display:flex;flex-direction:row;margin-left:16px;margin-top:28px;position:relative;justify-content:space-between}.reply-area-multi-container .reply-area-multi-header .title{font-size:13px;font-weight:700;display:flex;align-items:center}.reply-area-multi-container .reply-area-multi-header .close-icon-container{display:flex;align-items:center;padding-right:12px;cursor:pointer;position:relative;top:1px}.reply-area-multi-container .reply-area-multi-header .close-icon-container .close-icon{width:22px;height:22px}.reply-area-multi-container .reply-button-container{display:flex;justify-content:flex-end;flex-direction:column}.reply-area-multi-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-multi-container .reply-button,html:not([data-tabbing=true]) .reply-area-multi-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-multi-container .reply-button{width:80px}}.reply-area-multi-container .reply-button:hover{background:var(--blue-1)}.reply-area-multi-container .reply-button.disabled{cursor:not-allowed}.reply-area-multi-container .reply-area{position:relative;flex:1;margin:13px 17px 12px 16px;border-radius:4px;align-items:center;background:var(--component-background)}.reply-area-multi-container .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-multi-container .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-multi-container .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-multi-container .add-attachment{display:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MultiStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".multi-style-container{border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);position:relative;right:20px;bottom:52px;pointer-events:auto}.multi-style-container *{box-sizing:border-box}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MultiSelectControls.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".notes-panel-container .buttons-container{display:flex;grid-column-gap:8px;-moz-column-gap:8px;column-gap:8px;justify-content:space-between}.notes-panel-container .buttons-container .Button{height:28px;width:28px}.notes-panel-container .buttons-container .Button:hover:enabled{background:var(--view-header-button-hover)}.notes-panel-container .buttons-container .Button.active{background:var(--view-header-button-active)}.notes-panel-container .buttons-container .Button.active .Icon{color:var(--view-header-icon-active-fill)}.notes-panel-container .multi-select-footer{background:var(--panel-background);display:flex;border-top:1px solid #cfd4da;margin-top:auto;height:72px;align-items:center;justify-content:center;position:absolute;bottom:0;width:100%;z-index:100}.notes-panel-container .multi-select-footer .close-container{margin-top:auto;right:10px;position:absolute}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotesPanelHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".comments-counter{height:19px;margin-top:24px;margin-bottom:12px;font-size:16px}.comments-counter span{font-weight:700}[data-element=notesPanelHeader]{padding-right:18px}[data-element=notesPanelHeader] .buttons-container{display:flex;grid-column-gap:8px;-moz-column-gap:8px;column-gap:8px;justify-content:space-between}[data-element=notesPanelHeader] .buttons-container .Button{height:28px;width:28px;cursor:pointer}[data-element=notesPanelHeader] .buttons-container .Button:hover:enabled{background:var(--view-header-button-hover)}[data-element=notesPanelHeader] .buttons-container .Button.active{background:var(--view-header-button-active)}[data-element=notesPanelHeader] .buttons-container .Button.active .Icon{color:var(--view-header-icon-active-fill)}[data-element=notesPanelHeader] .sort-row{display:flex;justify-content:space-between;margin-bottom:16px}[data-element=notesPanelHeader] .sort-row .sort-container{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;align-self:flex-end}[data-element=notesPanelHeader] .sort-row .sort-container .label{margin-right:8px}[data-element=notesPanelHeader] .sort-row .sort-container .picked-option{text-align:left}[data-element=notesPanelHeader] .input-container{display:flex;position:relative;flex:1}[data-element=notesPanelHeader] .input-container input{width:100%;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding:4px 8px 6px}[data-element=notesPanelHeader] .input-container input:focus{outline:none;border:1px solid var(--focus-border)}[data-element=notesPanelHeader] .input-container input::-moz-placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container input:-ms-input-placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container input::placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container .input-button{cursor:pointer;background:var(--primary-button);border-radius:4px;height:100%;width:40px;display:flex;align-items:center;justify-content:center;position:absolute;bottom:0;right:0}[data-element=notesPanelHeader] .input-container .input-button .Icon{width:20px;height:20px}[data-element=notesPanelHeader] .input-container .input-button svg{color:var(--primary-button-text)}[data-element=notesPanelHeader] .input-container .input-button:hover{background:var(--primary-button-hover)}[data-element=notesPanelHeader] .divider{height:1px;width:100%;background:var(--divider);margin:16px 0}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotesPanel.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.notes-panel-container{z-index:65;background-color:var(--panel-background);display:flex;flex-direction:row;position:relative;overflow:hidden}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{z-index:95}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{z-index:95}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{border-left:1px solid var(--side-panel-border)}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{border-left:1px solid var(--side-panel-border)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}.notes-panel-container .NotesPanel{padding-left:16px;padding-bottom:0;display:flex;flex-direction:column;position:relative;padding-top:16px}.notes-panel-container .NotesPanel .close-container{display:flex;align-items:center;justify-content:flex-end}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .close-container{height:64px;padding-right:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .close-container{height:64px;padding-right:12px}}.notes-panel-container .NotesPanel .close-container .close-icon-container{display:flex;align-items:center;cursor:pointer}.notes-panel-container .NotesPanel .close-container .close-icon-container .close-icon{width:24px;height:24px}.notes-panel-container .NotesPanel .multi-select-place-holder{height:72px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.notes-panel-container .NotesPanel .reply-area-container .reply-button{width:28px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel{width:100%;min-width:100%;padding-top:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel{width:100%;min-width:100%;padding-top:0}}.notes-panel-container .NotesPanel .no-annotations{display:flex;flex-direction:column;align-items:center}.notes-panel-container .NotesPanel .no-annotations .msg{text-align:center}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .no-annotations .msg{line-height:15px;width:146px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .no-annotations .msg{line-height:15px;width:146px}}.notes-panel-container .NotesPanel .no-annotations .empty-icon,.notes-panel-container .NotesPanel .no-annotations .empty-icon svg{width:65px;height:83px}.notes-panel-container .NotesPanel .no-annotations .empty-icon *{fill:var(--gray-5);color:var(--gray-5)}.notes-panel-container .NotesPanel .normal-notes-container,.notes-panel-container .NotesPanel .virtualized-notes-container{margin-top:10px;flex:1;padding-right:18px}.notes-panel-container .NotesPanel .normal-notes-container{overflow:auto;overflow:overlay}.notes-panel-container .NotesPanel .note-wrapper:first-child .ListSeparator{margin-top:0;word-break:break-word}.notes-panel-container .NotesPanel .no-results{display:flex;flex-direction:column;align-items:center;padding-right:18px}.notes-panel-container .NotesPanel .no-results .msg{text-align:center}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .no-results .msg{line-height:15px;width:92px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .no-results .msg{line-height:15px;width:92px}}.notes-panel-container .NotesPanel .no-results .empty-icon,.notes-panel-container .NotesPanel .no-results .empty-icon svg{width:65px;height:83px}.notes-panel-container .NotesPanel .no-results .empty-icon *{fill:var(--border);color:var(--border)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useState, useEffect, useRef, useImperativeHandle } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Measure from 'react-measure';\r\nimport { CellMeasurer, CellMeasurerCache, List } from 'react-virtualized';\r\n\r\nconst propTypes = {\r\n  notes: PropTypes.array.isRequired,\r\n  children: PropTypes.func.isRequired,\r\n  onScroll: PropTypes.func.isRequired,\r\n  initialScrollTop: PropTypes.number.isRequired,\r\n  selectedIndex: PropTypes.number,\r\n  sortStrategy: PropTypes.string,\r\n};\r\n\r\nconst cache = new CellMeasurerCache({ defaultHeight: 50, fixedWidth: true });\r\n\r\nconst VirtualizedList = React.forwardRef(\r\n  ({ notes, children, onScroll, initialScrollTop, selectedIndex, sortStrategy }, forwardedRef) => {\r\n    const listRef = useRef();\r\n    const [offset, setOffset] = useState(0);\r\n    const [dimension, setDimension] = useState({ width: 0, height: 0 });\r\n    let prevWindowHeight = window.innerHeight;\r\n\r\n    useImperativeHandle(forwardedRef, () => ({\r\n      scrollToPosition: (scrollTop) => {\r\n        listRef.current.scrollToPosition(scrollTop);\r\n      },\r\n      scrollToRow: (index) => {\r\n        listRef.current.scrollToRow(index);\r\n      },\r\n    }));\r\n\r\n    useEffect(() => {\r\n      listRef.current.scrollToPosition(initialScrollTop);\r\n    }, [initialScrollTop]);\r\n\r\n    useEffect(() => {\r\n      cache.clearAll();\r\n      listRef?.current?.measureAllRows();\r\n\r\n      if (selectedIndex !== -1) {\r\n        listRef.current?.scrollToRow(selectedIndex);\r\n      }\r\n    }, [selectedIndex]);\r\n\r\n    useEffect(() => {\r\n      cache.clearAll();\r\n      listRef?.current?.measureAllRows();\r\n      listRef?.current?.forceUpdateGrid();\r\n    }, [notes.length, sortStrategy]);\r\n\r\n    useEffect(() => {\r\n      const windowResizeHandler = () => {\r\n        const diff = window.innerHeight - prevWindowHeight;\r\n        if (diff) {\r\n          // List height never resizes down after exiting fullscreen\r\n          if (window.innerHeight < prevWindowHeight) {\r\n            setOffset(diff);\r\n          }\r\n          prevWindowHeight = window.innerHeight;\r\n        }\r\n      };\r\n      window.addEventListener('resize', windowResizeHandler);\r\n\r\n      return () => {\r\n        window.removeEventListener('resize', windowResizeHandler);\r\n      };\r\n    });\r\n\r\n    const _resize = (index) => {\r\n      cache.clear(index);\r\n      listRef.current?.recomputeRowHeights(index);\r\n    };\r\n\r\n    const handleScroll = ({ scrollTop }) => {\r\n      onScroll(scrollTop);\r\n    };\r\n\r\n    /* eslint-disable react/prop-types */\r\n    const rowRenderer = ({ index, key, parent, style }) => {\r\n      const currNote = notes[index];\r\n\r\n      // Padding added to the right since virtualized list lets it get cut off on the right\r\n      return (\r\n        <CellMeasurer\r\n          key={`${key}${currNote.Id}`}\r\n          cache={cache}\r\n          columnIndex={0}\r\n          parent={parent}\r\n          rowIndex={index}\r\n        >\r\n          {({ measure }) => (\r\n            <div style={{ ...style, paddingRight: '12px' }}>\r\n              {children(notes, index, () => {\r\n                _resize(index);\r\n                measure();\r\n              })}\r\n            </div>)}\r\n        </CellMeasurer>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <Measure bounds offset onResize={({ bounds }) => {\r\n        setDimension({\r\n          ...bounds,\r\n          // Override height and compensate for extra size\r\n          height: bounds.height + offset * 2,\r\n        });\r\n        setOffset(0);\r\n      }}\r\n      >\r\n        {({ measureRef }) => (\r\n          <div ref={measureRef} className=\"virtualized-notes-container\">\r\n            <List\r\n              deferredMeasurementCache={cache}\r\n              style={{ outline: 'none' }}\r\n              height={dimension.height - offset}\r\n              width={dimension.width}\r\n              overscanRowCount={10}\r\n              ref={listRef}\r\n              rowCount={notes.length}\r\n              rowHeight={cache.rowHeight}\r\n              rowRenderer={rowRenderer}\r\n              onScroll={handleScroll}\r\n            />\r\n          </div>\r\n        )}\r\n      </Measure>\r\n    );\r\n  },\r\n);\r\n\r\nVirtualizedList.displayName = 'VirtualizedList';\r\nVirtualizedList.propTypes = propTypes;\r\n\r\nexport default VirtualizedList;\r\n","import VirtualizedList from './VirtualizedList';\r\n\r\nexport default VirtualizedList;","import React, { useEffect, useRef, useImperativeHandle } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst propTypes = {\r\n  notes: PropTypes.array.isRequired,\r\n  children: PropTypes.func.isRequired,\r\n  onScroll: PropTypes.func.isRequired,\r\n  initialScrollTop: PropTypes.number.isRequired,\r\n};\r\n\r\nconst NormalList = React.forwardRef(\r\n  ({ notes, children, onScroll, initialScrollTop }, forwardedRef) => {\r\n    const listRef = useRef();\r\n\r\n    useImperativeHandle(forwardedRef, () => ({\r\n      scrollToPosition: (scrollTop) => {\r\n        listRef.current.scrollTop = scrollTop;\r\n      },\r\n      scrollToRow: (index) => {\r\n        const parent = listRef.current;\r\n        const child = parent.children[index];\r\n\r\n        const parentRect = parent.getBoundingClientRect();\r\n        const childRect = child.getBoundingClientRect();\r\n\r\n        const isViewable =\r\n          childRect.top >= parentRect.top &&\r\n          childRect.top <= parentRect.top + parent.clientHeight;\r\n        if (!isViewable) {\r\n          parent.scrollTop = childRect.top + parent.scrollTop - parentRect.top;\r\n        }\r\n      },\r\n    }));\r\n\r\n    useEffect(() => {\r\n      listRef.current.scrollTop = initialScrollTop;\r\n    }, [initialScrollTop]);\r\n\r\n    const handleScroll = (e) => {\r\n      onScroll(e.target.scrollTop);\r\n    };\r\n\r\n    return (\r\n      <div\r\n        ref={listRef}\r\n        className=\"normal-notes-container\"\r\n        onScroll={handleScroll}\r\n        role=\"list\"\r\n      >\r\n        {notes.map((currNote, index) => (\r\n          <React.Fragment key={`${index}_${currNote.Id}`}>\r\n            {children(notes, index)}\r\n          </React.Fragment>\r\n        ))}\r\n      </div>\r\n    );\r\n  },\r\n);\r\n\r\nNormalList.displayName = 'NormalList';\r\nNormalList.propTypes = propTypes;\r\n\r\nexport default NormalList;\r\n","import NormalList from './NormalList';\r\n\r\nexport default NormalList;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useSelector, shallowEqual } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport NoteTextarea from 'components/NoteTextarea';\r\nimport classNames from 'classnames';\r\nimport core from 'core';\r\nimport mentionsManager from 'helpers/MentionsManager';\r\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\r\nimport selectors from 'selectors';\r\nimport Button from 'src/components/Button';\r\nimport Icon from 'components/Icon';\r\n\r\nimport './ReplyAreaMultiSelect.scss';\r\n\r\n// a component that contains the reply textarea, the reply button and the cancel button\r\nconst ReplyArea = ({ annotations, onSubmit, onClose }) => {\r\n  const [\r\n    isMentionEnabled,\r\n    activeDocumentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getIsMentionEnabled(state),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual\r\n  );\r\n\r\n  const [pendingReply, setPendingReply] = useState('');\r\n  const [t] = useTranslation();\r\n  const textareaRef = useRef();\r\n\r\n  useEffect(() => {\r\n    textareaRef.current.focus();\r\n  }, []);\r\n\r\n  const postReply = (e) => {\r\n    // prevent the textarea from blurring out\r\n    e.preventDefault();\r\n\r\n    const editor = textareaRef.current.getEditor();\r\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\r\n\r\n    if (!replyText.trim()) {\r\n      return;\r\n    }\r\n    annotations.forEach((annotation) => {\r\n      if (isMentionEnabled) {\r\n        const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\r\n        core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\r\n        setAnnotationRichTextStyle(editor, replyAnnotation);\r\n      } else {\r\n        // TODO: This is bugged and does not work. createAnnotationReply\r\n        // does not return an annotation\r\n        const replyAnnotation = core.createAnnotationReply(annotation, replyText, activeDocumentViewerKey);\r\n        setAnnotationRichTextStyle(editor, replyAnnotation);\r\n      }\r\n    });\r\n\r\n    onSubmit();\r\n  };\r\n\r\n  const replyAreaClass = classNames({\r\n    'reply-area': true,\r\n  });\r\n\r\n  const handleNoteTextareaChange = (value) => {\r\n    setPendingReply(value);\r\n  };\r\n\r\n  return (\r\n    <div className='reply-area-multi-container'>\r\n      <div\r\n        className=\"reply-area-multi-header\"\r\n      >\r\n        <div className=\"title\">\r\n          {t('action.multiReplyAnnotations', { count: annotations.length })}\r\n        </div>\r\n        <div\r\n          className=\"close-icon-container\"\r\n          onClick={onClose}\r\n        >\r\n          <Icon\r\n            glyph=\"ic_close_black_24px\"\r\n            className=\"close-icon\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <form onSubmit={postReply} >\r\n        <div\r\n          className={replyAreaClass}\r\n          // stop bubbling up otherwise the note will be closed\r\n          // due to annotation deselection\r\n          onMouseDown={(e) => e.stopPropagation()}\r\n        >\r\n          <NoteTextarea\r\n            ref={(el) => {\r\n              textareaRef.current = el;\r\n            }}\r\n            value={pendingReply}\r\n            onChange={(value) => handleNoteTextareaChange(value)}\r\n            isReply\r\n          />\r\n        </div>\r\n        <div className='reply-button-container'>\r\n          <Button\r\n            img=\"icon-post-reply\"\r\n            className={'reply-button'}\r\n            isSubmitType={true}\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReplyArea;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport getOverlayPositionBasedOn from 'helpers/getOverlayPositionBasedOn';\r\nimport PopupPortal from 'components/PopupPortal';\r\nimport AnnotationStylePopup from 'components/AnnotationStylePopup';\r\n\r\nimport useOnClickOutside from 'hooks/useOnClickOutside';\r\nimport getAnnotationStyles from 'helpers/getAnnotationStyles';\r\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\r\nimport actions from 'actions';\r\nimport {\r\n  AnnotationStylePopupTabs,\r\n  updateAnnotationStylePopupTabs,\r\n  copyMapWithDataProperties,\r\n  getDataWithKey,\r\n} from 'constants/map';\r\n\r\n\r\nimport './MultiStylePopup.scss';\r\n\r\nconst MultiStylePopup = ({\r\n  annotations,\r\n  triggerElementName,\r\n  onClose = () => { },\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const popupRef = useRef();\r\n  const [styleTabs, setStyleTabs] = useState([]);\r\n  const [position, setPosition] = useState({ left: 'auto', right: 'auto', top: 'auto' });\r\n  const colorMapKey = 'MultiStyle';\r\n\r\n  useOnClickOutside(popupRef, (e) => {\r\n    const triggerElement = document.querySelector(`[data-element=${triggerElementName}]`);\r\n    const clickedTrigger = triggerElement.contains(e.target);\r\n    const warningModal = getOpenedWarningModal();\r\n    const colorPicker = getOpenedColorPicker();\r\n    const datePicker = getDatePicker();\r\n\r\n    if (!clickedTrigger && !warningModal && !colorPicker && !datePicker) {\r\n      // we only want to close the popup if we clicked outside and not on the trigger\r\n      onClose();\r\n    }\r\n  });\r\n\r\n  let style = {};\r\n  annotations.forEach((annotation) => {\r\n    style = { ...style, ...getAnnotationStyles(annotation) };\r\n  });\r\n  const freeTextAnnotation = annotations.find((annotation) => {\r\n    return (\r\n      annotation instanceof window.Core.Annotations.FreeTextAnnotation &&\r\n      (annotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeText ||\r\n      annotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeTextCallout)\r\n    );\r\n  });\r\n  let properties = {};\r\n  if (freeTextAnnotation) {\r\n    const richTextStyles = freeTextAnnotation.getRichTextStyle();\r\n    properties = {\r\n      Font: freeTextAnnotation.Font,\r\n      FontSize: freeTextAnnotation.FontSize,\r\n      TextAlign: freeTextAnnotation.TextAlign,\r\n      TextVerticalAlign: freeTextAnnotation.TextVerticalAlign,\r\n      bold: richTextStyles?.[0]?.['font-weight'] === 'bold' ?? false,\r\n      italic: richTextStyles?.[0]?.['font-style'] === 'italic' ?? false,\r\n      underline: richTextStyles?.[0]?.['text-decoration']?.includes('underline') || richTextStyles?.[0]?.['text-decoration']?.includes('word'),\r\n      strikeout: richTextStyles?.[0]?.['text-decoration']?.includes('line-through') ?? false,\r\n    };\r\n  }\r\n\r\n  // Update available palettesfor MultiStyle annotation type in map\r\n  useEffect(() => {\r\n    const availablePalettes = [];\r\n    style['TextColor'] && availablePalettes.push(AnnotationStylePopupTabs.TEXT_COLOR);\r\n    style['StrokeColor'] && availablePalettes.push(AnnotationStylePopupTabs.STROKE_COLOR);\r\n    style['FillColor'] && availablePalettes.push(AnnotationStylePopupTabs.FILL_COLOR);\r\n\r\n    const didUpdate =\r\n      updateAnnotationStylePopupTabs(colorMapKey, availablePalettes, availablePalettes[0]);\r\n    if (didUpdate) {\r\n      const newColorMap = copyMapWithDataProperties('currentStyleTab', 'iconColor');\r\n      dispatch(actions.setColorMap(newColorMap));\r\n      const { styleTabs: _styleTabs } = getDataWithKey(colorMapKey);\r\n      setStyleTabs(_styleTabs);\r\n    }\r\n  }, [annotations]);\r\n\r\n  const updatePosition = () => {\r\n    const position = getOverlayPositionBasedOn(triggerElementName, popupRef);\r\n    setPosition(position);\r\n  };\r\n\r\n  // Have to wait until palettes are available before showing popup\r\n  if (styleTabs.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <PopupPortal\r\n      id=\"multi-style-popup-portal\"\r\n      position={position}\r\n    >\r\n      <div\r\n        className='multi-style-container'\r\n        ref={popupRef}\r\n      >\r\n        <AnnotationStylePopup\r\n          annotations={annotations}\r\n          style={style}\r\n          isOpen\r\n          onResize={updatePosition}\r\n          isFreeText={!!freeTextAnnotation}\r\n          colorMapKey={colorMapKey}\r\n          properties={properties}\r\n          isRedaction={false}\r\n          isMeasure={false}\r\n          showLineStyleOptions={false}\r\n          hideSnapModeCheckbox={false}\r\n        />\r\n      </div>\r\n    </PopupPortal >\r\n  );\r\n};\r\n\r\nexport default MultiStylePopup;","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Icon from 'components/Icon';\r\nimport Button from 'components/Button';\r\nimport ReplyAreaMultiSelect from 'components/Note/ReplyArea/ReplyAreaMultiSelect';\r\nimport MultiStylePopup from 'components/NotesPanel/MultiStylePopup';\r\nimport NoteStatePopup from 'components/NoteState/NoteStatePopup';\r\nimport NoteContext from 'components/Note/Context';\r\n\r\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\r\nimport DataElements from 'constants/dataElement';\r\nimport PropTypes from 'prop-types';\r\nimport actions from 'actions';\r\nimport classNames from 'classnames';\r\nimport core from 'core';\r\nimport selectors from 'selectors';\r\n\r\nimport './MultiSelectControls.scss';\r\n\r\nconst propTypes = {\r\n  showMultiReply: PropTypes.bool.isRequired,\r\n  setShowMultiReply: PropTypes.func.isRequired,\r\n  showMultiState: PropTypes.bool.isRequired,\r\n  setShowMultiState: PropTypes.func.isRequired,\r\n  showMultiStyle: PropTypes.bool.isRequired,\r\n  setShowMultiStyle: PropTypes.func.isRequired,\r\n  setMultiSelectMode: PropTypes.func.isRequired,\r\n  isMultiSelectedMap: PropTypes.object.isRequired,\r\n  setIsMultiSelectedMap: PropTypes.func.isRequired,\r\n  multiSelectedAnnotations: PropTypes.array.isRequired,\r\n};\r\n\r\nconst getParentAnnotations = (annotations, documentViewerKey = 1) => {\r\n  const annotSet = new Set();\r\n  annotations.forEach((annotation) => {\r\n    if (annotation.isGrouped()) {\r\n      const parentAnnotation = core.getAnnotationById(annotation['InReplyTo'], documentViewerKey);\r\n      if (parentAnnotation) {\r\n        annotSet.add(parentAnnotation);\r\n      }\r\n    } else {\r\n      annotSet.add(annotation);\r\n    }\r\n  });\r\n  return Array.from(annotSet);\r\n};\r\n\r\nconst MultiSelectControls = ({\r\n  showMultiReply,\r\n  setShowMultiReply,\r\n  showMultiState,\r\n  setShowMultiState,\r\n  showMultiStyle,\r\n  setShowMultiStyle,\r\n  setMultiSelectMode,\r\n  isMultiSelectedMap,\r\n  setIsMultiSelectedMap,\r\n  multiSelectedAnnotations,\r\n}) => {\r\n  const [\r\n    modifiableMultiSelectAnnotations,\r\n    setModfiableMultiSelectAnnotations,\r\n  ] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const [t] = useTranslation();\r\n  const [activeDocumentViewerKey] = useSelector((state) => [\r\n    selectors.getActiveDocumentViewerKey(state),\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const onAnnotationChanged = (annotations, action) => {\r\n      if (action === 'delete') {\r\n        const _isMultiSelectedMap = { ...isMultiSelectedMap };\r\n        annotations.forEach((annot) => {\r\n          delete _isMultiSelectedMap[annot.Id];\r\n        });\r\n        setIsMultiSelectedMap(_isMultiSelectedMap);\r\n      } else if (action === 'modify') {\r\n        const _isMultiSelectedMap = { ...isMultiSelectedMap };\r\n        // update isMultiSelectedMap by looking at modified annots and\r\n        // their grouped annots\r\n        annotations.forEach((annot) => {\r\n          const groupedAnnots = core.getGroupAnnotations(annot, activeDocumentViewerKey);\r\n          const someAnnotInGroupIsSelected =\r\n            groupedAnnots.some((groupedAnnot) => isMultiSelectedMap[groupedAnnot.Id]);\r\n          if (someAnnotInGroupIsSelected) {\r\n            // select all annots in this group\r\n            groupedAnnots.forEach((groupAnnot) => {\r\n              _isMultiSelectedMap[groupAnnot.Id] = groupAnnot;\r\n            });\r\n          }\r\n        });\r\n\r\n        const originalKeys = Object.keys(isMultiSelectedMap);\r\n        const updatedKeys = Object.keys(isMultiSelectedMap);\r\n        const difference = originalKeys.filter((key) => !updatedKeys.includes(key));\r\n        if (difference.length > 0) {\r\n          // Only update if we have a difference to not cause re-renders and\r\n          // actions to not be dispatched if unneeded.\r\n          setIsMultiSelectedMap(_isMultiSelectedMap);\r\n        }\r\n      }\r\n    };\r\n\r\n    core.addEventListener('annotationChanged', onAnnotationChanged, undefined, activeDocumentViewerKey);\r\n    return () => {\r\n      core.removeEventListener('annotationChanged', onAnnotationChanged, activeDocumentViewerKey);\r\n    };\r\n  }, [isMultiSelectedMap, activeDocumentViewerKey]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setShowMultiReply(false);\r\n      setIsMultiSelectedMap({});\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const _modifiableMultiSelectAnnotations = multiSelectedAnnotations.filter((multiSelectedAnnot) => {\r\n      return core.canModify(multiSelectedAnnot, activeDocumentViewerKey);\r\n    });\r\n    setModfiableMultiSelectAnnotations(_modifiableMultiSelectAnnotations);\r\n  }, [multiSelectedAnnotations]);\r\n\r\n  const numberOfGroups = core.getNumberOfGroups(modifiableMultiSelectAnnotations, activeDocumentViewerKey);\r\n  const canGroup = numberOfGroups > 1;\r\n  const canUngroup = !canGroup && (modifiableMultiSelectAnnotations.length > 2 ||\r\n    (modifiableMultiSelectAnnotations.length > 0 && core.getGroupAnnotations(modifiableMultiSelectAnnotations[0], activeDocumentViewerKey).length > 1));\r\n\r\n  const handleStateChange = (newValue) => {\r\n    getParentAnnotations(multiSelectedAnnotations, activeDocumentViewerKey).forEach((annot) => {\r\n      const stateAnnotation = createStateAnnotation(annot, newValue, activeDocumentViewerKey);\r\n      annot.addReply(stateAnnotation);\r\n      const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\r\n      annotationManager.addAnnotation(stateAnnotation);\r\n      annotationManager.trigger('addReply', [stateAnnotation, annot, annotationManager.getRootAnnotation(annot)]);\r\n    });\r\n    setShowMultiState(false);\r\n  };\r\n\r\n  if (showMultiReply) {\r\n    return (\r\n      <NoteContext.Provider value={{\r\n        resize: () => {},\r\n      }}>\r\n        <ReplyAreaMultiSelect\r\n          annotations={getParentAnnotations(multiSelectedAnnotations, activeDocumentViewerKey)}\r\n          onSubmit={() => setShowMultiReply(false)}\r\n          onClose={() => setShowMultiReply(false)}\r\n        />\r\n      </NoteContext.Provider>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"multi-select-footer\">\r\n      <div className=\"buttons-container\">\r\n        <Button\r\n          dataElement={DataElements.NOTE_MULTI_REPLY_BUTTON}\r\n          disabled={multiSelectedAnnotations.length === 0}\r\n          img=\"icon-header-chat-line\"\r\n          onClick={() => {\r\n            setShowMultiReply(true);\r\n          }}\r\n          title=\"action.comment\"\r\n        />\r\n        <Button\r\n          dataElement={DataElements.NOTE_MULTI_STATE_BUTTON}\r\n          className={classNames({\r\n            active: showMultiState,\r\n          })}\r\n          disabled={modifiableMultiSelectAnnotations.length === 0}\r\n          img=\"icon-annotation-status-none\"\r\n          onClick={() => {\r\n            setShowMultiState(!showMultiState);\r\n          }}\r\n          title=\"option.notesOrder.status\"\r\n        />\r\n        {showMultiState &&\r\n          <NoteStatePopup\r\n            style={{\r\n              position: 'relative',\r\n              bottom: '52px',\r\n            }}\r\n            triggerElementName=\"multiStateButton\"\r\n            handleStateChange={handleStateChange}\r\n            onClose={() => {\r\n              setShowMultiState(false);\r\n            }}\r\n          />}\r\n        <Button\r\n          dataElement={DataElements.NOTE_MULTI_STYLE_BUTTON}\r\n          img=\"icon-menu-style-line\"\r\n          disabled={modifiableMultiSelectAnnotations.length === 0}\r\n          onClick={() => {\r\n            setShowMultiStyle(!showMultiStyle);\r\n          }}\r\n          title=\"action.style\"\r\n        />\r\n        {showMultiStyle &&\r\n          <MultiStylePopup\r\n            annotations={modifiableMultiSelectAnnotations}\r\n            triggerElementName=\"multiStyleButton\"\r\n            onClose={() => {\r\n              setShowMultiStyle(false);\r\n            }}\r\n          />}\r\n        {!canUngroup &&\r\n          <Button\r\n            dataElement={DataElements.NOTE_MULTI_GROUP_BUTTON}\r\n            disabled={!canGroup}\r\n            img=\"group-annotations-icon\"\r\n            onClick={() => {\r\n              core.groupAnnotations(multiSelectedAnnotations[0], multiSelectedAnnotations, activeDocumentViewerKey);\r\n            }}\r\n            title=\"action.group\"\r\n          />}\r\n        {canUngroup &&\r\n          <Button\r\n            dataElement={DataElements.NOTE_MULTI_UNGROUP_BUTTON}\r\n            img=\"ungroup-annotations-icon\"\r\n            onClick={() => {\r\n              core.ungroupAnnotations(multiSelectedAnnotations, activeDocumentViewerKey);\r\n            }}\r\n            title=\"action.ungroup\"\r\n          />}\r\n        <Button\r\n          dataElement={DataElements.NOTE_MULTI_DELETE_BUTTON}\r\n          disabled={modifiableMultiSelectAnnotations.length === 0}\r\n          img=\"icon-delete-line\"\r\n          onClick={() => {\r\n            const title = t('warning.multiDeleteAnnotation.title');\r\n            const message = t('warning.multiDeleteAnnotation.message');\r\n            const confirmBtnText = t('action.delete');\r\n\r\n            const warning = {\r\n              title,\r\n              message,\r\n              confirmBtnText,\r\n              onConfirm: () => {\r\n                core.deleteAnnotations(modifiableMultiSelectAnnotations, undefined, activeDocumentViewerKey);\r\n              },\r\n            };\r\n            dispatch(actions.showWarningMessage(warning));\r\n          }}\r\n          title=\"action.delete\"\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"close-container\"\r\n      >\r\n        <div\r\n          className=\"close-icon-container\"\r\n          onClick={() => {\r\n            setMultiSelectMode(false);\r\n          }}\r\n        >\r\n          <Icon\r\n            glyph=\"ic_close_black_24px\"\r\n            className=\"close-icon\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nMultiSelectControls.propTypes = propTypes;\r\n\r\nexport default MultiSelectControls;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport debounce from 'lodash/debounce';\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport classNames from 'classnames';\r\nimport core from 'core';\r\n\r\nimport Dropdown from 'components/Dropdown';\r\nimport Button from 'components/Button';\r\nimport DataElementWrapper from 'components/DataElementWrapper';\r\nimport CustomElement from 'components/CustomElement';\r\n\r\nimport Events from 'constants/events';\r\nimport { getSortStrategies } from 'constants/sortStrategies';\r\nimport DataElements from 'src/constants/dataElement';\r\n\r\nimport './NotesPanelHeader.scss';\r\n\r\nconst SORT_CONTAINER_ELEMENT = 'sortContainer';\r\n\r\nfunction NotesPanelHeader({\r\n  notes,\r\n  disableFilterAnnotation,\r\n  setSearchInputHandler,\r\n  isMultiSelectMode,\r\n  toggleMultiSelectMode,\r\n  isMultiSelectEnabled,\r\n}) {\r\n  const [\r\n    sortStrategy,\r\n    isSortContainerDisabled,\r\n    customHeaderOptions\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getSortStrategy(state),\r\n      selectors.isElementDisabled(state, SORT_CONTAINER_ELEMENT),\r\n      selectors.getNotesPanelCustomHeaderOptions(state)\r\n    ],\r\n    shallowEqual\r\n  );\r\n\r\n  const [t] = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const [filterEnabled, setFilterEnabled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const toggleFilterStyle = (e) => {\r\n      const { types, authors, colors, statuses } = e.detail;\r\n      if (types.length > 0 || authors.length > 0 || colors.length > 0 || statuses.length > 0) {\r\n        setFilterEnabled(true);\r\n      } else {\r\n        setFilterEnabled(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(Events.ANNOTATION_FILTER_CHANGED, toggleFilterStyle);\r\n    return () => {\r\n      window.removeEventListener(Events.ANNOTATION_FILTER_CHANGED, toggleFilterStyle);\r\n    };\r\n  }, []);\r\n\r\n  const handleInputChange = (e) => {\r\n    _handleInputChange(e.target.value);\r\n  };\r\n\r\n  const _handleInputChange = debounce((value) => {\r\n    // this function is used to solve the issue with using synthetic event asynchronously.\r\n    // https://reactjs.org/docs/events.html#event-pooling\r\n    core.deselectAllAnnotations();\r\n    setSearchInputHandler(value);\r\n  }, 500);\r\n\r\n  const sortContainer = (\r\n    <div className=\"sort-container\" data-element={SORT_CONTAINER_ELEMENT}>\r\n      <div className=\"label\">{`${t('message.sortBy')}:`}</div>\r\n      <Dropdown\r\n        dataElement=\"notesOrderDropdown\"\r\n        disabled={notes.length === 0}\r\n        items={Object.keys(getSortStrategies())}\r\n        translationPrefix=\"option.notesOrder\"\r\n        currentSelectionKey={sortStrategy}\r\n        onClickItem={(strategy) => {\r\n          dispatch(actions.setNotesPanelSortStrategy(strategy));\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  const originalHeaderElement = (\r\n    <DataElementWrapper\r\n      className=\"header\"\r\n      dataElement=\"notesPanelHeader\">\r\n\r\n      <DataElementWrapper\r\n        className=\"input-container\"\r\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.INPUT_CONTAINER}`}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder={t('message.searchCommentsPlaceholder')}\r\n          aria-label={t('message.searchCommentsPlaceholder')}\r\n          onChange={handleInputChange}\r\n          id=\"NotesPanel__input\"\r\n        />\r\n      </DataElementWrapper>\r\n\r\n      <DataElementWrapper\r\n        className=\"comments-counter\"\r\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.COMMENTS_COUNTER}`}>\r\n        <span className='main-comment'>{t('component.notesPanel')}</span> {`(${notes.length})`}\r\n      </DataElementWrapper>\r\n\r\n      <DataElementWrapper\r\n        className=\"sort-row\"\r\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.SORT_ROW}`}>\r\n        {(isSortContainerDisabled) ? <div className=\"sort-container\"></div> : sortContainer}\r\n        <div\r\n          className=\"buttons-container\"\r\n        >\r\n          {(!isMultiSelectEnabled) ? null :\r\n            <Button\r\n              dataElement={DataElements.NOTE_MULTI_SELECT_MODE_BUTTON}\r\n              className={classNames({\r\n                active: isMultiSelectMode,\r\n              })}\r\n              disabled={notes.length === 0}\r\n              img=\"icon-annotation-select-multiple\"\r\n              onClick={() => {\r\n                core.deselectAllAnnotations();\r\n                toggleMultiSelectMode();\r\n              }}\r\n              title={t('component.multiSelectButton')}\r\n            />\r\n          }\r\n          <Button\r\n            dataElement=\"filterAnnotationButton\"\r\n            className={classNames({\r\n              filterAnnotationButton: true,\r\n              active: filterEnabled\r\n            })}\r\n            disabled={disableFilterAnnotation}\r\n            img=\"icon-comments-filter\"\r\n            onClick={() => dispatch(actions.openElement('filterModal'))}\r\n            title={t('component.filter')}\r\n          />\r\n        </div>\r\n      </DataElementWrapper>\r\n    </DataElementWrapper>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {customHeaderOptions &&\r\n        <CustomElement\r\n          render={customHeaderOptions.render}\r\n          renderArguments={[notes]}\r\n        />\r\n      }\r\n\r\n      {(!customHeaderOptions || !customHeaderOptions.overwriteDefaultHeader) &&\r\n        originalHeaderElement\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NotesPanelHeader;\r\n","import NotesPanelHeader from './NotesPanelHeader';\r\n\r\nexport default NotesPanelHeader;","import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport VirtualizedList from 'components/NotesPanel/VirtualizedList';\r\nimport NormalList from 'components/NotesPanel/NormalList';\r\nimport Note from 'components/Note';\r\nimport Icon from 'components/Icon';\r\nimport NoteContext from 'components/Note/Context';\r\nimport ListSeparator from 'components/ListSeparator';\r\nimport MultiSelectControls from 'components/NotesPanel/MultiSelectControls';\r\nimport CustomElement from 'components/CustomElement';\r\nimport NotesPanelHeader from 'components/NotesPanelHeader';\r\n\r\nimport DataElements from 'constants/dataElement';\r\n\r\nimport core from 'core';\r\nimport { getSortStrategies } from 'constants/sortStrategies';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\nimport { isMobileSize } from 'helpers/getDeviceSize';\r\nimport { isIE } from 'helpers/device';\r\nimport ReplyAttachmentPicker from './ReplyAttachmentPicker';\r\n\r\nimport './NotesPanel.scss';\r\n\r\nconst NotesPanel = ({\r\n  currentLeftPanelWidth,\r\n  notes,\r\n  selectedNoteIds,\r\n  setSelectedNoteIds,\r\n  searchInput,\r\n  setSearchInput,\r\n  isMultiSelectMode,\r\n  setMultiSelectMode,\r\n  isMultiSelectedMap,\r\n  setIsMultiSelectedMap,\r\n  scrollToSelectedAnnot,\r\n  setScrollToSelectedAnnot,\r\n}) => {\r\n  const [\r\n    sortStrategy,\r\n    isOpen,\r\n    isDisabled,\r\n    pageLabels,\r\n    customNoteFilter,\r\n    currentNotesPanelWidth,\r\n    notesInLeftPanel,\r\n    isDocumentReadOnly,\r\n    showAnnotationNumbering,\r\n    enableNotesPanelVirtualizedList,\r\n    isInDesktopOnlyMode,\r\n    customEmptyPanel,\r\n    isNotesPanelMultiSelectEnabled,\r\n    activeDocumentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.getSortStrategy(state),\r\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\r\n      selectors.isElementDisabled(state, DataElements.NOTES_PANEL),\r\n      selectors.getPageLabels(state),\r\n      selectors.getCustomNoteFilter(state),\r\n      selectors.getNotesPanelWidth(state),\r\n      selectors.getNotesInLeftPanel(state),\r\n      selectors.isDocumentReadOnly(state),\r\n      selectors.isAnnotationNumberingEnabled(state),\r\n      selectors.getEnableNotesPanelVirtualizedList(state),\r\n      selectors.isInDesktopOnlyMode(state),\r\n      selectors.getNotesPanelCustomEmptyPanel(state),\r\n      selectors.getIsNotesPanelMultiSelectEnabled(state),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n  const currentWidth = currentLeftPanelWidth || currentNotesPanelWidth;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const isMobile = isMobileSize();\r\n\r\n\r\n  const [multiSelectedAnnotations, setMultiSelectedAnnotations] = useState([]);\r\n  const [showMultiReply, setShowMultiReply] = useState(false);\r\n  const [showMultiState, setShowMultiState] = useState(false);\r\n  const [showMultiStyle, setShowMultiStyle] = useState(false);\r\n\r\n  const [curAnnotId, setCurAnnotId] = useState(undefined);\r\n\r\n\r\n  const [t] = useTranslation();\r\n  const listRef = useRef();\r\n  // a ref that is used to keep track of the current scroll position\r\n  // when the number of notesToRender goes over/below the threshold, we will unmount the current list and mount the other one\r\n  // this will result in losing the scroll position and we will use this ref to recover\r\n  const scrollTopRef = useRef(0);\r\n  const VIRTUALIZATION_THRESHOLD = enableNotesPanelVirtualizedList ? (isIE ? 25 : 100) : Infinity;\r\n\r\n\r\n  useEffect(() => {\r\n    const onAnnotationNumberingUpdated = (isEnabled) => {\r\n      dispatch(actions.setAnnotationNumbering(isEnabled));\r\n    };\r\n\r\n    core.addEventListener('annotationNumberingUpdated', onAnnotationNumberingUpdated);\r\n\r\n    return () => {\r\n      core.removeEventListener('annotationNumberingUpdated', onAnnotationNumberingUpdated);\r\n    };\r\n  }, []);\r\n\r\n  let singleSelectedNoteIndex = -1;\r\n\r\n  const handleScroll = (scrollTop) => {\r\n    if (scrollTop) {\r\n      scrollTopRef.current = scrollTop;\r\n    }\r\n    dispatch(actions.closeElement('annotationNoteConnectorLine'));\r\n  };\r\n\r\n  const filterNotesWithSearch = (note) => {\r\n    const content = note.getContents();\r\n    const authorName = core.getDisplayAuthor(note['Author']);\r\n    const annotationPreview = note.getCustomData('trn-annot-preview');\r\n\r\n    // didn't use regex here because the search input may form an invalid regex, e.g. *\r\n    return (\r\n      content?.toLowerCase().includes(searchInput.toLowerCase()) ||\r\n      authorName?.toLowerCase().includes(searchInput.toLowerCase()) ||\r\n      annotationPreview?.toLowerCase().includes(searchInput.toLowerCase())\r\n    );\r\n  };\r\n\r\n  const filterNote = (note) => {\r\n    let shouldRender = true;\r\n\r\n    if (customNoteFilter) {\r\n      shouldRender = shouldRender && customNoteFilter(note);\r\n    }\r\n\r\n    if (searchInput) {\r\n      const replies = note.getReplies();\r\n      // reply is also a kind of annotation\r\n      // https://docs.apryse.com/api/web/Core.AnnotationManager.html#createAnnotationReply__anchor\r\n      const noteAndReplies = [note, ...replies];\r\n\r\n      shouldRender = shouldRender && noteAndReplies.some(filterNotesWithSearch);\r\n    }\r\n    return shouldRender;\r\n  };\r\n\r\n  const notesToRender = getSortStrategies()[sortStrategy].getSortedNotes(notes).filter(filterNote);\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(selectedNoteIds).length && singleSelectedNoteIndex !== -1) {\r\n      setTimeout(() => {\r\n        // wait for the previous selected annotation to resize() after closing before scrolling to the newly selected one\r\n        listRef.current?.scrollToRow(singleSelectedNoteIndex);\r\n      }, 0);\r\n    }\r\n  }, [selectedNoteIds]);\r\n\r\n  // expand a reply note when search content is match\r\n  const onlyReplyContainsSearchInput = (currNote) => {\r\n    if (Object.keys(selectedNoteIds).length) {\r\n      return false;\r\n    }\r\n    return (\r\n      searchInput &&\r\n      notesToRender\r\n        .filter((note) => {\r\n          return note.getReplies().some(filterNotesWithSearch);\r\n        })\r\n        .some((replies) => replies.Id === currNote.Id)\r\n    );\r\n  };\r\n\r\n  const [pendingEditTextMap, setPendingEditTextMap] = useState({});\r\n  const setPendingEditText = useCallback(\r\n    (pendingText, annotationID) => {\r\n      setPendingEditTextMap((map) => ({\r\n        ...map,\r\n        [annotationID]: pendingText,\r\n      }));\r\n    },\r\n    [setPendingEditTextMap],\r\n  );\r\n\r\n  const [pendingReplyMap, setPendingReplyMap] = useState({});\r\n  const setPendingReply = useCallback(\r\n    (pendingReply, annotationID) => {\r\n      setPendingReplyMap((map) => ({\r\n        ...map,\r\n        [annotationID]: pendingReply,\r\n      }));\r\n    },\r\n    [setPendingReplyMap],\r\n  );\r\n\r\n  const [pendingAttachmentMap, setPendingAttachmentMap] = useState({});\r\n  const addAttachments = (annotationID, attachments) => {\r\n    setPendingAttachmentMap((map) => ({\r\n      ...map,\r\n      [annotationID]: [...(map[annotationID] || []), ...attachments],\r\n    }));\r\n  };\r\n  const clearAttachments = (annotationID) => {\r\n    setPendingAttachmentMap((map) => ({\r\n      ...map,\r\n      [annotationID]: [],\r\n    }));\r\n  };\r\n  const deleteAttachment = (annotationID, attachment) => {\r\n    const attachmentList = pendingAttachmentMap[annotationID];\r\n    if (attachmentList?.length > 0) {\r\n      const index = attachmentList.indexOf(attachment);\r\n      if (index > -1) {\r\n        attachmentList.splice(index, 1);\r\n        setPendingAttachmentMap((map) => ({\r\n          ...map,\r\n          [annotationID]: [...attachmentList],\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setMultiSelectedAnnotations(Object.values(isMultiSelectedMap));\r\n  }, [isMultiSelectedMap]);\r\n\r\n  const toggleMultiSelectMode = () => {\r\n    if (isMultiSelectMode) {\r\n      setMultiSelectMode(false);\r\n    } else {\r\n      setMultiSelectMode(true);\r\n    }\r\n  };\r\n\r\n  const renderChild = (\r\n    notes,\r\n    index,\r\n    // when we are virtualizing the notes, all of them will be absolutely positioned\r\n    // this function needs to be called by a Note component whenever its height changes\r\n    // to clear the cache(used by react-virtualized) and recompute the height so that each note\r\n    // can have the correct position\r\n    resize = () => {},\r\n  ) => {\r\n    let listSeparator = null;\r\n    const { shouldRenderSeparator, getSeparatorContent } = getSortStrategies()[sortStrategy];\r\n    const prevNote = index === 0 ? null : notes[index - 1];\r\n    const currNote = notes[index];\r\n\r\n    if (shouldRenderSeparator && getSeparatorContent && (!prevNote || shouldRenderSeparator(prevNote, currNote))) {\r\n      listSeparator = <ListSeparator renderContent={() => getSeparatorContent(prevNote, currNote, { pageLabels })} />;\r\n    }\r\n\r\n    // Collapse an expanded note when the top non-reply NoteContent is clicked\r\n    const handleNoteClicked = () => {\r\n      if (!isMultiSelectMode && selectedNoteIds[currNote.Id]) {\r\n        setSelectedNoteIds((currIds) => {\r\n          const clone = { ...currIds };\r\n          delete clone[currNote.Id];\r\n          return clone;\r\n        });\r\n        core.deselectAnnotation(currNote, activeDocumentViewerKey);\r\n      }\r\n    };\r\n\r\n    // can potentially optimize this a bit since a new reference will cause consumers to rerender\r\n    const contextValue = {\r\n      searchInput,\r\n      resize,\r\n      isSelected: selectedNoteIds[currNote.Id],\r\n      isContentEditable: core.canModifyContents(currNote, activeDocumentViewerKey) && !currNote.getContents(),\r\n      pendingEditTextMap,\r\n      setPendingEditText,\r\n      pendingReplyMap,\r\n      setPendingReply,\r\n      isDocumentReadOnly,\r\n      isNotePanelOpen: isOpen || notesInLeftPanel,\r\n      onTopNoteContentClicked: handleNoteClicked,\r\n      isExpandedFromSearch: onlyReplyContainsSearchInput(currNote),\r\n      scrollToSelectedAnnot,\r\n      sortStrategy,\r\n      showAnnotationNumbering,\r\n      setCurAnnotId,\r\n      pendingAttachmentMap,\r\n      clearAttachments,\r\n      deleteAttachment,\r\n      addAttachments,\r\n      documentViewerKey: activeDocumentViewerKey,\r\n    };\r\n\r\n    if (index === singleSelectedNoteIndex) {\r\n      setTimeout(() => {\r\n        setScrollToSelectedAnnot(false);\r\n        // open the 'annotationNoteConnectorLine' since the note it's pointing to is being rendered\r\n        dispatch(actions.openElement('annotationNoteConnectorLine'));\r\n      }, 0);\r\n    }\r\n\r\n    return (\r\n      // unfortunately we need to use an actual div instead of React.Fragment here so that we can pass the correct index to scrollToRow\r\n      // if this is a fragment then the listSeparator is rendered as a separate child, which means\r\n      // singleSelectedNoteIndex might not be the index of the selected note among all the child elements of the notes panel\r\n      <div role=\"listitem\" className=\"note-wrapper\">\r\n        {listSeparator}\r\n        <NoteContext.Provider value={contextValue}>\r\n          <Note\r\n            annotation={currNote}\r\n            isMultiSelected={!!isMultiSelectedMap[currNote.Id]}\r\n            isMultiSelectMode={isMultiSelectMode}\r\n            isMultiSelectEnabled={isNotesPanelMultiSelectEnabled}\r\n            isInNotesPanel\r\n            handleMultiSelect={(checked) => {\r\n              if (checked) {\r\n                const _isMultiSelectedMap = { ...isMultiSelectedMap };\r\n                const groupAnnots = core.getGroupAnnotations(currNote, activeDocumentViewerKey);\r\n                groupAnnots.forEach((groupAnnot) => {\r\n                  _isMultiSelectedMap[groupAnnot.Id] = groupAnnot;\r\n                });\r\n                setIsMultiSelectedMap(_isMultiSelectedMap);\r\n              } else {\r\n                const _isMultiSelectedMap = { ...isMultiSelectedMap };\r\n                const groupAnnots = core.getGroupAnnotations(currNote, activeDocumentViewerKey);\r\n                groupAnnots.forEach((groupAnnot) => {\r\n                  delete _isMultiSelectedMap[groupAnnot.Id];\r\n                });\r\n                setIsMultiSelectedMap(_isMultiSelectedMap);\r\n              }\r\n            }}\r\n          />\r\n        </NoteContext.Provider>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const NoResults = (\r\n    <div className=\"no-results\">\r\n      <div>\r\n        <Icon className=\"empty-icon\" glyph=\"illustration - empty state - outlines\" />\r\n      </div>\r\n      <div className=\"msg\">{t('message.noResults')}</div>\r\n    </div>\r\n  );\r\n\r\n  const NoAnnotationsGlyph =\r\n    customEmptyPanel && customEmptyPanel.icon ? customEmptyPanel.icon : 'illustration - empty state - outlines';\r\n  const NoAnnotationsMessage =\r\n    customEmptyPanel && customEmptyPanel.message ? customEmptyPanel.message : t('message.noAnnotations');\r\n  const NoAnnotationsReadOnlyMessage =\r\n    customEmptyPanel && customEmptyPanel.readOnlyMessage\r\n      ? customEmptyPanel.readOnlyMessage\r\n      : t('message.noAnnotationsReadOnly');\r\n  const shouldRenderNoAnnotationsIcon = (customEmptyPanel && !customEmptyPanel.hideIcon) || !customEmptyPanel;\r\n  const shouldRenderCustomEmptyPanel = customEmptyPanel && customEmptyPanel.render;\r\n\r\n  const NoAnnotations = (\r\n    <div className=\"no-annotations\">\r\n      {shouldRenderCustomEmptyPanel ? (\r\n        <CustomElement render={customEmptyPanel.render} />\r\n      ) : (\r\n        <>\r\n          {shouldRenderNoAnnotationsIcon && (\r\n            <div>\r\n              <Icon className=\"empty-icon\" glyph={NoAnnotationsGlyph} />\r\n            </div>\r\n          )}\r\n          <div className=\"msg\">{isDocumentReadOnly ? NoAnnotationsReadOnlyMessage : NoAnnotationsMessage}</div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const MultiSelectPlaceHolder = <div className=\"multi-select-place-holder\" />;\r\n\r\n  const MultiReplyPlaceHolder = <div className=\"multi-reply-place-holder\" />;\r\n\r\n  // keep track of the index of the single selected note in the sorted and filtered list\r\n  // in order to scroll it into view in this render effect\r\n  const ids = Object.keys(selectedNoteIds);\r\n  if (ids.length === 1) {\r\n    singleSelectedNoteIndex = notesToRender.findIndex((note) => note.Id === ids[0]);\r\n  } else if (ids.length) {\r\n    // when selecting annotations that are grouped together, scroll to parent annotation that is in \"notesToRender\"\r\n    // selectedNoteIds will have every ID in the group, while only the parent is in notesToRender\r\n    const existingSelectedNotes = notesToRender.filter((note) => selectedNoteIds[note.Id]);\r\n\r\n    if (existingSelectedNotes.length) {\r\n      singleSelectedNoteIndex = notesToRender.findIndex((note) => note.Id === existingSelectedNotes[0].Id);\r\n    }\r\n  }\r\n\r\n  let style = {};\r\n  if (isInDesktopOnlyMode || !isMobile) {\r\n    style = { width: `${currentWidth}px`, minWidth: `${currentWidth}px` };\r\n  }\r\n\r\n  const showNotePanel = !isDisabled && (isOpen || notesInLeftPanel);\r\n  return !showNotePanel ? null : (\r\n    <div className=\"notes-panel-container\">\r\n      <div\r\n        className={classNames({\r\n          Panel: true,\r\n          NotesPanel: true,\r\n        })}\r\n        style={style}\r\n        data-element=\"notesPanel\"\r\n        onMouseUp={() => core.deselectAllAnnotations}\r\n      >\r\n        {!isInDesktopOnlyMode && isMobile && !notesInLeftPanel && (\r\n          <div className=\"close-container\">\r\n            <div\r\n              className=\"close-icon-container\"\r\n              onClick={() => {\r\n                dispatch(actions.closeElements([DataElements.NOTES_PANEL]));\r\n              }}\r\n            >\r\n              <Icon glyph=\"ic_close_black_24px\" className=\"close-icon\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <React.Fragment>\r\n          <NotesPanelHeader\r\n            notes={notesToRender}\r\n            disableFilterAnnotation={notes.length === 0}\r\n            setSearchInputHandler={setSearchInput}\r\n            isMultiSelectMode={isMultiSelectMode}\r\n            toggleMultiSelectMode={toggleMultiSelectMode}\r\n            isMultiSelectEnabled={isNotesPanelMultiSelectEnabled}\r\n          />\r\n          {notesToRender.length === 0 ? (\r\n            notes.length === 0 ? (\r\n              NoAnnotations\r\n            ) : (\r\n              NoResults\r\n            )\r\n          ) : notesToRender.length <= VIRTUALIZATION_THRESHOLD ? (\r\n            <NormalList\r\n              ref={listRef}\r\n              notes={notesToRender}\r\n              onScroll={handleScroll}\r\n              initialScrollTop={scrollTopRef.current}\r\n            >\r\n              {renderChild}\r\n            </NormalList>\r\n          ) : (\r\n            <VirtualizedList\r\n              ref={listRef}\r\n              notes={notesToRender}\r\n              sortStrategy={sortStrategy}\r\n              onScroll={handleScroll}\r\n              initialScrollTop={scrollTopRef.current}\r\n              selectedIndex={singleSelectedNoteIndex}\r\n            >\r\n              {renderChild}\r\n            </VirtualizedList>\r\n          )}\r\n          {/* These two placeholders need to exist so that MultiSelectControls can\r\n          be overlayed with position absolute and extend into the right panel while\r\n          still being able to not have any notes cut off */}\r\n          {isMultiSelectMode ? (showMultiReply ? MultiReplyPlaceHolder : MultiSelectPlaceHolder) : null}\r\n        </React.Fragment>\r\n      </div>\r\n      {isMultiSelectMode && (\r\n        <MultiSelectControls\r\n          showMultiReply={showMultiReply}\r\n          setShowMultiReply={setShowMultiReply}\r\n          showMultiState={showMultiState}\r\n          setShowMultiState={setShowMultiState}\r\n          showMultiStyle={showMultiStyle}\r\n          setShowMultiStyle={setShowMultiStyle}\r\n          setMultiSelectMode={setMultiSelectMode}\r\n          isMultiSelectedMap={isMultiSelectedMap}\r\n          setIsMultiSelectedMap={setIsMultiSelectedMap}\r\n          multiSelectedAnnotations={multiSelectedAnnotations}\r\n        />\r\n      )}\r\n      <ReplyAttachmentPicker annotationId={curAnnotId} addAttachments={addAttachments} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotesPanel;\r\n","import React, { useEffect, useState, useCallback } from 'react';\r\nimport core from 'core';\r\nimport NotesPanel from './NotesPanel';\r\nimport { useSelector, shallowEqual } from 'react-redux';\r\nimport selectors from 'selectors';\r\n\r\nfunction NotePopupContainer(props) {\r\n  const [\r\n    isOpen,\r\n    notesInLeftPanel,\r\n    isNotesPanelMultiSelectEnabled,\r\n    isMultiViewerMode,\r\n    activeDocumentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.isElementOpen(state, 'notesPanel'),\r\n      selectors.getNotesInLeftPanel(state),\r\n      selectors.getIsNotesPanelMultiSelectEnabled(state),\r\n      selectors.isMultiViewerMode(state),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const [isMultiSelectMode, setMultiSelectMode] = useState(false);\r\n  const [scrollToSelectedAnnot, setScrollToSelectedAnnot] = useState(false);\r\n\r\n\r\n  const [noteMap, setNoteMap] = useState({ 1: [], 2: [] });\r\n  const setNotes = useCallback((notes, documentViewerKey = activeDocumentViewerKey) => {\r\n    noteMap[documentViewerKey] = notes;\r\n    setNoteMap({ ...noteMap });\r\n  }, [activeDocumentViewerKey, noteMap[1], noteMap[2], setNoteMap]);\r\n  const notes = noteMap[activeDocumentViewerKey] || noteMap[1];\r\n\r\n  // the object will be in a shape of { [note.Id]: true }\r\n  // use a map here instead of an array to achieve an O(1) time complexity for checking if a note is selected\r\n  const [selectedNoteIdsMap, setSelectedNoteIdsMap] = useState({ 1: {}, 2: {}, });\r\n  const setSelectedNoteIds = useCallback((selectedNoteIds, documentViewerKey = activeDocumentViewerKey) => {\r\n    selectedNoteIdsMap[documentViewerKey] = selectedNoteIds;\r\n    setSelectedNoteIdsMap({ ...selectedNoteIdsMap });\r\n  }, [activeDocumentViewerKey, selectedNoteIdsMap[1], selectedNoteIdsMap[2], setSelectedNoteIdsMap]);\r\n  const selectedNoteIds = selectedNoteIdsMap[activeDocumentViewerKey] || selectedNoteIdsMap[1];\r\n\r\n  const [isMultiSelectedViewerMap, setIsMultiSelectedViewerMap] = useState({ 1: {}, 2: {}, });\r\n  const setIsMultiSelectedMap = useCallback((isMultiSelected, documentViewerKey = activeDocumentViewerKey) => {\r\n    isMultiSelectedViewerMap[documentViewerKey] = isMultiSelected;\r\n    setIsMultiSelectedViewerMap({ ...isMultiSelectedViewerMap });\r\n  }, [activeDocumentViewerKey, isMultiSelectedViewerMap[1], isMultiSelectedViewerMap[2], setIsMultiSelectedViewerMap]);\r\n  const isMultiSelectedMap = isMultiSelectedViewerMap[activeDocumentViewerKey] || isMultiSelectedViewerMap[1];\r\n\r\n\r\n  useEffect(() => {\r\n    const onDocumentUnloaded = (documentViewerKey = activeDocumentViewerKey) => () => {\r\n      setNotes([], documentViewerKey);\r\n      setSelectedNoteIds({});\r\n      setSearchInput('');\r\n    };\r\n    const _setNotes = (documentViewerKey = activeDocumentViewerKey) => () => {\r\n      const selectedAnnotations = core.getSelectedAnnotations(documentViewerKey);\r\n      const groupedAnnots = getGroupedAnnots(selectedAnnotations);\r\n\r\n      if (groupedAnnots.length === selectedAnnotations.length) {\r\n        setMultiSelectMode(false);\r\n      }\r\n\r\n      setNotes(\r\n        core\r\n          .getAnnotationsList(documentViewerKey)\r\n          .filter(\r\n            (annot) => annot.Listable &&\r\n              !annot.isReply() &&\r\n              !annot.Hidden &&\r\n              !annot.isGrouped() &&\r\n              annot.ToolName !== window.Core.Tools.ToolNames.CROP &&\r\n              !annot.isContentEditPlaceholder(),\r\n          ),\r\n        documentViewerKey,\r\n      );\r\n    };\r\n\r\n    const setDocumentUnloaded1 = onDocumentUnloaded(1);\r\n    core.addEventListener('documentUnloaded', setDocumentUnloaded1);\r\n    const setNotes1 = _setNotes(1);\r\n    core.addEventListener('annotationChanged', setNotes1);\r\n    core.addEventListener('annotationHidden', setNotes1);\r\n    core.addEventListener('updateAnnotationPermission', setNotes1);\r\n    setNotes1();\r\n\r\n    let setDocumentUnloaded2;\r\n    let setNotes2;\r\n    if (isMultiViewerMode) {\r\n      setDocumentUnloaded2 = onDocumentUnloaded(2);\r\n      core.addEventListener('documentUnloaded', setDocumentUnloaded2, undefined, 2);\r\n      setNotes2 = _setNotes(2);\r\n      core.addEventListener('annotationChanged', setNotes2, undefined, 2);\r\n      core.addEventListener('annotationHidden', setNotes2, undefined, 2);\r\n      core.addEventListener('updateAnnotationPermission', setNotes2, undefined, 2);\r\n      setNotes2();\r\n    }\r\n\r\n    return () => {\r\n      if (isMultiViewerMode) {\r\n        core.removeEventListener('documentUnloaded', setDocumentUnloaded2, 2);\r\n        core.removeEventListener('annotationChanged', setNotes2, 2);\r\n        core.removeEventListener('annotationHidden', setNotes2, 2);\r\n        core.removeEventListener('updateAnnotationPermission', setNotes2, 2);\r\n      }\r\n      core.removeEventListener('documentUnloaded', setDocumentUnloaded1);\r\n      core.removeEventListener('annotationChanged', setNotes1);\r\n      core.removeEventListener('annotationHidden', setNotes1);\r\n      core.removeEventListener('updateAnnotationPermission', setNotes1);\r\n    };\r\n  }, [isMultiViewerMode]);\r\n\r\n  useEffect(() => {\r\n    const onAnnotationSelected = (documentViewerKey = activeDocumentViewerKey) => (annotations, action) => {\r\n      const selectedAnnotations = core.getSelectedAnnotations(documentViewerKey);\r\n      const ids = {};\r\n      selectedAnnotations.forEach((annot) => {\r\n        ids[annot.Id] = true;\r\n      });\r\n      if (isOpen || notesInLeftPanel) {\r\n        setSelectedNoteIds(ids, documentViewerKey);\r\n        setScrollToSelectedAnnot(true);\r\n      }\r\n      const groupedAnnots = getGroupedAnnots(selectedAnnotations);\r\n      if (isNotesPanelMultiSelectEnabled && action === 'selected' && selectedAnnotations.length > 1 && groupedAnnots.length !== selectedAnnotations.length) {\r\n        setMultiSelectMode(true);\r\n        selectedAnnotations.forEach((selectedAnnot) => {\r\n          isMultiSelectedMap[selectedAnnot.Id] = selectedAnnot;\r\n        });\r\n        setIsMultiSelectedMap({ ...isMultiSelectedMap }, documentViewerKey);\r\n      }\r\n    };\r\n    const onAnnotationSelected1 = onAnnotationSelected(1);\r\n    onAnnotationSelected1();\r\n    core.addEventListener('annotationSelected', onAnnotationSelected1);\r\n    let onAnnotationSelected2;\r\n    if (isMultiViewerMode) {\r\n      onAnnotationSelected2 = onAnnotationSelected(2);\r\n      onAnnotationSelected2();\r\n      core.addEventListener('annotationSelected', onAnnotationSelected2, undefined, 2);\r\n    }\r\n    return () => {\r\n      core.removeEventListener('annotationSelected', onAnnotationSelected1);\r\n      if (isMultiViewerMode) {\r\n        core.removeEventListener('annotationSelected', onAnnotationSelected2, 2);\r\n      }\r\n    };\r\n  }, [isOpen, notesInLeftPanel, isMultiSelectMode, isMultiSelectedMap, isNotesPanelMultiSelectEnabled, isMultiViewerMode]);\r\n\r\n  function getGroupedAnnots(selectedAnnotations) {\r\n    const mainAnnot = selectedAnnotations.find((annot) => annot.isGrouped());\r\n    const groupedAnnots = [];\r\n\r\n    // check if all selected annots are grouped annotations\r\n    if (mainAnnot) {\r\n      selectedAnnotations.forEach((annot) => {\r\n        if (mainAnnot['InReplyTo'] === annot['InReplyTo']\r\n          || mainAnnot['InReplyTo'] === annot['Id']) {\r\n          groupedAnnots.push(annot);\r\n        }\r\n      });\r\n    }\r\n    return groupedAnnots;\r\n  }\r\n\r\n  const passProps = {\r\n    notes,\r\n    setNotes,\r\n    getGroupedAnnots,\r\n    selectedNoteIds,\r\n    setSelectedNoteIds,\r\n    searchInput,\r\n    setSearchInput,\r\n    isMultiSelectMode,\r\n    setMultiSelectMode,\r\n    isMultiSelectedMap,\r\n    setIsMultiSelectedMap,\r\n    scrollToSelectedAnnot,\r\n    setScrollToSelectedAnnot,\r\n  };\r\n\r\n  // We wrap the element in a div so the tooltip works properly\r\n  return (\r\n    <NotesPanel {...props} {...passProps} />\r\n  );\r\n}\r\n\r\nexport default NotePopupContainer;\r\n","import NotesPanel from './NotesPanelContainer';\r\n\r\nexport default NotesPanel;\r\n"],"sourceRoot":""}